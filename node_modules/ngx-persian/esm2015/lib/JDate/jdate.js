/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import { JalaliDateCalculatorService } from './jalali-date-calculator.service';
import { InvalidJalaliDateError } from './InvalidJalaliDate.error';
import { JalaliDateValidatorService } from './jalali-date-validator.service';
/**
 * This class represents a complete Date object for Jalali dates. It accepts jalali Dates, converts Georgian dates to jalali and implements
 * all the behaviours of default Date object of JavaScript for Jalali Date, plus some additional methods for developers convenience.
 *
 * ATTENTION:
 *
 * UTC methods are not implemented for Jalali date. They working directly on gDate object (Corresponding date in Georgian) and changing
 * properties of this. Then new JDate object will create from the modified Georgian Date. So they may Cause unpredictable behaviour.
 * Please don't use UTC methods with "todo" tag on them unless you are sure about the behaviour.
 * Recreating objects are safer than working with UTC methods.
 */
export class JDate {
    /**
     * For creating a JDate object, you have 5 different options.
     *
     * 1- If you want to have current date and time, you can simply call new JDate() without any parameter.
     *
     * 2- If you want to create JDate object from a jalali date string as described in the `pars` method document, you can pass that string as
     *    first parameter and leave others empty.
     *
     * 3 - If you want to create JDate object from number of passed milliseconds from UNIX epoch (for example creating a Jalali date object
     *     from result of getTime method of another Date object), you can pass the number as first parameter and leave others alone.
     *
     * 4 - If you want to create JDate object from a Georgian Date object, you can simply pass that Date object as first parameter and leave
     *     others empty.
     *
     * 5- If you want to create JDate object from date and time values, you can simply fill corresponding parameters of each date and time
     * value to the constructor. You don't have to fill all of the parameters. only those you need. other parameters will fill with zero.
     * Examples of all of those scenarios:
     *
     * \@example new JDate() / new JDate('11 دی 1348 00:00:00') / new JDate(-12600000) / new JDate(new Date(2018, 0, 1)) / new JDate(1397, 0, 25) / new JDate(1397, 11, 25, 12, 32, 45, 123)
     * @throws InvalidJalaliDateError
     * @param {?=} jYear
     * @param {?=} jMonth Month number starting from 0 and should be LESSER than 12.
     * @param {?=} jDay
     * @param {?=} hours
     * @param {?=} minutes
     * @param {?=} seconds
     * @param {?=} milliseconds
     */
    constructor(jYear, jMonth, jDay, hours = 0, minutes = 0, seconds = 0, milliseconds = 0) {
        this._calculator = new JalaliDateCalculatorService(new JalaliDateValidatorService());
        if (!jYear) {
            this._createFromDate(new Date());
        }
        else if (typeof jYear === 'string' && jMonth === undefined) {
            this._createFromDate(new Date(JDate.parse(jYear)));
        }
        else if (typeof jYear === 'number' && jMonth === undefined) {
            this._createFromDate(new Date(jYear));
        }
        else if (jYear instanceof Date && jMonth === undefined) {
            this._createFromDate(jYear);
        }
        else {
            // @ts-ignore
            this._gDate = this._calculator.convertToGeorgian(jYear, jMonth, jDay);
            // @ts-ignore
            this._jYear = jYear;
            this._jMonth = jMonth;
            this._jDay = jDay;
            this._gDate.setHours(hours, minutes, seconds, milliseconds);
        }
        this._check_date_validity();
    }
    /**
     * If input value length is shorter than desiredLength, adds zeros at the beginning of it until meets desired length.
     * @param {?} value a number or string that we want have a specific length
     * @param {?} desiredLength length of output string. If be shorter than input length, input will return.
     * @return {?}
     */
    static zeroPadding(value, desiredLength) {
        value = value.toString();
        while (value.length < desiredLength) {
            value = '0' + value;
        }
        return value;
    }
    /**
     * Extracts Georgian Date object from a Jalali date string.
     * \@example 11 دی 1348 00:00:00 / 11 Dey 1348 00:00:00
     * @param {?} dateString a Jalali date string following this pattern:
     *
     *        "yyyy mmm dd HH:MM:SS"
     *        or this pattern:
     *
     *        "yyyy mmmm dd HH:MM:SS".
     * @return {?} a Georgian Date object.
     */
    static parse(dateString) {
        /** @type {?} */
        const calculator = new JalaliDateCalculatorService(new JalaliDateValidatorService());
        /** @type {?} */
        const dateArray = dateString.split(' ');
        if (dateArray.length < 3) {
            throw new InvalidJalaliDateError();
        }
        /** @type {?} */
        const day = parseInt(dateArray[0]);
        /** @type {?} */
        let month = JDate.FA_MONTHS.indexOf(dateArray[1]);
        if (month === -1) {
            month = JDate.EN_MONTHS.indexOf(dateArray[1]);
        }
        if (month === -1) {
            throw new InvalidJalaliDateError();
        }
        /** @type {?} */
        const year = parseInt(dateArray[2]);
        /** @type {?} */
        const timeArray = dateArray.length > 3 ? dateArray[3].split(':') : ['0', '0', '0'];
        /** @type {?} */
        const hour = parseInt(timeArray[0]);
        /** @type {?} */
        const min = parseInt(timeArray[1]);
        /** @type {?} */
        const sec = parseInt(timeArray[2]);
        /** @type {?} */
        const gDate = calculator.convertToGeorgian(year, month, day);
        gDate.setHours(hour, min, sec);
        return gDate.getTime();
    }
    /**
     * This method recalculates the gDate value with private attributes those storing Jalali date parts.
     * @private
     * @return {?}
     */
    _renewGDate() {
        this._gDate = this._calculator.convertToGeorgian(this._jYear, this._jMonth, this._jDay);
    }
    /**
     * Sets Jalali year value to the input parameter and recalculates gDate attribute.
     * @private
     * @param {?} value full Jalali year like 1397
     * @return {?}
     */
    set jYear(value) {
        this._jYear = value;
        this._check_date_validity();
        this._renewGDate();
    }
    /**
     * Sets Jalali month value to the input parameter and recalculates gDate attribute.
     * @private
     * @param {?} value month number starting from zero
     * @return {?}
     */
    set jMonth(value) {
        this._jMonth = value;
        this._check_date_validity();
        this._renewGDate();
    }
    /**
     * Sets Jalali day value to the input parameter and recalculates gDate attribute.
     * @private
     * @param {?} value day number starting from 1.
     * @return {?}
     */
    set jDay(value) {
        this._jDay = value;
        this._check_date_validity();
        this._renewGDate();
    }
    /**
     * throws InvalidJalaliDateError when date values of this object won't represent a valid Jalali date.
     * Otherwise nothing happens.
     * @throws InvalidJalaliDateError
     * @private
     * @return {?}
     */
    _check_date_validity() {
        if (!this._calculator.validator.isValidJDate(this._jYear, this._jMonth, this._jDay)) {
            throw new InvalidJalaliDateError();
        }
    }
    /**
     * Calculates Jalali year from Georgian Date object and sets the attributes of the object to proper values.
     * @private
     * @param {?} gDate
     * @return {?}
     */
    _createFromDate(gDate) {
        /** @type {?} */
        const conversionResult = this._calculator.convertToJalali(gDate);
        this._jYear = conversionResult.year;
        this._jMonth = conversionResult.month;
        this._jDay = conversionResult.day;
        this._gDate = gDate;
    }
    /**
     * @param {?} hint
     * @return {?}
     */
    [Symbol.toPrimitive](hint) {
        return undefined;
    }
    /**
     * @return {?} a regular javascript Date object representing Georgian date corresponding to the Jalili date of the JDate object.
     */
    getGeorgianDate() {
        return this._gDate;
    }
    /**
     * @return {?} the day of the month for the specified date according to local time.
     */
    getDate() {
        return this._jDay;
    }
    /**
     * @return {?} the day of the week for the specified date according to local time, where 0 represents Friday and 6 is Thursday.
     */
    getDay() {
        return (this._gDate.getDay() + 2) % 7;
    }
    /**
     * \@example 1397 / 100
     *
     * @return {?} the year (4 digits for years greater than 999) of the specified date according to local time
     */
    getFullYear() {
        return this._jYear;
    }
    /**
     * \@example 10
     * @return {?} the hour for the specified date, according to local time.
     */
    getHours() {
        return this._gDate.getHours();
    }
    /**
     * Converts default 24-hour clock hour value to the 12-hour clock version.
     * @return {?} a number between 1 to 12
     */
    getHours12hourClock() {
        /** @type {?} */
        const result = this.getHours() % 12;
        return result ? result : 12;
    }
    /**
     * @return {?} the milliseconds in the specified date according to local time.
     */
    getMilliseconds() {
        return this._gDate.getMilliseconds();
    }
    /**
     * \@Return the minutes in the specified date according to local time.
     * @return {?}
     */
    getMinutes() {
        return this._gDate.getMinutes();
    }
    /**
     * @return {?} the month in the specified date according to local time, as a zero-based value
     * where zero indicates the first month of the year.
     */
    getMonth() {
        return this._jMonth;
    }
    /**
     * @return {?} the seconds in the specified date according to local time.
     */
    getSeconds() {
        return this._gDate.getSeconds();
    }
    /**
     * JavaScript uses milliseconds as the unit of measurement, whereas Unix Time is in seconds.
     *
     * getTime() always uses UTC for time representation. For example, a client browser in one timezone, getTime() will be the same as a
     * client browser in any other timezone.
     *
     * You can use this method to help assign a date and time to another Date object. This method is functionally equivalent to the valueOf() method.
     * @return {?} the number of milliseconds since the Unix Epoch.
     */
    getTime() {
        return this._gDate.getTime();
    }
    /**
     * Attention: Not implemented
     * \@todo add implementation
     * @return {?} the time zone difference, in minutes, from current locale (host system settings) to UTC
     */
    getTimezoneOffset() {
        return this._gDate.getTimezoneOffset();
    }
    /**
     * Output is not jalali day.
     * \@todo add implementation
     * @return {?} getUTCDate of the corresponding Georgian date.
     */
    getUTCDate() {
        return this._gDate.getUTCDate();
    }
    /**
     * Output is not jalali day.
     * \@todo add implementation
     * @return {?} getUTCDay of the corresponding Georgian date.
     */
    getUTCDay() {
        return this._gDate.getUTCDay();
    }
    /**
     * Output is not a Jalali Year.
     * \@todo add implementation
     * @return {?} getUTCFullYear of the corresponding Georgian date.
     */
    getUTCFullYear() {
        return this._gDate.getUTCFullYear();
    }
    /**
     * \@todo add implementation
     * @return {?} getUTCHours of the corresponding Georgian date.
     */
    getUTCHours() {
        return this._gDate.getUTCHours();
    }
    /**
     * \@todo add implementation
     * @return {?} getUTCMilliseconds of the corresponding Georgian date.
     */
    getUTCMilliseconds() {
        return this._gDate.getUTCMilliseconds();
    }
    /**
     * \@todo add implementation
     * @return {?} getUTCMinutes of the corresponding Georgian date.
     */
    getUTCMinutes() {
        return this._gDate.getUTCMinutes();
    }
    /**
     * Output is not a Jalali Year.
     * \@todo add implementation
     * @return {?} getUTCMonth of the corresponding Georgian date.
     */
    getUTCMonth() {
        return this._gDate.getUTCMonth();
    }
    /**
     * \@todo add implementation
     * @return {?} getUTCSeconds of the corresponding Georgian date.
     */
    getUTCSeconds() {
        return this._gDate.getUTCSeconds();
    }
    /**
     * sets the day of the JDate object relative to the beginning of the currently set month.
     * @param {?} date day number starts from 1.
     * @return {?} The number of milliseconds between 1 January 1970 00:00:00 UTC and the given date (the Date object is also changed in place).
     */
    setDate(date) {
        this.jDay = date;
        return this.getTime();
    }
    /**
     * sets the full year for a specified date according to local time. Returns new timestamp.
     * @param {?} year full Jalali year like 1397
     * @param {?=} month number of month starting from 0
     * @param {?=} date number of day starting from 1
     * @return {?}
     */
    setFullYear(year, month, date) {
        this.jYear = year;
        if (month) {
            this.jMonth = month;
        }
        if (date) {
            this.jDay = date;
        }
        return this.getTime();
    }
    /**
     * Sets the hours for a specified date according to local time, and returns the number of milliseconds since
     * January 1, 1970 00:00:00 UTC until the time represented by the updated JDate instance.
     * @param {?} hours An integer between 0 and 23, representing the hour
     * @param {?=} min An integer between 0 and 59, representing the minutes.
     * @param {?=} sec An integer between 0 and 59, representing the seconds.
     * @param {?=} ms A number between 0 and 999, representing the milliseconds.
     * @return {?} The number of milliseconds between January 1, 1970 00:00:00 UTC and the updated date.
     */
    setHours(hours, min, sec, ms) {
        this._gDate.setHours(hours);
        if (min !== undefined) {
            this.setMinutes(min);
        }
        if (sec !== undefined) {
            this.setSeconds(sec);
        }
        if (ms !== undefined) {
            this.setMilliseconds(ms);
        }
        return this.getTime();
    }
    /**
     * Sets the milliseconds for a specified date according to local time.
     * @param {?} ms A number between 0 and 999, representing the milliseconds.
     * @return {?} The number of milliseconds between 1 January 1970 00:00:00 UTC and the updated date.
     */
    setMilliseconds(ms) {
        this._gDate.setMilliseconds(ms);
        return this.getTime();
    }
    /**
     * Sets the minutes for a specified date according to local time.
     * @param {?} min An integer between 0 and 59, representing the minutes.
     * @param {?=} sec An integer between 0 and 59, representing the seconds.
     * @param {?=} ms A number between 0 and 999, representing the milliseconds.
     * @return {?} The number of milliseconds between 1 January 1970 00:00:00 UTC and the updated date.
     */
    setMinutes(min, sec, ms) {
        this._gDate.setMinutes(min);
        if (sec !== undefined) {
            this.setSeconds(sec);
        }
        if (ms !== undefined) {
            this.setMilliseconds(ms);
        }
        return this.getTime();
    }
    /**
     * Sets the month for a specified date according to the currently set year.
     * @param {?} month An integer between 0 and 11, representing the months Farvardin through Esfand.
     * @param {?=} date An integer from 1 to 31, representing the day of the month.
     * @return {?} The number of milliseconds between 1 January 1970 00:00:00 UTC and the updated date.
     */
    setMonth(month, date) {
        this.jMonth = month;
        if (date !== undefined) {
            this.jDay = date;
        }
        return this.getTime();
    }
    /**
     * Sets the seconds for a specified date according to local time.
     * @param {?} sec An integer between 0 and 59, representing the seconds.
     * @param {?=} ms A number between 0 and 999, representing the milliseconds.
     * @return {?} The number of milliseconds between 1 January 1970 00:00:00 UTC and the updated date.
     */
    setSeconds(sec, ms) {
        this._gDate.setSeconds(sec);
        if (ms !== undefined) {
            this.setMilliseconds(ms);
        }
        return this.getTime();
    }
    /**
     * Sets the JDate object to the time represented by a number of milliseconds since January 1, 1970, 00:00:00 UTC.
     * @param {?} time sets the Date object to the time represented by a number of milliseconds since January 1, 1970, 00:00:00 UTC.
     * @return {?} The number of milliseconds between 1 January 1970 00:00:00 UTC and the updated date.
     */
    setTime(time) {
        this._createFromDate(new Date(time));
        return time;
    }
    /**
     * sets the day of the month for a specified date according to universal time.
     * Then recreate the JDate object from new Georgian object.
     * \@todo add implementation
     * @param {?} date An integer from 1 to 31, representing the day of the month.
     * @return {?} The number of milliseconds between 1 January 1970 00:00:00 UTC and the updated date.
     */
    setUTCDate(date) {
        this._gDate.setUTCDate(date);
        this._createFromDate(this._gDate);
        return this.getTime();
    }
    /**
     * Sets the full year for a specified date according to universal time.
     * Then recreate the JDate object from new Georgian object.
     * \@todo add implementation
     * @param {?} year  An integer specifying the numeric value of the year, for example, 1995.
     * @param {?=} month  Optional. An integer between 0 and 11 representing the months January through December.
     * @param {?=} date An integer between 1 and 31 representing the day of the month. If you specify the dayValue parameter, you must also
     * specify the monthValue.
     * @return {?}
     */
    setUTCFullYear(year, month, date) {
        this._gDate.setUTCFullYear(year, month, date);
        this._createFromDate(this._gDate);
        return this.getTime();
    }
    /**
     * Sets the hour for a specified date according to universal time, and returns the number of milliseconds since
     * January 1, 1970 00:00:00 UTC until the time represented by the updated Date instance.
     * Then recreate the JDate object from new Georgian object.
     * \@todo add implementation
     * @param {?} hours  An integer between 0 and 23, representing the hour.
     * @param {?=} min Optional. An integer between 0 and 59, representing the minutes.
     * @param {?=} sec Optional. An integer between 0 and 59, representing the seconds. If you specify the secondsValue parameter,
     *        you must also specify the minutesValue.
     * @param {?=} ms Optional. A number between 0 and 999, representing the milliseconds. If you specify the msValue parameter,
     *        you must also specify the minutesValue and secondsValue.
     * @return {?} The number of milliseconds between January 1, 1970 00:00:00 UTC and the updated date.
     */
    setUTCHours(hours, min, sec, ms) {
        this._gDate.setUTCHours(hours, min, sec, ms);
        this._createFromDate(this._gDate);
        return this.getTime();
    }
    /**
     * Sets the milliseconds for a specified date according to universal time.
     *
     * Then recreate the JDate object from new Georgian object.
     * \@todo add implementation
     * @param {?} ms A number between 0 and 999, representing the milliseconds.
     * @return {?} The number of milliseconds between 1 January 1970 00:00:00 UTC and the updated date.
     */
    setUTCMilliseconds(ms) {
        this._gDate.setUTCMilliseconds(ms);
        this._createFromDate(this._gDate);
        return this.getTime();
    }
    /**
     * Sets the minutes for a specified date according to universal time.
     *
     * Then recreate the JDate object from new Georgian object.
     * \@todo add implementation
     * @param {?} min An integer between 0 and 59, representing the minutes.
     * @param {?=} sec Optional. An integer between 0 and 59, representing the seconds. If you specify the secondsValue parameter,
     *        you must also specify the minutesValue.
     * @param {?=} ms Optional. A number between 0 and 999, representing the milliseconds. If you specify the msValue parameter,
     *        you must also specify the minutesValue and secondsValue.
     * @return {?} The number of milliseconds between 1 January 1970 00:00:00 UTC and the updated date.
     */
    setUTCMinutes(min, sec, ms) {
        this._gDate.setUTCMinutes(min, sec, ms);
        this._createFromDate(this._gDate);
        return this.getTime();
    }
    /**
     * Sets the month for a specified date according to universal time.
     *
     * Then recreate the JDate object from new Georgian object.
     * \@todo add implementation
     * @param {?} month An integer between 0 and 11, representing the months January through December.
     * @param {?=} date Optional. An integer from 1 to 31, representing the day of the month.
     * @return {?} The number of milliseconds between 1 January 1970 00:00:00 UTC and the updated date.
     */
    setUTCMonth(month, date) {
        this._gDate.setUTCMonth(month, date);
        this._createFromDate(this._gDate);
        return this.getTime();
    }
    /**
     * Sets the seconds for a specified date according to universal time.
     *
     * Then recreate the JDate object from new Georgian object.
     * \@todo add implementation
     * @param {?} sec An integer between 0 and 59, representing the seconds.
     * @param {?=} ms Optional. A number between 0 and 999, representing the milliseconds.
     * @return {?}
     */
    setUTCSeconds(sec, ms) {
        this._gDate.setUTCSeconds(sec, ms);
        this._createFromDate(this._gDate);
        return this.getTime();
    }
    /**
     * \@example دوشنبه
     * @return {?} name of the day of the week in persian.
     */
    getNameOfTheDay() {
        return JDate.DAYS_OF_WEEK[this.getDay()];
    }
    /**
     * \@example مهر
     * @return {?} name of the month in persian.
     */
    getNameOfTheMonth() {
        return JDate.FA_MONTHS[this.getMonth()];
    }
    /**
     * returns the date portion of a Date object in human readable form in Persian.
     * \@example پنج‌شنبه اسفند 30 1375
     * @return {?} a string following this pattern: "nameOfTheDay nameOfTheMonth dayNumber fullYear".
     */
    toDateString() {
        return `${this.getNameOfTheDay()} ${this.getNameOfTheMonth()} ${this.getDate()} ${this.getFullYear()}`;
    }
    /**
     * Returns time marker of object time. all hour numbers lesser than 12 are before noon and all greater than 12 are after noon.
     * @param {?=} shortVersion controls output. if be true, output will be in short format like: ب.ظ if be false, output will be in complete format like: بعد از ظهر
     * @return {?} time marker for showing if time is before noon or after it
     */
    getTimeMarker(shortVersion = false) {
        if (this.getHours() < 12) {
            return shortVersion ? JDate.SHORT_BEFORE_NOON : JDate.COMPLETE_BEFORE_NOON;
        }
        return shortVersion ? JDate.SHORT_AFTER_NOON : JDate.COMPLETE_AFTER_NOON;
    }
    /**
     * Replace patterns of date formatting with corresponding strings from JDate object values.
     * In bi-character pattern parts, missed digits will fill with zero.
     * @private
     * @param {?} pattern a pattern string with replaceable parts:
     *
     *        yyyy -> Year number in 4-digit representation. ex: 1397
     *
     *        yy -> Year number in 2-digit representation. ex: 97
     *
     *        mmmm -> Name of the month in English representation. ex: Esfand
     *
     *        mmm -> Name of the month in Persian representation. ex: اسفند
     *
     *        mm -> 2-digit number of the month starting from 1
     *
     *        m -> non zero-padding number of the month starting from 1
     *
     *        dddd -> Name of the day in the week in English representation. ex: Shanbe
     *
     *        ddd -> Name of the day in the week id Persian representation. ex: شنبه
     *
     *        dd -> 2-digit number of the day in the month starting from 1
     *
     *        d -> non zero-padding number of the day in the month starting from 1
     *
     * @return {?} A formatted string that all Date pattern parts has been replaced. Other characters of the pattern will left unchanged.
     */
    _format_date(pattern) {
        return pattern.replace(/yyyy/g, JDate.zeroPadding(this.getFullYear(), 4))
            .replace(/\byy\b/g, (this.getFullYear() % 100).toString())
            .replace(/\bmmmm\b/g, JDate.EN_MONTHS[this.getMonth()])
            .replace(/\bmmm\b/g, JDate.FA_MONTHS[this.getMonth()])
            .replace(/\bmm\b/g, JDate.zeroPadding(this.getMonth() + 1, 2))
            .replace(/\bm\b/g, (this.getMonth() + 1).toString())
            .replace(/\bdddd\b/g, JDate.EN_DAYS_OF_WEEK[this.getDay()])
            .replace(/\bddd\b/g, JDate.DAYS_OF_WEEK[this.getDay()])
            .replace(/\bdd\b/g, JDate.zeroPadding(this.getDate(), 2))
            .replace(/\bd\b/g, this.getDate().toString());
    }
    /**
     * Replace patterns of time formatting with corresponding strings from JDate object values.
     *
     * In bi-character pattern parts, missed digits will fill with zero.
     * @private
     * @param {?} pattern a pattern string with replaceable parts:
     *
     *        HH -> 2-digit form of hour number in 24-hour clock format.
     *
     *        H -> non zero-padding form of hour number in 24-hour clock format.
     *
     *        hh -> 2-digit form of hour number in 12-hour clock format.
     *
     *        h -> non zero-padding form of hour number in 12-hour clock format.
     *
     *        H -> non zero-padding form of hour number in 12-hour clock format.
     *
     *        MM -> 2-digit form of minutes number.
     *
     *        M -> non zero-padding form of minutes number
     *
     *        SS -> 2-digit form of seconds number.
     *
     *        S -> non zero-padding form of seconds number.
     *
     *        l -> number of milliseconds
     *
     *        T -> Time marker in full format like: قبل از ظهر
     *
     *        t -> Time marker in short format like: ق.ظ
     * @return {?}
     */
    _format_time(pattern) {
        return pattern.replace(/\bHH\b/g, JDate.zeroPadding(this.getHours(), 2))
            .replace(/\bH\b/g, this.getHours().toString())
            .replace(/\bhh\b/g, JDate.zeroPadding(this.getHours12hourClock(), 2))
            .replace(/\bh\b/g, this.getHours12hourClock().toString())
            .replace(/\bMM\b/g, JDate.zeroPadding(this.getMinutes(), 2))
            .replace(/\bM\b/g, this.getMinutes().toString())
            .replace(/\bSS\b/g, JDate.zeroPadding(this.getSeconds(), 2))
            .replace(/\bS\b/g, this.getSeconds().toString())
            .replace(/\bl\b/g, this.getMilliseconds().toString())
            .replace(/\bT\b/g, this.getTimeMarker(false))
            .replace(/\bt\b/g, this.getTimeMarker(true));
    }
    /**
     * This method format date and time stored in the JDate object according to the entered pattern.
     *
     * Only masks will replace and all other characters will be unchanged after formatting.
     *
     * You can use masks several times in a pattern but be careful because if some of masks written immediately, they create new masks with
     * different meaning. It's better to always have some splitter characters between different masks.
     * @param {?} pattern a string containing zero or more formatting mask.
     *
     * Masks:
     *
     *        yyyy -> Year number in 4-digit representation. Leading zero for years lesser than 1000 ex: 1397
     *
     *        yy -> Year number in 2-digit representation without Leading zeros. ex: 97
     *
     *        mmmm -> Name of the month in English representation. ex: Esfand
     *
     *        mmm -> Name of the month in Persian representation. ex: اسفند
     *
     *        mm -> 2-digit number of the month starting from 1. Leading zero for single-digit months.
     *
     *        m -> number of the month starting from 1 without Leading zeros.
     *
     *        dddd -> Name of the day in the week in English representation. ex: Shanbe
     *
     *        ddd -> Name of the day in the week id Persian representation. ex: شنبه
     *
     *        dd -> 2-digit number of the day in the month starting from 1. Leading zero for single-digit days.
     *
     *        d -> number of the day in the month starting from 1 without Leading zeros.
     *
     *        HH -> 2-digit form of hour number in 24-hour clock format. Leading zero for single-digit hours.
     *
     *        H -> non zero-padding form of hour number in 24-hour clock format without Leading zeros.
     *
     *        hh -> 2-digit form of hour number in 12-hour clock format. Leading zero for single-digit hours.
     *
     *        H -> non zero-padding form of hour number in 12-hour clock format without Leading zeros.
     *
     *        MM -> 2-digit form of minutes number. Leading zero for single-digit minutes.
     *
     *        M -> non zero-padding form of minutes number without Leading zeros.
     *
     *        SS -> 2-digit form of seconds number. Leading zero for single-digit seconds.
     *
     *        S -> non zero-padding form of seconds number without Leading zeros.
     *
     *        l -> number of milliseconds without Leading zeros.
     *
     *        T -> Time marker in full format like: قبل از ظهر
     *
     *        t -> Time marker in short format like: ق.ظ
     * @return {?} formatted dateTime string.
     */
    format(pattern) {
        return this._format_time(this._format_date(pattern));
    }
    /**
     * @return {?} a string in simplified extended ISO format (ISO 8601), which is always 24 or 27 characters long (yyyy-mm-ddTHH:MM:SS.lZ).
     *        Be careful because that T in the middle of the pattern is not a format Mask and is a simple character.
     */
    toISOString() {
        return this.format('yyyy-mm-dd') + 'T' + this.format('HH:MM:SS.l') + 'Z';
    }
    /**
     * @param {?=} key
     * @return {?} a string representation of the Date object.
     * [see toString method]{\@link toString}
     */
    toJSON(key) {
        return this.toString();
    }
    /**
     * returns formatted date with following pattern: 'ddd mmm d yyyy HH:MM:SS'
     * @return {?}
     */
    toString() {
        return this.format('ddd mmm d yyyy HH:MM:SS');
    }
    /**
     * @param {?=} locales
     * @param {?=} options
     * @return {?}
     */
    toLocaleDateString(locales, options) {
        return this._gDate.toLocaleDateString(locales, options);
    }
    /**
     * @param {?=} locales
     * @param {?=} options
     * @return {?}
     */
    toLocaleTimeString(locales, options) {
        return this._gDate.toLocaleTimeString(locales, options);
    }
    /**
     * @return {?} toTimeString of Georgian date
     *
     * [For more information see javascript Date object documentation about this method]{\@link https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Date/toTimeString}
     */
    toTimeString() {
        return this._gDate.toTimeString();
    }
    /**
     * \@todo add implementation
     * @return {?} toUTCString of Georgian date.
     *
     * [For more information see javascript Date object documentation about this method]{\@link https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Date/toUTCString}
     */
    toUTCString() {
        return this._gDate.toUTCString();
    }
    /**
     * Similar to the getTime method.
     *
     * [For more information also see getTime method]{\@link getTime}
     * @return {?}
     */
    valueOf() {
        return this.getTime();
    }
    /**
     * @param {?} incValue
     * @return {?}
     */
    addMonth(incValue) {
        // let newMonth: number = (this.getMonth() + incValue) % 11;
        // let passedYears: number = this.getFullYear() + newMonth / 11;
        // let newYear: number = newMonth === 0 ? ;
        // this.setFullYear(newYear);
        // this.setMonth(newMonth % 11);
    }
}
JDate.EN_MONTHS = ['Farvardin', 'Ordibehesht', 'Khordad', 'Tir', 'Mordad', 'Shahrivar', 'Mehr', 'Aban', 'Azar', 'Dey', 'Behman', 'Esfand'];
JDate.FA_MONTHS = ['فروردین', 'اردیبهشت', 'خرداد', 'تیر', 'مرداد', 'شهریور', 'مهر', 'آبان', 'آذر', 'دی', 'بهمن', 'اسفند'];
JDate.DAYS_OF_WEEK = ['جمعه', 'شنبه', 'یکشنبه', 'دوشنبه', 'سه‌شنبه', 'چهارشنبه', 'پنج‌شنبه'];
JDate.EN_DAYS_OF_WEEK = ['Jom\'e', 'Shanbe', 'Yekshanbe', 'Doshanbe', 'Seshanbe', 'Cheharshanbe', 'Panjshanbe'];
JDate.COMPLETE_BEFORE_NOON = 'قبل از ظهر';
JDate.COMPLETE_AFTER_NOON = 'بعد از ظهر';
JDate.SHORT_BEFORE_NOON = 'ق.ظ';
JDate.SHORT_AFTER_NOON = 'ب.ظ';
if (false) {
    /**
     * @type {?}
     * @private
     */
    JDate.EN_MONTHS;
    /**
     * @type {?}
     * @private
     */
    JDate.FA_MONTHS;
    /**
     * @type {?}
     * @private
     */
    JDate.DAYS_OF_WEEK;
    /**
     * @type {?}
     * @private
     */
    JDate.EN_DAYS_OF_WEEK;
    /**
     * @type {?}
     * @private
     */
    JDate.COMPLETE_BEFORE_NOON;
    /**
     * @type {?}
     * @private
     */
    JDate.COMPLETE_AFTER_NOON;
    /**
     * @type {?}
     * @private
     */
    JDate.SHORT_BEFORE_NOON;
    /**
     * @type {?}
     * @private
     */
    JDate.SHORT_AFTER_NOON;
    /**
     * @type {?}
     * @private
     */
    JDate.prototype._gDate;
    /**
     * @type {?}
     * @private
     */
    JDate.prototype._jYear;
    /**
     * @type {?}
     * @private
     */
    JDate.prototype._jMonth;
    /**
     * @type {?}
     * @private
     */
    JDate.prototype._jDay;
    /**
     * @type {?}
     * @private
     */
    JDate.prototype._calculator;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiamRhdGUuanMiLCJzb3VyY2VSb290Ijoibmc6Ly9uZ3gtcGVyc2lhbi8iLCJzb3VyY2VzIjpbImxpYi9KRGF0ZS9qZGF0ZS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7O0FBQUEsT0FBTyxFQUFDLDJCQUEyQixFQUFDLE1BQU0sa0NBQWtDLENBQUM7QUFDN0UsT0FBTyxFQUFDLHNCQUFzQixFQUFDLE1BQU0sMkJBQTJCLENBQUM7QUFDakUsT0FBTyxFQUFDLDBCQUEwQixFQUFDLE1BQU0saUNBQWlDLENBQUM7Ozs7Ozs7Ozs7OztBQWEzRSxNQUFNLE9BQU8sS0FBSzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7SUE4RmhCLFlBQVksS0FBOEIsRUFBRSxNQUFlLEVBQUUsSUFBYSxFQUFFLFFBQWdCLENBQUMsRUFBRSxVQUFrQixDQUFDLEVBQ3RHLFVBQWtCLENBQUMsRUFBRSxlQUF1QixDQUFDO1FBaEZqRCxnQkFBVyxHQUFnQyxJQUFJLDJCQUEyQixDQUFDLElBQUksMEJBQTBCLEVBQUUsQ0FBQyxDQUFDO1FBaUZuSCxJQUFJLENBQUMsS0FBSyxFQUFFO1lBQ1YsSUFBSSxDQUFDLGVBQWUsQ0FBQyxJQUFJLElBQUksRUFBRSxDQUFDLENBQUM7U0FDbEM7YUFBTSxJQUFJLE9BQU8sS0FBSyxLQUFLLFFBQVEsSUFBSSxNQUFNLEtBQUssU0FBUyxFQUFFO1lBQzVELElBQUksQ0FBQyxlQUFlLENBQUMsSUFBSSxJQUFJLENBQUMsS0FBSyxDQUFDLEtBQUssQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUM7U0FDcEQ7YUFBTSxJQUFJLE9BQU8sS0FBSyxLQUFLLFFBQVEsSUFBSSxNQUFNLEtBQUssU0FBUyxFQUFFO1lBQzVELElBQUksQ0FBQyxlQUFlLENBQUMsSUFBSSxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQztTQUN2QzthQUFNLElBQUksS0FBSyxZQUFZLElBQUksSUFBSSxNQUFNLEtBQUssU0FBUyxFQUFFO1lBQ3hELElBQUksQ0FB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QUUsUUFBUSxDQUFDLENBQUM7QUFDckksZUFBUyxHQUFHLENBQUMsU0FBUyxFQUFFLFVBQVUsRUFBRSxPQUFPLEVBQUUsS0FBSyxFQUFFLE9BQU8sRUFBRSxRQUFRLEVBQUUsS0FBSyxFQUFFLE1BQU0sRUFBRSxLQUFLLEVBQUUsSUFBSSxFQUFFLE1BQU0sRUFBRSxPQUFPLENBQUMsQ0FBQztBQUNwSCxrQkFBWSxHQUFHLENBQUMsTUFBTSxFQUFFLE1BQU0sRUFBRSxRQUFRLEVBQUUsUUFBUSxFQUFFLFNBQVMsRUFBRSxVQUFVLEVBQUUsVUFBVSxDQUFDLENBQUM7QUFDdkYscUJBQWUsR0FBRyxDQUFDLFFBQVEsRUFBRSxRQUFRLEVBQUUsV0FBVyxFQUFFLFVBQVUsRUFBRSxVQUFVLEVBQUUsY0FBYyxFQUFFLFlBQVksQ0FBQyxDQUFDO0FBQzFHLDBCQUFvQixHQUFHLFlBQVksQ0FBQztBQUNwQyx5QkFBbUIsR0FBRyxZQUFZLENBQUM7QUFDbkMsdUJBQWlCLEdBQUcsS0FBSyxDQUFDO0FBQzFCLHNCQUFnQixHQUFHLEtBQUssQ0FBQzs7Ozs7O0lBUHhDLGdCQUFvSjs7Ozs7SUFDcEosZ0JBQW1JOzs7OztJQUNuSSxtQkFBc0c7Ozs7O0lBQ3RHLHNCQUF5SDs7Ozs7SUFDekgsMkJBQW1EOzs7OztJQUNuRCwwQkFBa0Q7Ozs7O0lBQ2xELHdCQUF5Qzs7Ozs7SUFDekMsdUJBQXdDOzs7OztJQUV4Qyx1QkFBcUI7Ozs7O0lBQ3JCLHVCQUF1Qjs7Ozs7SUFDdkIsd0JBQXdCOzs7OztJQUN4QixzQkFBc0I7Ozs7O0lBQ3RCLDRCQUFxSCIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7SmFsYWxpRGF0ZUNhbGN1bGF0b3JTZXJ2aWNlfSBmcm9tICcuL2phbGFsaS1kYXRlLWNhbGN1bGF0b3Iuc2VydmljZSc7XG5pbXBvcnQge0ludmFsaWRKYWxhbGlEYXRlRXJyb3J9IGZyb20gJy4vSW52YWxpZEphbGFsaURhdGUuZXJyb3InO1xuaW1wb3J0IHtKYWxhbGlEYXRlVmFsaWRhdG9yU2VydmljZX0gZnJvbSAnLi9qYWxhbGktZGF0ZS12YWxpZGF0b3Iuc2VydmljZSc7XG5cbi8qKlxuICogVGhpcyBjbGFzcyByZXByZXNlbnRzIGEgY29tcGxldGUgRGF0ZSBvYmplY3QgZm9yIEphbGFsaSBkYXRlcy4gSXQgYWNjZXB0cyBqYWxhbGkgRGF0ZXMsIGNvbnZlcnRzIEdlb3JnaWFuIGRhdGVzIHRvIGphbGFsaSBhbmQgaW1wbGVtZW50c1xuICogYWxsIHRoZSBiZWhhdmlvdXJzIG9mIGRlZmF1bHQgRGF0ZSBvYmplY3Qgb2YgSmF2YVNjcmlwdCBmb3IgSmFsYWxpIERhdGUsIHBsdXMgc29tZSBhZGRpdGlvbmFsIG1ldGhvZHMgZm9yIGRldmVsb3BlcnMgY29udmVuaWVuY2UuXG4gKlxuICogQVRURU5USU9OOlxuICpcbiAqIFVUQyBtZXRob2RzIGFyZSBub3QgaW1wbGVtZW50ZWQgZm9yIEphbGFsaSBkYXRlLiBUaGV5IHdvcmtpbmcgZGlyZWN0bHkgb24gZ0RhdGUgb2JqZWN0IChDb3JyZXNwb25kaW5nIGRhdGUgaW4gR2VvcmdpYW4pIGFuZCBjaGFuZ2luZ1xuICogcHJvcGVydGllcyBvZiB0aGlzLiBUaGVuIG5ldyBKRGF0ZSBvYmplY3Qgd2lsbCBjcmVhdGUgZnJvbSB0aGUgbW9kaWZpZWQgR2VvcmdpYW4gRGF0ZS4gU28gdGhleSBtYXkgQ2F1c2UgdW5wcmVkaWN0YWJsZSBiZWhhdmlvdXIuXG4gKiBQbGVhc2UgZG9uJ3QgdXNlIFVUQyBtZXRob2RzIHdpdGggXCJ0b2RvXCIgdGFnIG9uIHRoZW0gdW5sZXNzIHlvdSBhcmUgc3VyZSBhYm91dCB0aGUgYmVoYXZpb3VyLlxuICogUmVjcmVhdGluZyBvYmplY3RzIGFyZSBzYWZlciB0aGFuIHdvcmtpbmcgd2l0aCBVVEMgbWV0aG9kcy5cbiAqL1xuZXhwb3J0IGNsYXNzIEpEYXRlIGltcGxlbWVudHMgRGF0ZXtcblxuICBwcml2YXRlIHN0YXRpYyBFTl9NT05USFMgPSBbJ0ZhcnZhcmRpbicsICdPcmRpYmVoZXNodCcsICdLaG9yZGFkJywgJ1RpcicsICdNb3JkYWQnLCAnU2hhaHJpdmFyJywgJ01laHInLCAnQWJhbicsICdBemFyJywgJ0RleScsICdCZWhtYW4nLCAnRXNmYW5kJ107XG4gIHByaXZhdGUgc3RhdGljIEZBX01PTlRIUyA9IFsn2YHYsdmI2LHYr9uM2YYnLCAn2KfYsdiv24zYqNmH2LTYqicsICfYrtix2K/Yp9ivJywgJ9iq24zYsScsICfZhdix2K/Yp9ivJywgJ9i02YfYsduM2YjYsScsICfZhdmH2LEnLCAn2KLYqNin2YYnLCAn2KLYsNixJywgJ9iv24wnLCAn2KjZh9mF2YYnLCAn2KfYs9mB2YbYryddO1xuICBwcml2YXRlIHN0YXRpYyBEQVlTX09GX1dFRUsgPSBbJ9is2YXYudmHJywgJ9i02YbYqNmHJywgJ9uM2qnYtNmG2KjZhycsICfYr9mI2LTZhtio2YcnLCAn2LPZh+KAjNi02YbYqNmHJywgJ9qG2YfYp9ix2LTZhtio2YcnLCAn2b7Zhtis4oCM2LTZhtio2YcnXTtcbiAgcHJpdmF0ZSBzdGF0aWMgRU5fREFZU19PRl9XRUVLID0gWydKb21cXCdlJywgJ1NoYW5iZScsICdZZWtzaGFuYmUnLCAnRG9zaGFuYmUnLCAnU2VzaGFuYmUnLCAnQ2hlaGFyc2hhbmJlJywgJ1BhbmpzaGFuYmUnXTtcbiAgcHJpdmF0ZSBzdGF0aWMgQ09NUExFVEVfQkVGT1JFX05PT04gPSAn2YLYqNmEINin2LIg2LjZh9ixJztcbiAgcHJpdmF0ZSBzdGF0aWMgQ09NUExFVEVfQUZURVJfTk9PTiA9ICfYqNi52K8g2KfYsiDYuNmH2LEnO1xuICBwcml2YXRlIHN0YXRpYyBTSE9SVF9CRUZPUkVfTk9PTiA9ICfZgi7YuCc7XG4gIHByaXZhdGUgc3RhdGljIFNIT1JUX0FGVEVSX05PT04gPSAn2Kgu2LgnO1xuXG4gIHByaXZhdGUgX2dEYXRlOiBEYXRlO1xuICBwcml2YXRlIF9qWWVhcjogbnVtYmVyO1xuICBwcml2YXRlIF9qTW9udGg6IG51bWJlcjtcbiAgcHJpdmF0ZSBfakRheTogbnVtYmVyO1xuICBwcml2YXRlIF9jYWxjdWxhdG9yOiBKYWxhbGlEYXRlQ2FsY3VsYXRvclNlcnZpY2UgPSBuZXcgSmFsYWxpRGF0ZUNhbGN1bGF0b3JTZXJ2aWNlKG5ldyBKYWxhbGlEYXRlVmFsaWRhdG9yU2VydmljZSgpKTtcblxuICAvKipcbiAgICogSWYgaW5wdXQgdmFsdWUgbGVuZ3RoIGlzIHNob3J0ZXIgdGhhbiBkZXNpcmVkTGVuZ3RoLCBhZGRzIHplcm9zIGF0IHRoZSBiZWdpbm5pbmcgb2YgaXQgdW50aWwgbWVldHMgZGVzaXJlZCBsZW5ndGguXG4gICAqIEBwYXJhbSB2YWx1ZSBhIG51bWJlciBvciBzdHJpbmcgdGhhdCB3ZSB3YW50IGhhdmUgYSBzcGVjaWZpYyBsZW5ndGhcbiAgICogQHBhcmFtIGRlc2lyZWRMZW5ndGggbGVuZ3RoIG9mIG91dHB1dCBzdHJpbmcuIElmIGJlIHNob3J0ZXIgdGhhbiBpbnB1dCBsZW5ndGgsIGlucHV0IHdpbGwgcmV0dXJuLlxuICAgKi9cbiAgcHVibGljIHN0YXRpYyB6ZXJvUGFkZGluZyh2YWx1ZTogbnVtYmVyIHwgc3RyaW5nLCBkZXNpcmVkTGVuZ3RoOiBudW1iZXIpOiBzdHJpbmcge1xuICAgIHZhbHVlID0gdmFsdWUudG9TdHJpbmcoKTtcbiAgICB3aGlsZSAodmFsdWUubGVuZ3RoIDwgZGVzaXJlZExlbmd0aCkge1xuICAgICAgdmFsdWUgPSAnMCcgKyB2YWx1ZTtcbiAgICB9XG4gICAgcmV0dXJuIHZhbHVlO1xuICB9XG5cbiAgLyoqXG4gICAqIEV4dHJhY3RzIEdlb3JnaWFuIERhdGUgb2JqZWN0IGZyb20gYSBKYWxhbGkgZGF0ZSBzdHJpbmcuXG4gICAqIEBwYXJhbSBkYXRlU3RyaW5nIGEgSmFsYWxpIGRhdGUgc3RyaW5nIGZvbGxvd2luZyB0aGlzIHBhdHRlcm46XG4gICAqXG4gICAqICAgICAgICBcInl5eXkgbW1tIGRkIEhIOk1NOlNTXCJcbiAgICogICAgICAgIG9yIHRoaXMgcGF0dGVybjpcbiAgICpcbiAgICogICAgICAgIFwieXl5eSBtbW1tIGRkIEhIOk1NOlNTXCIuXG4gICAqIEBleGFtcGxlIDExINiv24wgMTM0OCAwMDowMDowMFxuICAgKiBAZXhhbXBsZSAxMSBEZXkgMTM0OCAwMDowMDowMFxuICAgKiBAcmV0dXJuIGEgR2VvcmdpYW4gRGF0ZSBvYmplY3QuXG4gICAqL1xuICBwdWJsaWMgc3RhdGljIHBhcnNlKGRhdGVTdHJpbmc6IHN0cmluZyk6IG51bWJlciB7XG4gICAgY29uc3QgY2FsY3VsYXRvciA9IG5ldyBKYWxhbGlEYXRlQ2FsY3VsYXRvclNlcnZpY2UobmV3IEphbGFsaURhdGVWYWxpZGF0b3JTZXJ2aWNlKCkpO1xuICAgIGNvbnN0IGRhdGVBcnJheSA9IGRhdGVTdHJpbmcuc3BsaXQoJyAnKTtcbiAgICBpZiAoZGF0ZUFycmF5Lmxlbmd0aCA8IDMpIHsgdGhyb3cgbmV3IEludmFsaWRKYWxhbGlEYXRlRXJyb3IoKTsgfVxuICAgIGNvbnN0IGRheSA9IHBhcnNlSW50KGRhdGVBcnJheVswXSk7XG4gICAgbGV0IG1vbnRoID0gSkRhdGUuRkFfTU9OVEhTLmluZGV4T2YoZGF0ZUFycmF5WzFdKTtcbiAgICBpZiAobW9udGggPT09IC0xKSB7IG1vbnRoID0gSkRhdGUuRU5fTU9OVEhTLmluZGV4T2YoZGF0ZUFycmF5WzFdKTsgfVxuICAgIGlmIChtb250aCA9PT0gLTEpIHsgdGhyb3cgbmV3IEludmFsaWRKYWxhbGlEYXRlRXJyb3IoKTsgfVxuICAgIGNvbnN0IHllYXIgPSBwYXJzZUludChkYXRlQXJyYXlbMl0pO1xuICAgIGNvbnN0IHRpbWVBcnJheSA9IGRhdGVBcnJheS5sZW5ndGggPiAzID8gZGF0ZUFycmF5WzNdLnNwbGl0KCc6JykgOiBbJzAnLCAnMCcsICcwJ107XG4gICAgY29uc3QgaG91ciA9IHBhcnNlSW50KHRpbWVBcnJheVswXSk7XG4gICAgY29uc3QgbWluID0gcGFyc2VJbnQodGltZUFycmF5WzFdKTtcbiAgICBjb25zdCBzZWMgPSBwYXJzZUludCh0aW1lQXJyYXlbMl0pO1xuICAgIGNvbnN0IGdEYXRlID0gY2FsY3VsYXRvci5jb252ZXJ0VG9HZW9yZ2lhbih5ZWFyLCBtb250aCwgZGF5KTtcbiAgICBnRGF0ZS5zZXRIb3Vycyhob3VyLCBtaW4sIHNlYyk7XG4gICAgcmV0dXJuIGdEYXRlLmdldFRpbWUoKTtcbiAgfVxuXG5cbiAgLyoqXG4gICAqIEZvciBjcmVhdGluZyBhIEpEYXRlIG9iamVjdCwgeW91IGhhdmUgNSBkaWZmZXJlbnQgb3B0aW9ucy5cbiAgICpcbiAgICogMS0gSWYgeW91IHdhbnQgdG8gaGF2ZSBjdXJyZW50IGRhdGUgYW5kIHRpbWUsIHlvdSBjYW4gc2ltcGx5IGNhbGwgbmV3IEpEYXRlKCkgd2l0aG91dCBhbnkgcGFyYW1ldGVyLlxuICAgKlxuICAgKiAyLSBJZiB5b3Ugd2FudCB0byBjcmVhdGUgSkRhdGUgb2JqZWN0IGZyb20gYSBqYWxhbGkgZGF0ZSBzdHJpbmcgYXMgZGVzY3JpYmVkIGluIHRoZSBgcGFyc2AgbWV0aG9kIGRvY3VtZW50LCB5b3UgY2FuIHBhc3MgdGhhdCBzdHJpbmcgYXNcbiAgICogICAgZmlyc3QgcGFyYW1ldGVyIGFuZCBsZWF2ZSBvdGhlcnMgZW1wdHkuXG4gICAqXG4gICAqIDMgLSBJZiB5b3Ugd2FudCB0byBjcmVhdGUgSkRhdGUgb2JqZWN0IGZyb20gbnVtYmVyIG9mIHBhc3NlZCBtaWxsaXNlY29uZHMgZnJvbSBVTklYIGVwb2NoIChmb3IgZXhhbXBsZSBjcmVhdGluZyBhIEphbGFsaSBkYXRlIG9iamVjdFxuICAgKiAgICAgZnJvbSByZXN1bHQgb2YgZ2V0VGltZSBtZXRob2Qgb2YgYW5vdGhlciBEYXRlIG9iamVjdCksIHlvdSBjYW4gcGFzcyB0aGUgbnVtYmVyIGFzIGZpcnN0IHBhcmFtZXRlciBhbmQgbGVhdmUgb3RoZXJzIGFsb25lLlxuICAgKlxuICAgKiA0IC0gSWYgeW91IHdhbnQgdG8gY3JlYXRlIEpEYXRlIG9iamVjdCBmcm9tIGEgR2VvcmdpYW4gRGF0ZSBvYmplY3QsIHlvdSBjYW4gc2ltcGx5IHBhc3MgdGhhdCBEYXRlIG9iamVjdCBhcyBmaXJzdCBwYXJhbWV0ZXIgYW5kIGxlYXZlXG4gICAqICAgICBvdGhlcnMgZW1wdHkuXG4gICAqXG4gICAqIDUtIElmIHlvdSB3YW50IHRvIGNyZWF0ZSBKRGF0ZSBvYmplY3QgZnJvbSBkYXRlIGFuZCB0aW1lIHZhbHVlcywgeW91IGNhbiBzaW1wbHkgZmlsbCBjb3JyZXNwb25kaW5nIHBhcmFtZXRlcnMgb2YgZWFjaCBkYXRlIGFuZCB0aW1lXG4gICAqIHZhbHVlIHRvIHRoZSBjb25zdHJ1Y3Rvci4gWW91IGRvbid0IGhhdmUgdG8gZmlsbCBhbGwgb2YgdGhlIHBhcmFtZXRlcnMuIG9ubHkgdGhvc2UgeW91IG5lZWQuIG90aGVyIHBhcmFtZXRlcnMgd2lsbCBmaWxsIHdpdGggemVyby5cbiAgICogRXhhbXBsZXMgb2YgYWxsIG9mIHRob3NlIHNjZW5hcmlvczpcbiAgICpcbiAgICogQGV4YW1wbGUgbmV3IEpEYXRlKClcbiAgICogQGV4YW1wbGUgbmV3IEpEYXRlKCcxMSDYr9uMIDEzNDggMDA6MDA6MDAnKVxuICAgKiBAZXhhbXBsZSBuZXcgSkRhdGUoLTEyNjAwMDAwKVxuICAgKiBAZXhhbXBsZSBuZXcgSkRhdGUobmV3IERhdGUoMjAxOCwgMCwgMSkpXG4gICAqIEBleGFtcGxlIG5ldyBKRGF0ZSgxMzk3LCAwLCAyNSlcbiAgICogQGV4YW1wbGUgbmV3IEpEYXRlKDEzOTcsIDExLCAyNSwgMTIsIDMyLCA0NSwgMTIzKVxuICAgKiBAcGFyYW0galllYXJcbiAgICogQHBhcmFtIGpNb250aCBNb250aCBudW1iZXIgc3RhcnRpbmcgZnJvbSAwIGFuZCBzaG91bGQgYmUgTEVTU0VSIHRoYW4gMTIuXG4gICAqIEBwYXJhbSBqRGF5XG4gICAqIEBwYXJhbSBob3Vyc1xuICAgKiBAcGFyYW0gbWludXRlc1xuICAgKiBAcGFyYW0gc2Vjb25kc1xuICAgKiBAcGFyYW0gbWlsbGlzZWNvbmRzXG4gICAqIEB0aHJvd3MgSW52YWxpZEphbGFsaURhdGVFcnJvclxuICAgKi9cbiAgY29uc3RydWN0b3IoalllYXI/OiBudW1iZXIgfCBzdHJpbmcgfCBEYXRlLCBqTW9udGg/OiBudW1iZXIsIGpEYXk/OiBudW1iZXIsIGhvdXJzOiBudW1iZXIgPSAwLCBtaW51dGVzOiBudW1iZXIgPSAwLFxuICAgICAgICAgICAgICBzZWNvbmRzOiBudW1iZXIgPSAwLCBtaWxsaXNlY29uZHM6IG51bWJlciA9IDApIHtcbiAgICBpZiAoIWpZZWFyKSB7XG4gICAgICB0aGlzLl9jcmVhdGVGcm9tRGF0ZShuZXcgRGF0ZSgpKTtcbiAgICB9IGVsc2UgaWYgKHR5cGVvZiBqWWVhciA9PT0gJ3N0cmluZycgJiYgak1vbnRoID09PSB1bmRlZmluZWQpIHtcbiAgICAgIHRoaXMuX2NyZWF0ZUZyb21EYXRlKG5ldyBEYXRlKEpEYXRlLnBhcnNlKGpZZWFyKSkpO1xuICAgIH0gZWxzZSBpZiAodHlwZW9mIGpZZWFyID09PSAnbnVtYmVyJyAmJiBqTW9udGggPT09IHVuZGVmaW5lZCkge1xuICAgICAgdGhpcy5fY3JlYXRlRnJvbURhdGUobmV3IERhdGUoalllYXIpKTtcbiAgICB9IGVsc2UgaWYgKGpZZWFyIGluc3RhbmNlb2YgRGF0ZSAmJiBqTW9udGggPT09IHVuZGVmaW5lZCkge1xuICAgICAgdGhpcy5fY3JlYXRlRnJvbURhdGUoalllYXIpO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgIC8vIEB0cy1pZ25vcmVcbiAgICAgIHRoaXMuX2dEYXRlID0gdGhpcy5fY2FsY3VsYXRvci5jb252ZXJ0VG9HZW9yZ2lhbihqWWVhciwgak1vbnRoLCBqRGF5KTtcbiAgICAgIC8vIEB0cy1pZ25vcmVcbiAgICAgIHRoaXMuX2pZZWFyID0galllYXI7XG4gICAgICB0aGlzLl9qTW9udGggPSBqTW9udGg7XG4gICAgICB0aGlzLl9qRGF5ID0gakRheTtcbiAgICAgIHRoaXMuX2dEYXRlLnNldEhvdXJzKGhvdXJzLCBtaW51dGVzLCBzZWNvbmRzLCBtaWxsaXNlY29uZHMpO1xuICAgIH1cbiAgICB0aGlzLl9jaGVja19kYXRlX3ZhbGlkaXR5KCk7XG4gIH1cblxuICAvKipcbiAgICogVGhpcyBtZXRob2QgcmVjYWxjdWxhdGVzIHRoZSBnRGF0ZSB2YWx1ZSB3aXRoIHByaXZhdGUgYXR0cmlidXRlcyB0aG9zZSBzdG9yaW5nIEphbGFsaSBkYXRlIHBhcnRzLlxuICAgKi9cbiAgcHJpdmF0ZSBfcmVuZXdHRGF0ZSgpOiB2b2lkIHtcbiAgICB0aGlzLl9nRGF0ZSA9IHRoaXMuX2NhbGN1bGF0b3IuY29udmVydFRvR2VvcmdpYW4odGhpcy5falllYXIsIHRoaXMuX2pNb250aCwgdGhpcy5fakRheSk7XG4gIH1cblxuICAvKipcbiAgICogU2V0cyBKYWxhbGkgeWVhciB2YWx1ZSB0byB0aGUgaW5wdXQgcGFyYW1ldGVyIGFuZCByZWNhbGN1bGF0ZXMgZ0RhdGUgYXR0cmlidXRlLlxuICAgKiBAcGFyYW0gdmFsdWUgZnVsbCBKYWxhbGkgeWVhciBsaWtlIDEzOTdcbiAgICovXG4gIHByaXZhdGUgc2V0IGpZZWFyKHZhbHVlOiBudW1iZXIpIHtcbiAgICB0aGlzLl9qWWVhciA9IHZhbHVlO1xuICAgIHRoaXMuX2NoZWNrX2RhdGVfdmFsaWRpdHkoKTtcbiAgICB0aGlzLl9yZW5ld0dEYXRlKCk7XG4gIH1cblxuICAvKipcbiAgICogU2V0cyBKYWxhbGkgbW9udGggdmFsdWUgdG8gdGhlIGlucHV0IHBhcmFtZXRlciBhbmQgcmVjYWxjdWxhdGVzIGdEYXRlIGF0dHJpYnV0ZS5cbiAgICogQHBhcmFtIHZhbHVlIG1vbnRoIG51bWJlciBzdGFydGluZyBmcm9tIHplcm9cbiAgICovXG4gIHByaXZhdGUgc2V0IGpNb250aCh2YWx1ZTogbnVtYmVyKSB7XG4gICAgdGhpcy5fak1vbnRoID0gdmFsdWU7XG4gICAgdGhpcy5fY2hlY2tfZGF0ZV92YWxpZGl0eSgpO1xuICAgIHRoaXMuX3JlbmV3R0RhdGUoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTZXRzIEphbGFsaSBkYXkgdmFsdWUgdG8gdGhlIGlucHV0IHBhcmFtZXRlciBhbmQgcmVjYWxjdWxhdGVzIGdEYXRlIGF0dHJpYnV0ZS5cbiAgICogQHBhcmFtIHZhbHVlIGRheSBudW1iZXIgc3RhcnRpbmcgZnJvbSAxLlxuICAgKi9cbiAgcHJpdmF0ZSBzZXQgakRheSh2YWx1ZTogbnVtYmVyKSB7XG4gICAgdGhpcy5fakRheSA9IHZhbHVlO1xuICAgIHRoaXMuX2NoZWNrX2RhdGVfdmFsaWRpdHkoKTtcbiAgICB0aGlzLl9yZW5ld0dEYXRlKCk7XG4gIH1cblxuICAvKipcbiAgICogdGhyb3dzIEludmFsaWRKYWxhbGlEYXRlRXJyb3Igd2hlbiBkYXRlIHZhbHVlcyBvZiB0aGlzIG9iamVjdCB3b24ndCByZXByZXNlbnQgYSB2YWxpZCBKYWxhbGkgZGF0ZS5cbiAgICogT3RoZXJ3aXNlIG5vdGhpbmcgaGFwcGVucy5cbiAgICogQHRocm93cyBJbnZhbGlkSmFsYWxpRGF0ZUVycm9yXG4gICAqL1xuICBwcml2YXRlIF9jaGVja19kYXRlX3ZhbGlkaXR5KCk6IHZvaWR7XG4gICAgaWYgKCF0aGlzLl9jYWxjdWxhdG9yLnZhbGlkYXRvci5pc1ZhbGlkSkRhdGUodGhpcy5falllYXIsIHRoaXMuX2pNb250aCwgdGhpcy5fakRheSkpIHsgdGhyb3cgbmV3IEludmFsaWRKYWxhbGlEYXRlRXJyb3IoKTsgfVxuICB9XG5cbiAgLyoqXG4gICAqIENhbGN1bGF0ZXMgSmFsYWxpIHllYXIgZnJvbSBHZW9yZ2lhbiBEYXRlIG9iamVjdCBhbmQgc2V0cyB0aGUgYXR0cmlidXRlcyBvZiB0aGUgb2JqZWN0IHRvIHByb3BlciB2YWx1ZXMuXG4gICAqIEBwYXJhbSBnRGF0ZVxuICAgKi9cbiAgcHJpdmF0ZSBfY3JlYXRlRnJvbURhdGUoZ0RhdGU6IERhdGUpIHtcbiAgICBjb25zdCBjb252ZXJzaW9uUmVzdWx0ID0gdGhpcy5fY2FsY3VsYXRvci5jb252ZXJ0VG9KYWxhbGkoZ0RhdGUpO1xuICAgIHRoaXMuX2pZZWFyID0gY29udmVyc2lvblJlc3VsdC55ZWFyO1xuICAgIHRoaXMuX2pNb250aCA9IGNvbnZlcnNpb25SZXN1bHQubW9udGg7XG4gICAgdGhpcy5fakRheSA9IGNvbnZlcnNpb25SZXN1bHQuZGF5O1xuICAgIHRoaXMuX2dEYXRlID0gZ0RhdGU7XG4gIH1cblxuICBbU3ltYm9sLnRvUHJpbWl0aXZlXShoaW50OiBcImRlZmF1bHRcIik6IHN0cmluZztcblxuICBbU3ltYm9sLnRvUHJpbWl0aXZlXShoaW50OiBcInN0cmluZ1wiKTogc3RyaW5nO1xuXG4gIFtTeW1ib2wudG9QcmltaXRpdmVdKGhpbnQ6IFwibnVtYmVyXCIpOiBudW1iZXI7XG5cbiAgW1N5bWJvbC50b1ByaW1pdGl2ZV0oaGludDogc3RyaW5nKTogc3RyaW5nIHwgbnVtYmVyO1xuXG4gIFtTeW1ib2wudG9QcmltaXRpdmVdKGhpbnQ6IFwiZGVmYXVsdFwiIHwgXCJzdHJpbmdcIiB8IFwibnVtYmVyXCIgfCBzdHJpbmcpOiBzdHJpbmcgfCBudW1iZXIge1xuICAgIHJldHVybiB1bmRlZmluZWQ7XG4gIH1cblxuICAvKipcbiAgICogQHJldHVybiBhIHJlZ3VsYXIgamF2YXNjcmlwdCBEYXRlIG9iamVjdCByZXByZXNlbnRpbmcgR2VvcmdpYW4gZGF0ZSBjb3JyZXNwb25kaW5nIHRvIHRoZSBKYWxpbGkgZGF0ZSBvZiB0aGUgSkRhdGUgb2JqZWN0LlxuICAgKi9cbiAgZ2V0R2VvcmdpYW5EYXRlKCk6IERhdGUge1xuICAgIHJldHVybiB0aGlzLl9nRGF0ZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcmV0dXJuIHRoZSBkYXkgb2YgdGhlIG1vbnRoIGZvciB0aGUgc3BlY2lmaWVkIGRhdGUgYWNjb3JkaW5nIHRvIGxvY2FsIHRpbWUuXG4gICAqL1xuICBnZXREYXRlKCk6IG51bWJlciB7XG4gICAgcmV0dXJuIHRoaXMuX2pEYXk7XG4gIH1cblxuICAvKipcbiAgICogIEByZXR1cm4gdGhlIGRheSBvZiB0aGUgd2VlayBmb3IgdGhlIHNwZWNpZmllZCBkYXRlIGFjY29yZGluZyB0byBsb2NhbCB0aW1lLCB3aGVyZSAwIHJlcHJlc2VudHMgRnJpZGF5IGFuZCA2IGlzIFRodXJzZGF5LlxuICAgKi9cbiAgZ2V0RGF5KCk6IG51bWJlciB7XG4gICAgcmV0dXJuICh0aGlzLl9nRGF0ZS5nZXREYXkoKSArIDIpICUgNztcbiAgfVxuXG4gIC8qKlxuICAgKiBAcmV0dXJuIHRoZSB5ZWFyICg0IGRpZ2l0cyBmb3IgeWVhcnMgZ3JlYXRlciB0aGFuIDk5OSkgb2YgdGhlIHNwZWNpZmllZCBkYXRlIGFjY29yZGluZyB0byBsb2NhbCB0aW1lXG4gICAqIEBleGFtcGxlIDEzOTdcbiAgICogQGV4YW1wbGUgMTAwXG4gICAqICovXG4gIGdldEZ1bGxZZWFyKCk6IG51bWJlciB7XG4gICAgcmV0dXJuIHRoaXMuX2pZZWFyO1xuICB9XG5cbiAgLyoqXG4gICAqIEByZXR1cm4gdGhlIGhvdXIgZm9yIHRoZSBzcGVjaWZpZWQgZGF0ZSwgYWNjb3JkaW5nIHRvIGxvY2FsIHRpbWUuXG4gICAqIEBleGFtcGxlIDEwXG4gICAqL1xuICBnZXRIb3VycygpOiBudW1iZXIge1xuICAgIHJldHVybiB0aGlzLl9nRGF0ZS5nZXRIb3VycygpO1xuICB9XG5cbiAgLyoqXG4gICAqIENvbnZlcnRzIGRlZmF1bHQgMjQtaG91ciBjbG9jayBob3VyIHZhbHVlIHRvIHRoZSAxMi1ob3VyIGNsb2NrIHZlcnNpb24uXG4gICAqIEByZXR1cm4gYSBudW1iZXIgYmV0d2VlbiAxIHRvIDEyXG4gICAqL1xuICBnZXRIb3VyczEyaG91ckNsb2NrKCk6IG51bWJlciB7XG4gICAgY29uc3QgcmVzdWx0ID0gdGhpcy5nZXRIb3VycygpICUgMTI7XG4gICAgcmV0dXJuIHJlc3VsdCA/IHJlc3VsdCA6IDEyO1xuICB9XG5cbiAgLyoqXG4gICAqIEByZXR1cm4gdGhlIG1pbGxpc2Vjb25kcyBpbiB0aGUgc3BlY2lmaWVkIGRhdGUgYWNjb3JkaW5nIHRvIGxvY2FsIHRpbWUuXG4gICAqL1xuICBnZXRNaWxsaXNlY29uZHMoKTogbnVtYmVyIHtcbiAgICByZXR1cm4gdGhpcy5fZ0RhdGUuZ2V0TWlsbGlzZWNvbmRzKCk7XG4gIH1cblxuICAvKipcbiAgICogQFJldHVybiB0aGUgbWludXRlcyBpbiB0aGUgc3BlY2lmaWVkIGRhdGUgYWNjb3JkaW5nIHRvIGxvY2FsIHRpbWUuXG4gICAqL1xuICBnZXRNaW51dGVzKCk6IG51bWJlciB7XG4gICAgcmV0dXJuIHRoaXMuX2dEYXRlLmdldE1pbnV0ZXMoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcmV0dXJuIHRoZSBtb250aCBpbiB0aGUgc3BlY2lmaWVkIGRhdGUgYWNjb3JkaW5nIHRvIGxvY2FsIHRpbWUsIGFzIGEgemVyby1iYXNlZCB2YWx1ZVxuICAgKiB3aGVyZSB6ZXJvIGluZGljYXRlcyB0aGUgZmlyc3QgbW9udGggb2YgdGhlIHllYXIuXG4gICAqL1xuICBnZXRNb250aCgpOiBudW1iZXIge1xuICAgIHJldHVybiB0aGlzLl9qTW9udGg7XG4gIH1cblxuICAvKipcbiAgICogQHJldHVybiB0aGUgc2Vjb25kcyBpbiB0aGUgc3BlY2lmaWVkIGRhdGUgYWNjb3JkaW5nIHRvIGxvY2FsIHRpbWUuXG4gICAqL1xuICBnZXRTZWNvbmRzKCk6IG51bWJlciB7XG4gICAgcmV0dXJuIHRoaXMuX2dEYXRlLmdldFNlY29uZHMoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBKYXZhU2NyaXB0IHVzZXMgbWlsbGlzZWNvbmRzIGFzIHRoZSB1bml0IG9mIG1lYXN1cmVtZW50LCB3aGVyZWFzIFVuaXggVGltZSBpcyBpbiBzZWNvbmRzLlxuICAgKlxuICAgKiBnZXRUaW1lKCkgYWx3YXlzIHVzZXMgVVRDIGZvciB0aW1lIHJlcHJlc2VudGF0aW9uLiBGb3IgZXhhbXBsZSwgYSBjbGllbnQgYnJvd3NlciBpbiBvbmUgdGltZXpvbmUsIGdldFRpbWUoKSB3aWxsIGJlIHRoZSBzYW1lIGFzIGFcbiAgICogY2xpZW50IGJyb3dzZXIgaW4gYW55IG90aGVyIHRpbWV6b25lLlxuICAgKlxuICAgKllvdSBjYW4gdXNlIHRoaXMgbWV0aG9kIHRvIGhlbHAgYXNzaWduIGEgZGF0ZSBhbmQgdGltZSB0byBhbm90aGVyIERhdGUgb2JqZWN0LiBUaGlzIG1ldGhvZCBpcyBmdW5jdGlvbmFsbHkgZXF1aXZhbGVudCB0byB0aGUgdmFsdWVPZigpIG1ldGhvZC5cbiAgICogQHJldHVybiB0aGUgbnVtYmVyIG9mIG1pbGxpc2Vjb25kcyBzaW5jZSB0aGUgVW5peCBFcG9jaC5cbiAgICovXG4gIGdldFRpbWUoKTogbnVtYmVyIHtcbiAgICByZXR1cm4gdGhpcy5fZ0RhdGUuZ2V0VGltZSgpO1xuICB9XG5cbiAgLyoqXG4gICAqIEF0dGVudGlvbjogTm90IGltcGxlbWVudGVkXG4gICAqIEByZXR1cm4gdGhlIHRpbWUgem9uZSBkaWZmZXJlbmNlLCBpbiBtaW51dGVzLCBmcm9tIGN1cnJlbnQgbG9jYWxlIChob3N0IHN5c3RlbSBzZXR0aW5ncykgdG8gVVRDXG4gICAqIEB0b2RvIGFkZCBpbXBsZW1lbnRhdGlvblxuICAgKi9cbiAgZ2V0VGltZXpvbmVPZmZzZXQoKTogbnVtYmVyIHtcbiAgICByZXR1cm4gdGhpcy5fZ0RhdGUuZ2V0VGltZXpvbmVPZmZzZXQoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBPdXRwdXQgaXMgbm90IGphbGFsaSBkYXkuXG4gICAqIEByZXR1cm4gZ2V0VVRDRGF0ZSBvZiB0aGUgY29ycmVzcG9uZGluZyBHZW9yZ2lhbiBkYXRlLlxuICAgKiBAdG9kbyBhZGQgaW1wbGVtZW50YXRpb25cbiAgICovXG4gIGdldFVUQ0RhdGUoKTogbnVtYmVyIHtcbiAgICByZXR1cm4gdGhpcy5fZ0RhdGUuZ2V0VVRDRGF0ZSgpO1xuICB9XG5cbiAgLyoqXG4gICAqIE91dHB1dCBpcyBub3QgamFsYWxpIGRheS5cbiAgICogQHJldHVybiBnZXRVVENEYXkgb2YgdGhlIGNvcnJlc3BvbmRpbmcgR2VvcmdpYW4gZGF0ZS5cbiAgICogQHRvZG8gYWRkIGltcGxlbWVudGF0aW9uXG4gICAqL1xuICBnZXRVVENEYXkoKTogbnVtYmVyIHtcbiAgICByZXR1cm4gdGhpcy5fZ0RhdGUuZ2V0VVRDRGF5KCk7XG4gIH1cblxuICAvKipcbiAgICogT3V0cHV0IGlzIG5vdCBhIEphbGFsaSBZZWFyLlxuICAgKiBAcmV0dXJuIGdldFVUQ0Z1bGxZZWFyIG9mIHRoZSBjb3JyZXNwb25kaW5nIEdlb3JnaWFuIGRhdGUuXG4gICAqIEB0b2RvIGFkZCBpbXBsZW1lbnRhdGlvblxuICAgKi9cbiAgZ2V0VVRDRnVsbFllYXIoKTogbnVtYmVyIHtcbiAgICByZXR1cm4gdGhpcy5fZ0RhdGUuZ2V0VVRDRnVsbFllYXIoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcmV0dXJuIGdldFVUQ0hvdXJzIG9mIHRoZSBjb3JyZXNwb25kaW5nIEdlb3JnaWFuIGRhdGUuXG4gICAqIEB0b2RvIGFkZCBpbXBsZW1lbnRhdGlvblxuICAgKi9cbiAgZ2V0VVRDSG91cnMoKTogbnVtYmVyIHtcbiAgICByZXR1cm4gdGhpcy5fZ0RhdGUuZ2V0VVRDSG91cnMoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcmV0dXJuIGdldFVUQ01pbGxpc2Vjb25kcyBvZiB0aGUgY29ycmVzcG9uZGluZyBHZW9yZ2lhbiBkYXRlLlxuICAgKiBAdG9kbyBhZGQgaW1wbGVtZW50YXRpb25cbiAgICovXG4gIGdldFVUQ01pbGxpc2Vjb25kcygpOiBudW1iZXIge1xuICAgIHJldHVybiB0aGlzLl9nRGF0ZS5nZXRVVENNaWxsaXNlY29uZHMoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcmV0dXJuIGdldFVUQ01pbnV0ZXMgb2YgdGhlIGNvcnJlc3BvbmRpbmcgR2VvcmdpYW4gZGF0ZS5cbiAgICogQHRvZG8gYWRkIGltcGxlbWVudGF0aW9uXG4gICAqL1xuICBnZXRVVENNaW51dGVzKCk6IG51bWJlciB7XG4gICAgcmV0dXJuIHRoaXMuX2dEYXRlLmdldFVUQ01pbnV0ZXMoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBPdXRwdXQgaXMgbm90IGEgSmFsYWxpIFllYXIuXG4gICAqIEByZXR1cm4gZ2V0VVRDTW9udGggb2YgdGhlIGNvcnJlc3BvbmRpbmcgR2VvcmdpYW4gZGF0ZS5cbiAgICogQHRvZG8gYWRkIGltcGxlbWVudGF0aW9uXG4gICAqL1xuICBnZXRVVENNb250aCgpOiBudW1iZXIge1xuICAgIHJldHVybiB0aGlzLl9nRGF0ZS5nZXRVVENNb250aCgpO1xuICB9XG5cbiAgLyoqXG4gICAqIEByZXR1cm4gZ2V0VVRDU2Vjb25kcyBvZiB0aGUgY29ycmVzcG9uZGluZyBHZW9yZ2lhbiBkYXRlLlxuICAgKiBAdG9kbyBhZGQgaW1wbGVtZW50YXRpb25cbiAgICovXG4gIGdldFVUQ1NlY29uZHMoKTogbnVtYmVyIHtcbiAgICByZXR1cm4gdGhpcy5fZ0RhdGUuZ2V0VVRDU2Vjb25kcygpO1xuICB9XG5cbiAgLyoqXG4gICAqIHNldHMgdGhlIGRheSBvZiB0aGUgSkRhdGUgb2JqZWN0IHJlbGF0aXZlIHRvIHRoZSBiZWdpbm5pbmcgb2YgdGhlIGN1cnJlbnRseSBzZXQgbW9udGguXG4gICAqIEBwYXJhbSBkYXRlIGRheSBudW1iZXIgc3RhcnRzIGZyb20gMS5cbiAgICogQHJldHVybiBUaGUgbnVtYmVyIG9mIG1pbGxpc2Vjb25kcyBiZXR3ZWVuIDEgSmFudWFyeSAxOTcwIDAwOjAwOjAwIFVUQyBhbmQgdGhlIGdpdmVuIGRhdGUgKHRoZSBEYXRlIG9iamVjdCBpcyBhbHNvIGNoYW5nZWQgaW4gcGxhY2UpLlxuICAgKi9cbiAgc2V0RGF0ZShkYXRlOiBudW1iZXIpOiBudW1iZXIge1xuICAgIHRoaXMuakRheSA9IGRhdGU7XG4gICAgcmV0dXJuIHRoaXMuZ2V0VGltZSgpO1xuICB9XG5cbiAgLyoqXG4gICAqIHNldHMgdGhlIGZ1bGwgeWVhciBmb3IgYSBzcGVjaWZpZWQgZGF0ZSBhY2NvcmRpbmcgdG8gbG9jYWwgdGltZS4gUmV0dXJucyBuZXcgdGltZXN0YW1wLlxuICAgKiBAcGFyYW0geWVhciBmdWxsIEphbGFsaSB5ZWFyIGxpa2UgMTM5N1xuICAgKiBAcGFyYW0gbW9udGggbnVtYmVyIG9mIG1vbnRoIHN0YXJ0aW5nIGZyb20gMFxuICAgKiBAcGFyYW0gZGF0ZSBudW1iZXIgb2YgZGF5IHN0YXJ0aW5nIGZyb20gMVxuICAgKi9cbiAgc2V0RnVsbFllYXIoeWVhcjogbnVtYmVyLCBtb250aD86IG51bWJlciwgZGF0ZT86IG51bWJlcik6IG51bWJlciB7XG4gICAgdGhpcy5qWWVhciA9IHllYXI7XG4gICAgaWYgKG1vbnRoKSB7IHRoaXMuak1vbnRoID0gbW9udGg7IH1cbiAgICBpZiAoZGF0ZSkge3RoaXMuakRheSA9IGRhdGU7IH1cbiAgICByZXR1cm4gdGhpcy5nZXRUaW1lKCk7XG4gIH1cblxuICAvKipcbiAgICogU2V0cyB0aGUgaG91cnMgZm9yIGEgc3BlY2lmaWVkIGRhdGUgYWNjb3JkaW5nIHRvIGxvY2FsIHRpbWUsIGFuZCByZXR1cm5zIHRoZSBudW1iZXIgb2YgbWlsbGlzZWNvbmRzIHNpbmNlXG4gICAqIEphbnVhcnkgMSwgMTk3MCAwMDowMDowMCBVVEMgdW50aWwgdGhlIHRpbWUgcmVwcmVzZW50ZWQgYnkgdGhlIHVwZGF0ZWQgSkRhdGUgaW5zdGFuY2UuXG4gICAqIEBwYXJhbSBob3VycyBBbiBpbnRlZ2VyIGJldHdlZW4gMCBhbmQgMjMsIHJlcHJlc2VudGluZyB0aGUgaG91clxuICAgKiBAcGFyYW0gbWluIEFuIGludGVnZXIgYmV0d2VlbiAwIGFuZCA1OSwgcmVwcmVzZW50aW5nIHRoZSBtaW51dGVzLlxuICAgKiBAcGFyYW0gc2VjIEFuIGludGVnZXIgYmV0d2VlbiAwIGFuZCA1OSwgcmVwcmVzZW50aW5nIHRoZSBzZWNvbmRzLlxuICAgKiBAcGFyYW0gbXMgQSBudW1iZXIgYmV0d2VlbiAwIGFuZCA5OTksIHJlcHJlc2VudGluZyB0aGUgbWlsbGlzZWNvbmRzLlxuICAgKiBAcmV0dXJuIFRoZSBudW1iZXIgb2YgbWlsbGlzZWNvbmRzIGJldHdlZW4gSmFudWFyeSAxLCAxOTcwIDAwOjAwOjAwIFVUQyBhbmQgdGhlIHVwZGF0ZWQgZGF0ZS5cbiAgICovXG4gIHNldEhvdXJzKGhvdXJzOiBudW1iZXIsIG1pbj86IG51bWJlciwgc2VjPzogbnVtYmVyLCBtcz86IG51bWJlcik6IG51bWJlciB7XG4gICAgdGhpcy5fZ0RhdGUuc2V0SG91cnMoaG91cnMpO1xuICAgIGlmIChtaW4gIT09IHVuZGVmaW5lZCkgeyB0aGlzLnNldE1pbnV0ZXMobWluKTsgfVxuICAgIGlmIChzZWMgIT09IHVuZGVmaW5lZCkgeyB0aGlzLnNldFNlY29uZHMoc2VjKTsgfVxuICAgIGlmIChtcyAhPT0gdW5kZWZpbmVkKSB7IHRoaXMuc2V0TWlsbGlzZWNvbmRzKG1zKTsgfVxuICAgIHJldHVybiB0aGlzLmdldFRpbWUoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTZXRzIHRoZSBtaWxsaXNlY29uZHMgZm9yIGEgc3BlY2lmaWVkIGRhdGUgYWNjb3JkaW5nIHRvIGxvY2FsIHRpbWUuXG4gICAqIEBwYXJhbSBtcyBBIG51bWJlciBiZXR3ZWVuIDAgYW5kIDk5OSwgcmVwcmVzZW50aW5nIHRoZSBtaWxsaXNlY29uZHMuXG4gICAqIEByZXR1cm4gVGhlIG51bWJlciBvZiBtaWxsaXNlY29uZHMgYmV0d2VlbiAxIEphbnVhcnkgMTk3MCAwMDowMDowMCBVVEMgYW5kIHRoZSB1cGRhdGVkIGRhdGUuXG4gICAqL1xuICBzZXRNaWxsaXNlY29uZHMobXM6IG51bWJlcik6IG51bWJlciB7XG4gICAgdGhpcy5fZ0RhdGUuc2V0TWlsbGlzZWNvbmRzKG1zKTtcbiAgICByZXR1cm4gdGhpcy5nZXRUaW1lKCk7XG4gIH1cblxuICAvKipcbiAgICogU2V0cyB0aGUgbWludXRlcyBmb3IgYSBzcGVjaWZpZWQgZGF0ZSBhY2NvcmRpbmcgdG8gbG9jYWwgdGltZS5cbiAgICogQHBhcmFtIG1pbiBBbiBpbnRlZ2VyIGJldHdlZW4gMCBhbmQgNTksIHJlcHJlc2VudGluZyB0aGUgbWludXRlcy5cbiAgICogQHBhcmFtIHNlYyBBbiBpbnRlZ2VyIGJldHdlZW4gMCBhbmQgNTksIHJlcHJlc2VudGluZyB0aGUgc2Vjb25kcy5cbiAgICogQHBhcmFtIG1zIEEgbnVtYmVyIGJldHdlZW4gMCBhbmQgOTk5LCByZXByZXNlbnRpbmcgdGhlIG1pbGxpc2Vjb25kcy5cbiAgICogQHJldHVybiBUaGUgbnVtYmVyIG9mIG1pbGxpc2Vjb25kcyBiZXR3ZWVuIDEgSmFudWFyeSAxOTcwIDAwOjAwOjAwIFVUQyBhbmQgdGhlIHVwZGF0ZWQgZGF0ZS5cbiAgICovXG4gIHNldE1pbnV0ZXMobWluOiBudW1iZXIsIHNlYz86IG51bWJlciwgbXM/OiBudW1iZXIpOiBudW1iZXIge1xuICAgIHRoaXMuX2dEYXRlLnNldE1pbnV0ZXMobWluKTtcbiAgICBpZihzZWMgIT09IHVuZGVmaW5lZCkgeyB0aGlzLnNldFNlY29uZHMoc2VjKTsgfVxuICAgIGlmIChtcyAhPT0gdW5kZWZpbmVkKSB7IHRoaXMuc2V0TWlsbGlzZWNvbmRzKG1zKTsgfVxuICAgIHJldHVybiB0aGlzLmdldFRpbWUoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTZXRzIHRoZSBtb250aCBmb3IgYSBzcGVjaWZpZWQgZGF0ZSBhY2NvcmRpbmcgdG8gdGhlIGN1cnJlbnRseSBzZXQgeWVhci5cbiAgICogQHBhcmFtIG1vbnRoIEFuIGludGVnZXIgYmV0d2VlbiAwIGFuZCAxMSwgcmVwcmVzZW50aW5nIHRoZSBtb250aHMgRmFydmFyZGluIHRocm91Z2ggRXNmYW5kLlxuICAgKiBAcGFyYW0gZGF0ZSBBbiBpbnRlZ2VyIGZyb20gMSB0byAzMSwgcmVwcmVzZW50aW5nIHRoZSBkYXkgb2YgdGhlIG1vbnRoLlxuICAgKiBAcmV0dXJuIFRoZSBudW1iZXIgb2YgbWlsbGlzZWNvbmRzIGJldHdlZW4gMSBKYW51YXJ5IDE5NzAgMDA6MDA6MDAgVVRDIGFuZCB0aGUgdXBkYXRlZCBkYXRlLlxuICAgKi9cbiAgc2V0TW9udGgobW9udGg6IG51bWJlciwgZGF0ZT86IG51bWJlcik6IG51bWJlciB7XG4gICAgdGhpcy5qTW9udGggPSBtb250aDtcbiAgICBpZiAoZGF0ZSAhPT0gdW5kZWZpbmVkKSB7IHRoaXMuakRheSA9IGRhdGU7IH1cbiAgICByZXR1cm4gdGhpcy5nZXRUaW1lKCk7XG4gIH1cblxuICAvKipcbiAgICogU2V0cyB0aGUgc2Vjb25kcyBmb3IgYSBzcGVjaWZpZWQgZGF0ZSBhY2NvcmRpbmcgdG8gbG9jYWwgdGltZS5cbiAgICogQHBhcmFtIHNlYyBBbiBpbnRlZ2VyIGJldHdlZW4gMCBhbmQgNTksIHJlcHJlc2VudGluZyB0aGUgc2Vjb25kcy5cbiAgICogQHBhcmFtIG1zIEEgbnVtYmVyIGJldHdlZW4gMCBhbmQgOTk5LCByZXByZXNlbnRpbmcgdGhlIG1pbGxpc2Vjb25kcy5cbiAgICogQHJldHVybiBUaGUgbnVtYmVyIG9mIG1pbGxpc2Vjb25kcyBiZXR3ZWVuIDEgSmFudWFyeSAxOTcwIDAwOjAwOjAwIFVUQyBhbmQgdGhlIHVwZGF0ZWQgZGF0ZS5cbiAgICovXG4gIHNldFNlY29uZHMoc2VjOiBudW1iZXIsIG1zPzogbnVtYmVyKTogbnVtYmVyIHtcbiAgICB0aGlzLl9nRGF0ZS5zZXRTZWNvbmRzKHNlYyk7XG4gICAgaWYgKG1zICE9PSB1bmRlZmluZWQpIHsgdGhpcy5zZXRNaWxsaXNlY29uZHMobXMpOyB9XG4gICAgcmV0dXJuIHRoaXMuZ2V0VGltZSgpO1xuICB9XG5cbiAgLyoqXG4gICAqIFNldHMgdGhlIEpEYXRlIG9iamVjdCB0byB0aGUgdGltZSByZXByZXNlbnRlZCBieSBhIG51bWJlciBvZiBtaWxsaXNlY29uZHMgc2luY2UgSmFudWFyeSAxLCAxOTcwLCAwMDowMDowMCBVVEMuXG4gICAqIEBwYXJhbSB0aW1lIHNldHMgdGhlIERhdGUgb2JqZWN0IHRvIHRoZSB0aW1lIHJlcHJlc2VudGVkIGJ5IGEgbnVtYmVyIG9mIG1pbGxpc2Vjb25kcyBzaW5jZSBKYW51YXJ5IDEsIDE5NzAsIDAwOjAwOjAwIFVUQy5cbiAgICogQHJldHVybiBUaGUgbnVtYmVyIG9mIG1pbGxpc2Vjb25kcyBiZXR3ZWVuIDEgSmFudWFyeSAxOTcwIDAwOjAwOjAwIFVUQyBhbmQgdGhlIHVwZGF0ZWQgZGF0ZS5cbiAgICovXG4gIHNldFRpbWUodGltZTogbnVtYmVyKTogbnVtYmVyIHtcbiAgICB0aGlzLl9jcmVhdGVGcm9tRGF0ZShuZXcgRGF0ZSh0aW1lKSk7XG4gICAgcmV0dXJuIHRpbWU7XG4gIH1cblxuICAvKipcbiAgICogc2V0cyB0aGUgZGF5IG9mIHRoZSBtb250aCBmb3IgYSBzcGVjaWZpZWQgZGF0ZSBhY2NvcmRpbmcgdG8gdW5pdmVyc2FsIHRpbWUuXG4gICAqIFRoZW4gcmVjcmVhdGUgdGhlIEpEYXRlIG9iamVjdCBmcm9tIG5ldyBHZW9yZ2lhbiBvYmplY3QuXG4gICAqIEBwYXJhbSAgZGF0ZSBBbiBpbnRlZ2VyIGZyb20gMSB0byAzMSwgcmVwcmVzZW50aW5nIHRoZSBkYXkgb2YgdGhlIG1vbnRoLlxuICAgKiBAcmV0dXJuIFRoZSBudW1iZXIgb2YgbWlsbGlzZWNvbmRzIGJldHdlZW4gMSBKYW51YXJ5IDE5NzAgMDA6MDA6MDAgVVRDIGFuZCB0aGUgdXBkYXRlZCBkYXRlLlxuICAgKiBAdG9kbyBhZGQgaW1wbGVtZW50YXRpb25cbiAgICovXG4gIHNldFVUQ0RhdGUoZGF0ZTogbnVtYmVyKTogbnVtYmVyIHtcbiAgICB0aGlzLl9nRGF0ZS5zZXRVVENEYXRlKGRhdGUpO1xuICAgIHRoaXMuX2NyZWF0ZUZyb21EYXRlKHRoaXMuX2dEYXRlKTtcbiAgICByZXR1cm4gdGhpcy5nZXRUaW1lKCk7XG4gIH1cblxuICAvKipcbiAgICogU2V0cyB0aGUgZnVsbCB5ZWFyIGZvciBhIHNwZWNpZmllZCBkYXRlIGFjY29yZGluZyB0byB1bml2ZXJzYWwgdGltZS5cbiAgICogVGhlbiByZWNyZWF0ZSB0aGUgSkRhdGUgb2JqZWN0IGZyb20gbmV3IEdlb3JnaWFuIG9iamVjdC5cbiAgICogQHBhcmFtIHllYXIgIEFuIGludGVnZXIgc3BlY2lmeWluZyB0aGUgbnVtZXJpYyB2YWx1ZSBvZiB0aGUgeWVhciwgZm9yIGV4YW1wbGUsIDE5OTUuXG4gICAqIEBwYXJhbSBtb250aCAgT3B0aW9uYWwuIEFuIGludGVnZXIgYmV0d2VlbiAwIGFuZCAxMSByZXByZXNlbnRpbmcgdGhlIG1vbnRocyBKYW51YXJ5IHRocm91Z2ggRGVjZW1iZXIuXG4gICAqIEBwYXJhbSBkYXRlIEFuIGludGVnZXIgYmV0d2VlbiAxIGFuZCAzMSByZXByZXNlbnRpbmcgdGhlIGRheSBvZiB0aGUgbW9udGguIElmIHlvdSBzcGVjaWZ5IHRoZSBkYXlWYWx1ZSBwYXJhbWV0ZXIsIHlvdSBtdXN0IGFsc29cbiAgICogc3BlY2lmeSB0aGUgbW9udGhWYWx1ZS5cbiAgICogQHRvZG8gYWRkIGltcGxlbWVudGF0aW9uXG4gICAqL1xuICBzZXRVVENGdWxsWWVhcih5ZWFyOiBudW1iZXIsIG1vbnRoPzogbnVtYmVyLCBkYXRlPzogbnVtYmVyKTogbnVtYmVyIHtcbiAgICB0aGlzLl9nRGF0ZS5zZXRVVENGdWxsWWVhcih5ZWFyLCBtb250aCwgZGF0ZSk7XG4gICAgdGhpcy5fY3JlYXRlRnJvbURhdGUodGhpcy5fZ0RhdGUpO1xuICAgIHJldHVybiB0aGlzLmdldFRpbWUoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTZXRzIHRoZSBob3VyIGZvciBhIHNwZWNpZmllZCBkYXRlIGFjY29yZGluZyB0byB1bml2ZXJzYWwgdGltZSwgYW5kIHJldHVybnMgdGhlIG51bWJlciBvZiBtaWxsaXNlY29uZHMgc2luY2VcbiAgICogSmFudWFyeSAxLCAxOTcwIDAwOjAwOjAwIFVUQyB1bnRpbCB0aGUgdGltZSByZXByZXNlbnRlZCBieSB0aGUgdXBkYXRlZCBEYXRlIGluc3RhbmNlLlxuICAgKiBUaGVuIHJlY3JlYXRlIHRoZSBKRGF0ZSBvYmplY3QgZnJvbSBuZXcgR2VvcmdpYW4gb2JqZWN0LlxuICAgKiBAcGFyYW0gaG91cnMgIEFuIGludGVnZXIgYmV0d2VlbiAwIGFuZCAyMywgcmVwcmVzZW50aW5nIHRoZSBob3VyLlxuICAgKiBAcGFyYW0gbWluIE9wdGlvbmFsLiBBbiBpbnRlZ2VyIGJldHdlZW4gMCBhbmQgNTksIHJlcHJlc2VudGluZyB0aGUgbWludXRlcy5cbiAgICogQHBhcmFtIHNlYyBPcHRpb25hbC4gQW4gaW50ZWdlciBiZXR3ZWVuIDAgYW5kIDU5LCByZXByZXNlbnRpbmcgdGhlIHNlY29uZHMuIElmIHlvdSBzcGVjaWZ5IHRoZSBzZWNvbmRzVmFsdWUgcGFyYW1ldGVyLFxuICAgKiAgICAgICAgeW91IG11c3QgYWxzbyBzcGVjaWZ5IHRoZSBtaW51dGVzVmFsdWUuXG4gICAqIEBwYXJhbSBtcyBPcHRpb25hbC4gQSBudW1iZXIgYmV0d2VlbiAwIGFuZCA5OTksIHJlcHJlc2VudGluZyB0aGUgbWlsbGlzZWNvbmRzLiBJZiB5b3Ugc3BlY2lmeSB0aGUgbXNWYWx1ZSBwYXJhbWV0ZXIsXG4gICAqICAgICAgICB5b3UgbXVzdCBhbHNvIHNwZWNpZnkgdGhlIG1pbnV0ZXNWYWx1ZSBhbmQgc2Vjb25kc1ZhbHVlLlxuICAgKiBAcmV0dXJuIFRoZSBudW1iZXIgb2YgbWlsbGlzZWNvbmRzIGJldHdlZW4gSmFudWFyeSAxLCAxOTcwIDAwOjAwOjAwIFVUQyBhbmQgdGhlIHVwZGF0ZWQgZGF0ZS5cbiAgICogQHRvZG8gYWRkIGltcGxlbWVudGF0aW9uXG4gICAqL1xuICBzZXRVVENIb3Vycyhob3VyczogbnVtYmVyLCBtaW4/OiBudW1iZXIsIHNlYz86IG51bWJlciwgbXM/OiBudW1iZXIpOiBudW1iZXIge1xuICAgIHRoaXMuX2dEYXRlLnNldFVUQ0hvdXJzKGhvdXJzLCBtaW4sIHNlYywgbXMpO1xuICAgIHRoaXMuX2NyZWF0ZUZyb21EYXRlKHRoaXMuX2dEYXRlKTtcbiAgICByZXR1cm4gdGhpcy5nZXRUaW1lKCk7XG4gIH1cblxuICAvKipcbiAgICogU2V0cyB0aGUgbWlsbGlzZWNvbmRzIGZvciBhIHNwZWNpZmllZCBkYXRlIGFjY29yZGluZyB0byB1bml2ZXJzYWwgdGltZS5cbiAgICpcbiAgICogVGhlbiByZWNyZWF0ZSB0aGUgSkRhdGUgb2JqZWN0IGZyb20gbmV3IEdlb3JnaWFuIG9iamVjdC5cbiAgICogQHBhcmFtIG1zIEEgbnVtYmVyIGJldHdlZW4gMCBhbmQgOTk5LCByZXByZXNlbnRpbmcgdGhlIG1pbGxpc2Vjb25kcy5cbiAgICogQHJldHVybiBUaGUgbnVtYmVyIG9mIG1pbGxpc2Vjb25kcyBiZXR3ZWVuIDEgSmFudWFyeSAxOTcwIDAwOjAwOjAwIFVUQyBhbmQgdGhlIHVwZGF0ZWQgZGF0ZS5cbiAgICogQHRvZG8gYWRkIGltcGxlbWVudGF0aW9uXG4gICAqL1xuICBzZXRVVENNaWxsaXNlY29uZHMobXM6IG51bWJlcik6IG51bWJlciB7XG4gICAgdGhpcy5fZ0RhdGUuc2V0VVRDTWlsbGlzZWNvbmRzKG1zKTtcbiAgICB0aGlzLl9jcmVhdGVGcm9tRGF0ZSh0aGlzLl9nRGF0ZSk7XG4gICAgcmV0dXJuIHRoaXMuZ2V0VGltZSgpO1xuICB9XG5cbiAgLyoqXG4gICAqIFNldHMgdGhlIG1pbnV0ZXMgZm9yIGEgc3BlY2lmaWVkIGRhdGUgYWNjb3JkaW5nIHRvIHVuaXZlcnNhbCB0aW1lLlxuICAgKlxuICAgKiBUaGVuIHJlY3JlYXRlIHRoZSBKRGF0ZSBvYmplY3QgZnJvbSBuZXcgR2VvcmdpYW4gb2JqZWN0LlxuICAgKiBAcGFyYW0gbWluIEFuIGludGVnZXIgYmV0d2VlbiAwIGFuZCA1OSwgcmVwcmVzZW50aW5nIHRoZSBtaW51dGVzLlxuICAgKiBAcGFyYW0gc2VjIE9wdGlvbmFsLiBBbiBpbnRlZ2VyIGJldHdlZW4gMCBhbmQgNTksIHJlcHJlc2VudGluZyB0aGUgc2Vjb25kcy4gSWYgeW91IHNwZWNpZnkgdGhlIHNlY29uZHNWYWx1ZSBwYXJhbWV0ZXIsXG4gICAqICAgICAgICB5b3UgbXVzdCBhbHNvIHNwZWNpZnkgdGhlIG1pbnV0ZXNWYWx1ZS5cbiAgICogQHBhcmFtIG1zIE9wdGlvbmFsLiBBIG51bWJlciBiZXR3ZWVuIDAgYW5kIDk5OSwgcmVwcmVzZW50aW5nIHRoZSBtaWxsaXNlY29uZHMuIElmIHlvdSBzcGVjaWZ5IHRoZSBtc1ZhbHVlIHBhcmFtZXRlcixcbiAgICogICAgICAgIHlvdSBtdXN0IGFsc28gc3BlY2lmeSB0aGUgbWludXRlc1ZhbHVlIGFuZCBzZWNvbmRzVmFsdWUuXG4gICAqIEByZXR1cm4gVGhlIG51bWJlciBvZiBtaWxsaXNlY29uZHMgYmV0d2VlbiAxIEphbnVhcnkgMTk3MCAwMDowMDowMCBVVEMgYW5kIHRoZSB1cGRhdGVkIGRhdGUuXG4gICAqIEB0b2RvIGFkZCBpbXBsZW1lbnRhdGlvblxuICAgKi9cbiAgc2V0VVRDTWludXRlcyhtaW46IG51bWJlciwgc2VjPzogbnVtYmVyLCBtcz86IG51bWJlcik6IG51bWJlciB7XG4gICAgdGhpcy5fZ0RhdGUuc2V0VVRDTWludXRlcyhtaW4sIHNlYywgbXMpO1xuICAgIHRoaXMuX2NyZWF0ZUZyb21EYXRlKHRoaXMuX2dEYXRlKTtcbiAgICByZXR1cm4gdGhpcy5nZXRUaW1lKCk7XG4gIH1cblxuICAvKipcbiAgICogU2V0cyB0aGUgbW9udGggZm9yIGEgc3BlY2lmaWVkIGRhdGUgYWNjb3JkaW5nIHRvIHVuaXZlcnNhbCB0aW1lLlxuICAgKlxuICAgKiBUaGVuIHJlY3JlYXRlIHRoZSBKRGF0ZSBvYmplY3QgZnJvbSBuZXcgR2VvcmdpYW4gb2JqZWN0LlxuICAgKiBAcGFyYW0gbW9udGggQW4gaW50ZWdlciBiZXR3ZWVuIDAgYW5kIDExLCByZXByZXNlbnRpbmcgdGhlIG1vbnRocyBKYW51YXJ5IHRocm91Z2ggRGVjZW1iZXIuXG4gICAqIEBwYXJhbSBkYXRlIE9wdGlvbmFsLiBBbiBpbnRlZ2VyIGZyb20gMSB0byAzMSwgcmVwcmVzZW50aW5nIHRoZSBkYXkgb2YgdGhlIG1vbnRoLlxuICAgKiBAcmV0dXJuIFRoZSBudW1iZXIgb2YgbWlsbGlzZWNvbmRzIGJldHdlZW4gMSBKYW51YXJ5IDE5NzAgMDA6MDA6MDAgVVRDIGFuZCB0aGUgdXBkYXRlZCBkYXRlLlxuICAgKiBAdG9kbyBhZGQgaW1wbGVtZW50YXRpb25cbiAgICovXG4gIHNldFVUQ01vbnRoKG1vbnRoOiBudW1iZXIsIGRhdGU/OiBudW1iZXIpOiBudW1iZXIge1xuICAgIHRoaXMuX2dEYXRlLnNldFVUQ01vbnRoKG1vbnRoLCBkYXRlKTtcbiAgICB0aGlzLl9jcmVhdGVGcm9tRGF0ZSh0aGlzLl9nRGF0ZSk7XG4gICAgcmV0dXJuIHRoaXMuZ2V0VGltZSgpO1xuICB9XG5cbiAgLyoqXG4gICAqIFNldHMgdGhlIHNlY29uZHMgZm9yIGEgc3BlY2lmaWVkIGRhdGUgYWNjb3JkaW5nIHRvIHVuaXZlcnNhbCB0aW1lLlxuICAgKlxuICAgKiBUaGVuIHJlY3JlYXRlIHRoZSBKRGF0ZSBvYmplY3QgZnJvbSBuZXcgR2VvcmdpYW4gb2JqZWN0LlxuICAgKiBAcGFyYW0gc2VjIEFuIGludGVnZXIgYmV0d2VlbiAwIGFuZCA1OSwgcmVwcmVzZW50aW5nIHRoZSBzZWNvbmRzLlxuICAgKiBAcGFyYW0gbXMgT3B0aW9uYWwuIEEgbnVtYmVyIGJldHdlZW4gMCBhbmQgOTk5LCByZXByZXNlbnRpbmcgdGhlIG1pbGxpc2Vjb25kcy5cbiAgICogQHRvZG8gYWRkIGltcGxlbWVudGF0aW9uXG4gICAqL1xuICBzZXRVVENTZWNvbmRzKHNlYzogbnVtYmVyLCBtcz86IG51bWJlcik6IG51bWJlciB7XG4gICAgdGhpcy5fZ0RhdGUuc2V0VVRDU2Vjb25kcyhzZWMsIG1zKTtcbiAgICB0aGlzLl9jcmVhdGVGcm9tRGF0ZSh0aGlzLl9nRGF0ZSk7XG4gICAgcmV0dXJuIHRoaXMuZ2V0VGltZSgpO1xuICB9XG5cbiAgLyoqXG4gICAqIEByZXR1cm4gbmFtZSBvZiB0aGUgZGF5IG9mIHRoZSB3ZWVrIGluIHBlcnNpYW4uXG4gICAqIEBleGFtcGxlINiv2YjYtNmG2KjZh1xuICAgKi9cbiAgZ2V0TmFtZU9mVGhlRGF5KCk6IHN0cmluZyB7XG4gICAgcmV0dXJuIEpEYXRlLkRBWVNfT0ZfV0VFS1t0aGlzLmdldERheSgpXTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcmV0dXJuIG5hbWUgb2YgdGhlIG1vbnRoIGluIHBlcnNpYW4uXG4gICAqIEBleGFtcGxlINmF2YfYsVxuICAgKi9cbiAgZ2V0TmFtZU9mVGhlTW9udGgoKTogc3RyaW5nIHtcbiAgICByZXR1cm4gSkRhdGUuRkFfTU9OVEhTW3RoaXMuZ2V0TW9udGgoKV07XG4gIH1cblxuICAvKipcbiAgICogcmV0dXJucyB0aGUgZGF0ZSBwb3J0aW9uIG9mIGEgRGF0ZSBvYmplY3QgaW4gaHVtYW4gcmVhZGFibGUgZm9ybSBpbiBQZXJzaWFuLlxuICAgKiBAcmV0dXJuIGEgc3RyaW5nIGZvbGxvd2luZyB0aGlzIHBhdHRlcm46IFwibmFtZU9mVGhlRGF5IG5hbWVPZlRoZU1vbnRoIGRheU51bWJlciBmdWxsWWVhclwiLlxuICAgKiBAZXhhbXBsZSDZvtmG2KzigIzYtNmG2KjZhyDYp9iz2YHZhtivIDMwIDEzNzVcbiAgICovXG4gIHRvRGF0ZVN0cmluZygpOiBzdHJpbmcge1xuICAgIHJldHVybiBgJHt0aGlzLmdldE5hbWVPZlRoZURheSgpfSAke3RoaXMuZ2V0TmFtZU9mVGhlTW9udGgoKX0gJHt0aGlzLmdldERhdGUoKX0gJHt0aGlzLmdldEZ1bGxZZWFyKCl9YDtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIHRpbWUgbWFya2VyIG9mIG9iamVjdCB0aW1lLiBhbGwgaG91ciBudW1iZXJzIGxlc3NlciB0aGFuIDEyIGFyZSBiZWZvcmUgbm9vbiBhbmQgYWxsIGdyZWF0ZXIgdGhhbiAxMiBhcmUgYWZ0ZXIgbm9vbi5cbiAgICogQHBhcmFtIHNob3J0VmVyc2lvbiBjb250cm9scyBvdXRwdXQuIGlmIGJlIHRydWUsIG91dHB1dCB3aWxsIGJlIGluIHNob3J0IGZvcm1hdCBsaWtlOiDYqC7YuCBpZiBiZSBmYWxzZSwgb3V0cHV0IHdpbGwgYmUgaW4gY29tcGxldGUgZm9ybWF0IGxpa2U6INio2LnYryDYp9iyINi42YfYsVxuICAgKiBAcmV0dXJuIHRpbWUgbWFya2VyIGZvciBzaG93aW5nIGlmIHRpbWUgaXMgYmVmb3JlIG5vb24gb3IgYWZ0ZXIgaXRcbiAgICovXG4gIGdldFRpbWVNYXJrZXIoc2hvcnRWZXJzaW9uOiBib29sZWFuID0gZmFsc2UpOiBzdHJpbmcge1xuICAgIGlmICh0aGlzLmdldEhvdXJzKCkgPCAxMikgeyByZXR1cm4gc2hvcnRWZXJzaW9uID8gSkRhdGUuU0hPUlRfQkVGT1JFX05PT04gOiBKRGF0ZS5DT01QTEVURV9CRUZPUkVfTk9PTjsgfVxuICAgIHJldHVybiBzaG9ydFZlcnNpb24gPyBKRGF0ZS5TSE9SVF9BRlRFUl9OT09OIDogSkRhdGUuQ09NUExFVEVfQUZURVJfTk9PTjtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXBsYWNlIHBhdHRlcm5zIG9mIGRhdGUgZm9ybWF0dGluZyB3aXRoIGNvcnJlc3BvbmRpbmcgc3RyaW5ncyBmcm9tIEpEYXRlIG9iamVjdCB2YWx1ZXMuXG4gICAqIEluIGJpLWNoYXJhY3RlciBwYXR0ZXJuIHBhcnRzLCBtaXNzZWQgZGlnaXRzIHdpbGwgZmlsbCB3aXRoIHplcm8uXG4gICAqIEBwYXJhbSBwYXR0ZXJuIGEgcGF0dGVybiBzdHJpbmcgd2l0aCByZXBsYWNlYWJsZSBwYXJ0czpcbiAgICpcbiAgICogICAgICAgIHl5eXkgLT4gWWVhciBudW1iZXIgaW4gNC1kaWdpdCByZXByZXNlbnRhdGlvbi4gZXg6IDEzOTdcbiAgICpcbiAgICogICAgICAgIHl5IC0+IFllYXIgbnVtYmVyIGluIDItZGlnaXQgcmVwcmVzZW50YXRpb24uIGV4OiA5N1xuICAgKlxuICAgKiAgICAgICAgbW1tbSAtPiBOYW1lIG9mIHRoZSBtb250aCBpbiBFbmdsaXNoIHJlcHJlc2VudGF0aW9uLiBleDogRXNmYW5kXG4gICAqXG4gICAqICAgICAgICBtbW0gLT4gTmFtZSBvZiB0aGUgbW9udGggaW4gUGVyc2lhbiByZXByZXNlbnRhdGlvbi4gZXg6INin2LPZgdmG2K9cbiAgICpcbiAgICogICAgICAgIG1tIC0+IDItZGlnaXQgbnVtYmVyIG9mIHRoZSBtb250aCBzdGFydGluZyBmcm9tIDFcbiAgICpcbiAgICogICAgICAgIG0gLT4gbm9uIHplcm8tcGFkZGluZyBudW1iZXIgb2YgdGhlIG1vbnRoIHN0YXJ0aW5nIGZyb20gMVxuICAgKlxuICAgKiAgICAgICAgZGRkZCAtPiBOYW1lIG9mIHRoZSBkYXkgaW4gdGhlIHdlZWsgaW4gRW5nbGlzaCByZXByZXNlbnRhdGlvbi4gZXg6IFNoYW5iZVxuICAgKlxuICAgKiAgICAgICAgZGRkIC0+IE5hbWUgb2YgdGhlIGRheSBpbiB0aGUgd2VlayBpZCBQZXJzaWFuIHJlcHJlc2VudGF0aW9uLiBleDog2LTZhtio2YdcbiAgICpcbiAgICogICAgICAgIGRkIC0+IDItZGlnaXQgbnVtYmVyIG9mIHRoZSBkYXkgaW4gdGhlIG1vbnRoIHN0YXJ0aW5nIGZyb20gMVxuICAgKlxuICAgKiAgICAgICAgZCAtPiBub24gemVyby1wYWRkaW5nIG51bWJlciBvZiB0aGUgZGF5IGluIHRoZSBtb250aCBzdGFydGluZyBmcm9tIDFcbiAgICpcbiAgICogQHJldHVybiBBIGZvcm1hdHRlZCBzdHJpbmcgdGhhdCBhbGwgRGF0ZSBwYXR0ZXJuIHBhcnRzIGhhcyBiZWVuIHJlcGxhY2VkLiBPdGhlciBjaGFyYWN0ZXJzIG9mIHRoZSBwYXR0ZXJuIHdpbGwgbGVmdCB1bmNoYW5nZWQuXG4gICAqL1xuICBwcml2YXRlIF9mb3JtYXRfZGF0ZShwYXR0ZXJuOiBzdHJpbmcpOiBzdHJpbmcge1xuICAgIHJldHVybiBwYXR0ZXJuLnJlcGxhY2UoL3l5eXkvZywgSkRhdGUuemVyb1BhZGRpbmcodGhpcy5nZXRGdWxsWWVhcigpLCA0KSlcbiAgICAgIC5yZXBsYWNlKC9cXGJ5eVxcYi9nLCAodGhpcy5nZXRGdWxsWWVhcigpICUgMTAwKS50b1N0cmluZygpKVxuICAgICAgLnJlcGxhY2UoL1xcYm1tbW1cXGIvZywgSkRhdGUuRU5fTU9OVEhTW3RoaXMuZ2V0TW9udGgoKV0pXG4gICAgICAucmVwbGFjZSgvXFxibW1tXFxiL2csIEpEYXRlLkZBX01PTlRIU1t0aGlzLmdldE1vbnRoKCldKVxuICAgICAgLnJlcGxhY2UoL1xcYm1tXFxiL2csIEpEYXRlLnplcm9QYWRkaW5nKHRoaXMuZ2V0TW9udGgoKSArIDEsIDIpKVxuICAgICAgLnJlcGxhY2UoL1xcYm1cXGIvZywgKHRoaXMuZ2V0TW9udGgoKSArIDEpLnRvU3RyaW5nKCkpXG4gICAgICAucmVwbGFjZSgvXFxiZGRkZFxcYi9nLCBKRGF0ZS5FTl9EQVlTX09GX1dFRUtbdGhpcy5nZXREYXkoKV0pXG4gICAgICAucmVwbGFjZSgvXFxiZGRkXFxiL2csIEpEYXRlLkRBWVNfT0ZfV0VFS1t0aGlzLmdldERheSgpXSlcbiAgICAgIC5yZXBsYWNlKC9cXGJkZFxcYi9nLCBKRGF0ZS56ZXJvUGFkZGluZyh0aGlzLmdldERhdGUoKSwgMikpXG4gICAgICAucmVwbGFjZSgvXFxiZFxcYi9nLCB0aGlzLmdldERhdGUoKS50b1N0cmluZygpKVxuICB9XG5cbiAgLyoqXG4gICAqIFJlcGxhY2UgcGF0dGVybnMgb2YgdGltZSBmb3JtYXR0aW5nIHdpdGggY29ycmVzcG9uZGluZyBzdHJpbmdzIGZyb20gSkRhdGUgb2JqZWN0IHZhbHVlcy5cbiAgICpcbiAgICogSW4gYmktY2hhcmFjdGVyIHBhdHRlcm4gcGFydHMsIG1pc3NlZCBkaWdpdHMgd2lsbCBmaWxsIHdpdGggemVyby5cbiAgICogQHBhcmFtIHBhdHRlcm4gYSBwYXR0ZXJuIHN0cmluZyB3aXRoIHJlcGxhY2VhYmxlIHBhcnRzOlxuICAgKlxuICAgKiAgICAgICAgSEggLT4gMi1kaWdpdCBmb3JtIG9mIGhvdXIgbnVtYmVyIGluIDI0LWhvdXIgY2xvY2sgZm9ybWF0LlxuICAgKlxuICAgKiAgICAgICAgSCAtPiBub24gemVyby1wYWRkaW5nIGZvcm0gb2YgaG91ciBudW1iZXIgaW4gMjQtaG91ciBjbG9jayBmb3JtYXQuXG4gICAqXG4gICAqICAgICAgICBoaCAtPiAyLWRpZ2l0IGZvcm0gb2YgaG91ciBudW1iZXIgaW4gMTItaG91ciBjbG9jayBmb3JtYXQuXG4gICAqXG4gICAqICAgICAgICBoIC0+IG5vbiB6ZXJvLXBhZGRpbmcgZm9ybSBvZiBob3VyIG51bWJlciBpbiAxMi1ob3VyIGNsb2NrIGZvcm1hdC5cbiAgICpcbiAgICogICAgICAgIEggLT4gbm9uIHplcm8tcGFkZGluZyBmb3JtIG9mIGhvdXIgbnVtYmVyIGluIDEyLWhvdXIgY2xvY2sgZm9ybWF0LlxuICAgKlxuICAgKiAgICAgICAgTU0gLT4gMi1kaWdpdCBmb3JtIG9mIG1pbnV0ZXMgbnVtYmVyLlxuICAgKlxuICAgKiAgICAgICAgTSAtPiBub24gemVyby1wYWRkaW5nIGZvcm0gb2YgbWludXRlcyBudW1iZXJcbiAgICpcbiAgICogICAgICAgIFNTIC0+IDItZGlnaXQgZm9ybSBvZiBzZWNvbmRzIG51bWJlci5cbiAgICpcbiAgICogICAgICAgIFMgLT4gbm9uIHplcm8tcGFkZGluZyBmb3JtIG9mIHNlY29uZHMgbnVtYmVyLlxuICAgKlxuICAgKiAgICAgICAgbCAtPiBudW1iZXIgb2YgbWlsbGlzZWNvbmRzXG4gICAqXG4gICAqICAgICAgICBUIC0+IFRpbWUgbWFya2VyIGluIGZ1bGwgZm9ybWF0IGxpa2U6INmC2KjZhCDYp9iyINi42YfYsVxuICAgKlxuICAgKiAgICAgICAgdCAtPiBUaW1lIG1hcmtlciBpbiBzaG9ydCBmb3JtYXQgbGlrZTog2YIu2LhcbiAgICovXG4gIHByaXZhdGUgX2Zvcm1hdF90aW1lKHBhdHRlcm46IHN0cmluZyk6IHN0cmluZyB7XG4gICAgcmV0dXJuIHBhdHRlcm4ucmVwbGFjZSgvXFxiSEhcXGIvZywgSkRhdGUuemVyb1BhZGRpbmcodGhpcy5nZXRIb3VycygpLCAyKSlcbiAgICAgIC5yZXBsYWNlKC9cXGJIXFxiL2csIHRoaXMuZ2V0SG91cnMoKS50b1N0cmluZygpKVxuICAgICAgLnJlcGxhY2UoL1xcYmhoXFxiL2csIEpEYXRlLnplcm9QYWRkaW5nKHRoaXMuZ2V0SG91cnMxMmhvdXJDbG9jaygpLCAyKSlcbiAgICAgIC5yZXBsYWNlKC9cXGJoXFxiL2csIHRoaXMuZ2V0SG91cnMxMmhvdXJDbG9jaygpLnRvU3RyaW5nKCkpXG4gICAgICAucmVwbGFjZSgvXFxiTU1cXGIvZywgSkRhdGUuemVyb1BhZGRpbmcodGhpcy5nZXRNaW51dGVzKCksIDIpKVxuICAgICAgLnJlcGxhY2UoL1xcYk1cXGIvZywgdGhpcy5nZXRNaW51dGVzKCkudG9TdHJpbmcoKSlcbiAgICAgIC5yZXBsYWNlKC9cXGJTU1xcYi9nLCBKRGF0ZS56ZXJvUGFkZGluZyh0aGlzLmdldFNlY29uZHMoKSwgMikpXG4gICAgICAucmVwbGFjZSgvXFxiU1xcYi9nLCB0aGlzLmdldFNlY29uZHMoKS50b1N0cmluZygpKVxuICAgICAgLnJlcGxhY2UoL1xcYmxcXGIvZywgdGhpcy5nZXRNaWxsaXNlY29uZHMoKS50b1N0cmluZygpKVxuICAgICAgLnJlcGxhY2UoL1xcYlRcXGIvZywgdGhpcy5nZXRUaW1lTWFya2VyKGZhbHNlKSlcbiAgICAgIC5yZXBsYWNlKC9cXGJ0XFxiL2csIHRoaXMuZ2V0VGltZU1hcmtlcih0cnVlKSk7XG4gIH1cblxuICAvKipcbiAgICogVGhpcyBtZXRob2QgZm9ybWF0IGRhdGUgYW5kIHRpbWUgc3RvcmVkIGluIHRoZSBKRGF0ZSBvYmplY3QgYWNjb3JkaW5nIHRvIHRoZSBlbnRlcmVkIHBhdHRlcm4uXG4gICAqXG4gICAqIE9ubHkgbWFza3Mgd2lsbCByZXBsYWNlIGFuZCBhbGwgb3RoZXIgY2hhcmFjdGVycyB3aWxsIGJlIHVuY2hhbmdlZCBhZnRlciBmb3JtYXR0aW5nLlxuICAgKlxuICAgKiBZb3UgY2FuIHVzZSBtYXNrcyBzZXZlcmFsIHRpbWVzIGluIGEgcGF0dGVybiBidXQgYmUgY2FyZWZ1bCBiZWNhdXNlIGlmIHNvbWUgb2YgbWFza3Mgd3JpdHRlbiBpbW1lZGlhdGVseSwgdGhleSBjcmVhdGUgbmV3IG1hc2tzIHdpdGhcbiAgICogZGlmZmVyZW50IG1lYW5pbmcuIEl0J3MgYmV0dGVyIHRvIGFsd2F5cyBoYXZlIHNvbWUgc3BsaXR0ZXIgY2hhcmFjdGVycyBiZXR3ZWVuIGRpZmZlcmVudCBtYXNrcy5cbiAgICogQHBhcmFtIHBhdHRlcm4gYSBzdHJpbmcgY29udGFpbmluZyB6ZXJvIG9yIG1vcmUgZm9ybWF0dGluZyBtYXNrLlxuICAgKlxuICAgKiBNYXNrczpcbiAgICpcbiAgICogICAgICAgIHl5eXkgLT4gWWVhciBudW1iZXIgaW4gNC1kaWdpdCByZXByZXNlbnRhdGlvbi4gTGVhZGluZyB6ZXJvIGZvciB5ZWFycyBsZXNzZXIgdGhhbiAxMDAwIGV4OiAxMzk3XG4gICAqXG4gICAqICAgICAgICB5eSAtPiBZZWFyIG51bWJlciBpbiAyLWRpZ2l0IHJlcHJlc2VudGF0aW9uIHdpdGhvdXQgTGVhZGluZyB6ZXJvcy4gZXg6IDk3XG4gICAqXG4gICAqICAgICAgICBtbW1tIC0+IE5hbWUgb2YgdGhlIG1vbnRoIGluIEVuZ2xpc2ggcmVwcmVzZW50YXRpb24uIGV4OiBFc2ZhbmRcbiAgICpcbiAgICogICAgICAgIG1tbSAtPiBOYW1lIG9mIHRoZSBtb250aCBpbiBQZXJzaWFuIHJlcHJlc2VudGF0aW9uLiBleDog2KfYs9mB2YbYr1xuICAgKlxuICAgKiAgICAgICAgbW0gLT4gMi1kaWdpdCBudW1iZXIgb2YgdGhlIG1vbnRoIHN0YXJ0aW5nIGZyb20gMS4gTGVhZGluZyB6ZXJvIGZvciBzaW5nbGUtZGlnaXQgbW9udGhzLlxuICAgKlxuICAgKiAgICAgICAgbSAtPiBudW1iZXIgb2YgdGhlIG1vbnRoIHN0YXJ0aW5nIGZyb20gMSB3aXRob3V0IExlYWRpbmcgemVyb3MuXG4gICAqXG4gICAqICAgICAgICBkZGRkIC0+IE5hbWUgb2YgdGhlIGRheSBpbiB0aGUgd2VlayBpbiBFbmdsaXNoIHJlcHJlc2VudGF0aW9uLiBleDogU2hhbmJlXG4gICAqXG4gICAqICAgICAgICBkZGQgLT4gTmFtZSBvZiB0aGUgZGF5IGluIHRoZSB3ZWVrIGlkIFBlcnNpYW4gcmVwcmVzZW50YXRpb24uIGV4OiDYtNmG2KjZh1xuICAgKlxuICAgKiAgICAgICAgZGQgLT4gMi1kaWdpdCBudW1iZXIgb2YgdGhlIGRheSBpbiB0aGUgbW9udGggc3RhcnRpbmcgZnJvbSAxLiBMZWFkaW5nIHplcm8gZm9yIHNpbmdsZS1kaWdpdCBkYXlzLlxuICAgKlxuICAgKiAgICAgICAgZCAtPiBudW1iZXIgb2YgdGhlIGRheSBpbiB0aGUgbW9udGggc3RhcnRpbmcgZnJvbSAxIHdpdGhvdXQgTGVhZGluZyB6ZXJvcy5cbiAgICpcbiAgICogICAgICAgIEhIIC0+IDItZGlnaXQgZm9ybSBvZiBob3VyIG51bWJlciBpbiAyNC1ob3VyIGNsb2NrIGZvcm1hdC4gTGVhZGluZyB6ZXJvIGZvciBzaW5nbGUtZGlnaXQgaG91cnMuXG4gICAqXG4gICAqICAgICAgICBIIC0+IG5vbiB6ZXJvLXBhZGRpbmcgZm9ybSBvZiBob3VyIG51bWJlciBpbiAyNC1ob3VyIGNsb2NrIGZvcm1hdCB3aXRob3V0IExlYWRpbmcgemVyb3MuXG4gICAqXG4gICAqICAgICAgICBoaCAtPiAyLWRpZ2l0IGZvcm0gb2YgaG91ciBudW1iZXIgaW4gMTItaG91ciBjbG9jayBmb3JtYXQuIExlYWRpbmcgemVybyBmb3Igc2luZ2xlLWRpZ2l0IGhvdXJzLlxuICAgKlxuICAgKiAgICAgICAgSCAtPiBub24gemVyby1wYWRkaW5nIGZvcm0gb2YgaG91ciBudW1iZXIgaW4gMTItaG91ciBjbG9jayBmb3JtYXQgd2l0aG91dCBMZWFkaW5nIHplcm9zLlxuICAgKlxuICAgKiAgICAgICAgTU0gLT4gMi1kaWdpdCBmb3JtIG9mIG1pbnV0ZXMgbnVtYmVyLiBMZWFkaW5nIHplcm8gZm9yIHNpbmdsZS1kaWdpdCBtaW51dGVzLlxuICAgKlxuICAgKiAgICAgICAgTSAtPiBub24gemVyby1wYWRkaW5nIGZvcm0gb2YgbWludXRlcyBudW1iZXIgd2l0aG91dCBMZWFkaW5nIHplcm9zLlxuICAgKlxuICAgKiAgICAgICAgU1MgLT4gMi1kaWdpdCBmb3JtIG9mIHNlY29uZHMgbnVtYmVyLiBMZWFkaW5nIHplcm8gZm9yIHNpbmdsZS1kaWdpdCBzZWNvbmRzLlxuICAgKlxuICAgKiAgICAgICAgUyAtPiBub24gemVyby1wYWRkaW5nIGZvcm0gb2Ygc2Vjb25kcyBudW1iZXIgd2l0aG91dCBMZWFkaW5nIHplcm9zLlxuICAgKlxuICAgKiAgICAgICAgbCAtPiBudW1iZXIgb2YgbWlsbGlzZWNvbmRzIHdpdGhvdXQgTGVhZGluZyB6ZXJvcy5cbiAgICpcbiAgICogICAgICAgIFQgLT4gVGltZSBtYXJrZXIgaW4gZnVsbCBmb3JtYXQgbGlrZTog2YLYqNmEINin2LIg2LjZh9ixXG4gICAqXG4gICAqICAgICAgICB0IC0+IFRpbWUgbWFya2VyIGluIHNob3J0IGZvcm1hdCBsaWtlOiDZgi7YuFxuICAgKkByZXR1cm4gZm9ybWF0dGVkIGRhdGVUaW1lIHN0cmluZy5cbiAgICovXG4gIGZvcm1hdChwYXR0ZXJuOiBzdHJpbmcpOiBzdHJpbmcge1xuICAgIHJldHVybiB0aGlzLl9mb3JtYXRfdGltZSh0aGlzLl9mb3JtYXRfZGF0ZShwYXR0ZXJuKSk7XG4gIH1cblxuICAvKipcbiAgICogQHJldHVybiBhIHN0cmluZyBpbiBzaW1wbGlmaWVkIGV4dGVuZGVkIElTTyBmb3JtYXQgKElTTyA4NjAxKSwgd2hpY2ggaXMgYWx3YXlzIDI0IG9yIDI3IGNoYXJhY3RlcnMgbG9uZyAoeXl5eS1tbS1kZFRISDpNTTpTUy5sWikuXG4gICAqICAgICAgICBCZSBjYXJlZnVsIGJlY2F1c2UgdGhhdCBUIGluIHRoZSBtaWRkbGUgb2YgdGhlIHBhdHRlcm4gaXMgbm90IGEgZm9ybWF0IE1hc2sgYW5kIGlzIGEgc2ltcGxlIGNoYXJhY3Rlci5cbiAgICovXG4gIHRvSVNPU3RyaW5nKCk6IHN0cmluZyB7XG4gICAgcmV0dXJuIHRoaXMuZm9ybWF0KCd5eXl5LW1tLWRkJykgKyAnVCcgKyB0aGlzLmZvcm1hdCgnSEg6TU06U1MubCcpICsgJ1onO1xuICB9XG5cbiAgLyoqXG4gICAqIEByZXR1cm4gYSBzdHJpbmcgcmVwcmVzZW50YXRpb24gb2YgdGhlIERhdGUgb2JqZWN0LlxuICAgKiBbc2VlIHRvU3RyaW5nIG1ldGhvZF17QGxpbmsgdG9TdHJpbmd9XG4gICAqIEBwYXJhbSBrZXlcbiAgICovXG4gIHRvSlNPTihrZXk/OiBhbnkpOiBzdHJpbmcge1xuICAgIHJldHVybiB0aGlzLnRvU3RyaW5nKCk7XG4gIH1cblxuICAvKipcbiAgICogcmV0dXJucyBmb3JtYXR0ZWQgZGF0ZSB3aXRoIGZvbGxvd2luZyBwYXR0ZXJuOiAnZGRkIG1tbSBkIHl5eXkgSEg6TU06U1MnXG4gICAqL1xuICB0b1N0cmluZygpOiBzdHJpbmcge1xuICAgIHJldHVybiB0aGlzLmZvcm1hdCgnZGRkIG1tbSBkIHl5eXkgSEg6TU06U1MnKVxuICB9XG5cbiAgLyoqXG4gICAqIFtGb3IgbW9yZSBpbmZvcm1hdGlvbiBzZWUgamF2YXNjcmlwdCBEYXRlIG9iamVjdCBkb2N1bWVudGF0aW9uIGFib3V0IHRoaXMgbWV0aG9kXXtAbGluayBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9KYXZhU2NyaXB0L1JlZmVyZW5jZS9HbG9iYWxfT2JqZWN0cy9EYXRlL3RvTG9jYWxlRGF0ZVN0cmluZ31cbiAgICpcbiAgICogVGhlIG5ldyBsb2NhbGVzIGFuZCBvcHRpb25zIGFyZ3VtZW50cyBsZXQgYXBwbGljYXRpb25zIHNwZWNpZnkgdGhlIGxhbmd1YWdlIHdob3NlIGZvcm1hdHRpbmcgY29udmVudGlvbnNcbiAgICogc2hvdWxkIGJlIHVzZWQgYW5kIGFsbG93IHRvIGN1c3RvbWl6ZSB0aGUgYmVoYXZpb3Igb2YgdGhlIGZ1bmN0aW9uLiBJbiBvbGRlciBpbXBsZW1lbnRhdGlvbnMsXG4gICAqIHdoaWNoIGlnbm9yZSB0aGUgbG9jYWxlcyBhbmQgb3B0aW9ucyBhcmd1bWVudHMsIHRoZSBsb2NhbGUgdXNlZCBhbmQgdGhlIGZvcm0gb2YgdGhlIHN0cmluZyByZXR1cm5lZCBhcmVcbiAgICogZW50aXJlbHkgaW1wbGVtZW50YXRpb24gZGVwZW5kZW50LlxuICAgKlxuICAgKiBAcmV0dXJuIGEgc3RyaW5nIHdpdGggYSBsYW5ndWFnZSBzZW5zaXRpdmUgcmVwcmVzZW50YXRpb24gb2YgdGhlIGRhdGUgcG9ydGlvbiBvZiB0aGlzIGRhdGUuXG4gICAqL1xuICB0b0xvY2FsZURhdGVTdHJpbmcoKTogc3RyaW5nO1xuICB0b0xvY2FsZURhdGVTdHJpbmcobG9jYWxlcz86IHN0cmluZyB8IHN0cmluZ1tdLCBvcHRpb25zPzogSW50bC5EYXRlVGltZUZvcm1hdE9wdGlvbnMpOiBzdHJpbmc7XG4gIHRvTG9jYWxlRGF0ZVN0cmluZyhsb2NhbGVzPzogc3RyaW5nIHwgc3RyaW5nW10sIG9wdGlvbnM/OiBJbnRsLkRhdGVUaW1lRm9ybWF0T3B0aW9ucyk6IHN0cmluZyB7XG4gICAgcmV0dXJuIHRoaXMuX2dEYXRlLnRvTG9jYWxlRGF0ZVN0cmluZyhsb2NhbGVzLCBvcHRpb25zKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcmV0dXJuIHRvTG9jYWxlVGltZVN0cmluZyBvZiBHZW9yZ2lhbiBEYXRlIC5cbiAgICogW0ZvciBtb3JlIGluZm9ybWF0aW9uIHNlZSBqYXZhc2NyaXB0IERhdGUgb2JqZWN0IGRvY3VtZW50YXRpb24gYWJvdXQgdGhpcyBtZXRob2Rde0BsaW5rIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0phdmFTY3JpcHQvUmVmZXJlbmNlL0dsb2JhbF9PYmplY3RzL0RhdGUvdG9Mb2NhbGVUaW1lU3RyaW5nfVxuICAgKi9cbiAgdG9Mb2NhbGVUaW1lU3RyaW5nKCk6IHN0cmluZztcbiAgdG9Mb2NhbGVUaW1lU3RyaW5nKGxvY2FsZXM/OiBzdHJpbmcgfCBzdHJpbmdbXSwgb3B0aW9ucz86IEludGwuRGF0ZVRpbWVGb3JtYXRPcHRpb25zKTogc3RyaW5nO1xuICB0b0xvY2FsZVRpbWVTdHJpbmcobG9jYWxlcz86IHN0cmluZyB8IHN0cmluZ1tdLCBvcHRpb25zPzogSW50bC5EYXRlVGltZUZvcm1hdE9wdGlvbnMpOiBzdHJpbmcge1xuICAgIHJldHVybiB0aGlzLl9nRGF0ZS50b0xvY2FsZVRpbWVTdHJpbmcobG9jYWxlcywgb3B0aW9ucyk7XG4gIH1cblxuICAvKipcbiAgICogQHJldHVybiB0b1RpbWVTdHJpbmcgb2YgR2VvcmdpYW4gZGF0ZVxuICAgKlxuICAgKiBbRm9yIG1vcmUgaW5mb3JtYXRpb24gc2VlIGphdmFzY3JpcHQgRGF0ZSBvYmplY3QgZG9jdW1lbnRhdGlvbiBhYm91dCB0aGlzIG1ldGhvZF17QGxpbmsgaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvSmF2YVNjcmlwdC9SZWZlcmVuY2UvR2xvYmFsX09iamVjdHMvRGF0ZS90b1RpbWVTdHJpbmd9XG4gICAqL1xuICB0b1RpbWVTdHJpbmcoKTogc3RyaW5nIHtcbiAgICByZXR1cm4gdGhpcy5fZ0RhdGUudG9UaW1lU3RyaW5nKCk7XG4gIH1cblxuICAvKipcbiAgICogQHJldHVybiB0b1VUQ1N0cmluZyBvZiBHZW9yZ2lhbiBkYXRlLlxuICAgKlxuICAgKiBbRm9yIG1vcmUgaW5mb3JtYXRpb24gc2VlIGphdmFzY3JpcHQgRGF0ZSBvYmplY3QgZG9jdW1lbnRhdGlvbiBhYm91dCB0aGlzIG1ldGhvZF17QGxpbmsgaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvSmF2YVNjcmlwdC9SZWZlcmVuY2UvR2xvYmFsX09iamVjdHMvRGF0ZS90b1VUQ1N0cmluZ31cbiAgICogQHRvZG8gYWRkIGltcGxlbWVudGF0aW9uXG4gICAqL1xuICB0b1VUQ1N0cmluZygpOiBzdHJpbmcge1xuICAgIHJldHVybiB0aGlzLl9nRGF0ZS50b1VUQ1N0cmluZygpO1xuICB9XG5cbiAgLyoqXG4gICAqIFNpbWlsYXIgdG8gdGhlIGdldFRpbWUgbWV0aG9kLlxuICAgKlxuICAgKiBbRm9yIG1vcmUgaW5mb3JtYXRpb24gYWxzbyBzZWUgZ2V0VGltZSBtZXRob2Rde0BsaW5rIGdldFRpbWV9XG4gICAqL1xuICB2YWx1ZU9mKCk6IG51bWJlciB7XG4gICAgcmV0dXJuIHRoaXMuZ2V0VGltZSgpO1xuICB9XG5cbiAgYWRkTW9udGgoaW5jVmFsdWU6IG51bWJlcik6IHZvaWQge1xuICAgIC8vIGxldCBuZXdNb250aDogbnVtYmVyID0gKHRoaXMuZ2V0TW9udGgoKSArIGluY1ZhbHVlKSAlIDExO1xuICAgIC8vIGxldCBwYXNzZWRZZWFyczogbnVtYmVyID0gdGhpcy5nZXRGdWxsWWVhcigpICsgbmV3TW9udGggLyAxMTtcbiAgICAvLyBsZXQgbmV3WWVhcjogbnVtYmVyID0gbmV3TW9udGggPT09IDAgPyA7XG4gICAgLy8gdGhpcy5zZXRGdWxsWWVhcihuZXdZZWFyKTtcbiAgICAvLyB0aGlzLnNldE1vbnRoKG5ld01vbnRoICUgMTEpO1xuICB9XG59XG5cbiJdfQ==