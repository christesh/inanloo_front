/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import * as tslib_1 from "tslib";
import { Injectable } from '@angular/core';
import { InvalidMobilePhoneNumberError } from './InvalidMobilePhoneNumber.error';
import { InvalidMobileOperatorError } from './InvalidMobileOperator.error';
import * as i0 from "@angular/core";
/** @enum {string} */
var operatorsNames = {
    irancell: 'ایرانسل',
    mci: 'همراه اول',
    talia: 'تالیا',
    rightel: 'رایتل',
    spadan: 'اسپادان',
    tkc: 'شبکه مستقل تلفن همراه کیش',
    shatel: 'شاتل',
    aptel: 'آپتل',
    azartel: 'آذرتل',
    samantel: 'سامانتل',
    lotustel: 'لوتوس‌تل',
    anarestan: 'انارستان',
};
export { operatorsNames };
/**
 * A constant object. Keys are Mobile operator names and values are arrays those keep mobile codes.
 * @type {?}
 */
export var MobileCodes = {
    irancell: ['0901', '0902', '0903', '0904', '0905', '0930', '0933', '0935', '0936', '0937', '0938', '0939', '0941'],
    mci: ['0910', '0911', '0912', '0913', '0914', '0915', '0916', '0917', '0918', '0919', '0990', '0991', '0992'],
    talia: ['0932'],
    rightel: ['0920', '0921', '0922'],
    spadan: ['0931'],
    tkc: ['0934'],
    shatel: ['099810', '099811', '099812'],
    aptel: ['099910', '099911', '099913'],
    azartel: ['099914'],
    samantel: ['099996', '099997', '099998', '099999'],
    lotustel: ['09990'],
    anarestan: ['09944']
};
/**
 * This service using for validating phone numbers sold by Iranian Mobile operators.
 *
 * You can get operator name and validation result of a phone number by methods of this service.
 */
var MobilePhoneNumberService = /** @class */ (function () {
    function MobilePhoneNumberService() {
    }
    /**
     * This method only checks if phoneNumber follows valid pattern. means starting by +98 or 0, then a 9 digit and then 9 digits.
     * This method will not check validity of the phoneNumber code and can accept invalid strings those only locking like phone numbers and
     * in reality are not a valid phone number.
     * @link isValidPhoneNumber
     * @param phoneNumber Digits in this string should be english digits.
     */
    /**
     * This method only checks if phoneNumber follows valid pattern. means starting by +98 or 0, then a 9 digit and then 9 digits.
     * This method will not check validity of the phoneNumber code and can accept invalid strings those only locking like phone numbers and
     * in reality are not a valid phone number.
     * @link isValidPhoneNumber
     * @param {?} phoneNumber Digits in this string should be english digits.
     * @return {?}
     */
    MobilePhoneNumberService.prototype.isPhoneNumberPatternValid = /**
     * This method only checks if phoneNumber follows valid pattern. means starting by +98 or 0, then a 9 digit and then 9 digits.
     * This method will not check validity of the phoneNumber code and can accept invalid strings those only locking like phone numbers and
     * in reality are not a valid phone number.
     * @link isValidPhoneNumber
     * @param {?} phoneNumber Digits in this string should be english digits.
     * @return {?}
     */
    function (phoneNumber) {
        /** @type {?} */
        var generalRegex = new RegExp(/^((\+98|0)9\d{9})$/);
        return generalRegex.test(phoneNumber);
    };
    /**
     * Removes +98 from the phoneNumber and replaces it with a 0 character.
     * @param phoneNumber Digits in this string should be english digits.
     */
    /**
     * Removes +98 from the phoneNumber and replaces it with a 0 character.
     * @param {?} phoneNumber Digits in this string should be english digits.
     * @return {?}
     */
    MobilePhoneNumberService.prototype.normalizePhoneNumber = /**
     * Removes +98 from the phoneNumber and replaces it with a 0 character.
     * @param {?} phoneNumber Digits in this string should be english digits.
     * @return {?}
     */
    function (phoneNumber) {
        return phoneNumber.replace('+98', '0');
    };
    /**
     * Checks all codes of all operators in MobileCodes object. IF finds a matched code, returns persian or english name of that operator from
     * operatorsNames enum.
     * @return operator name in english or persian according to the nameInEnglish parameter
     * @throws InvalidMobileOperatorError if pattern is correct but operator code is not valid.
     * @throws InvalidMobilePhoneNumberError If pattern is not correct
     * @param phoneNumber Digits in this string should be english digits.
     * @param nameInEnglish if true, operator name will return in English. if false operator name will return in persian
     * @link MobileCodes
     * @link operatorsNames
     */
    /**
     * Checks all codes of all operators in MobileCodes object. IF finds a matched code, returns persian or english name of that operator from
     * operatorsNames enum.
     * @throws InvalidMobileOperatorError if pattern is correct but operator code is not valid. / InvalidMobilePhoneNumberError If pattern is not correct
     * @link MobileCodes / operatorsNames
     * @param {?} phoneNumber Digits in this string should be english digits.
     * @param {?=} nameInEnglish if true, operator name will return in English. if false operator name will return in persian
     * @return {?} operator name in english or persian according to the nameInEnglish parameter
     */
    MobilePhoneNumberService.prototype.getPhoneNumberOperator = /**
     * Checks all codes of all operators in MobileCodes object. IF finds a matched code, returns persian or english name of that operator from
     * operatorsNames enum.
     * @throws InvalidMobileOperatorError if pattern is correct but operator code is not valid. / InvalidMobilePhoneNumberError If pattern is not correct
     * @link MobileCodes / operatorsNames
     * @param {?} phoneNumber Digits in this string should be english digits.
     * @param {?=} nameInEnglish if true, operator name will return in English. if false operator name will return in persian
     * @return {?} operator name in english or persian according to the nameInEnglish parameter
     */
    function (phoneNumber, nameInEnglish) {
        var e_1, _a, e_2, _b;
        if (nameInEnglish === void 0) { nameInEnglish = false; }
        if (!this.isPhoneNumberPatternValid(phoneNumber)) {
            throw new InvalidMobilePhoneNumberError();
        }
        phoneNumber = this.normalizePhoneNumber(phoneNumber);
        try {
            for (var _c = tslib_1.__values(Object.keys(MobileCodes)), _d = _c.next(); !_d.done; _d = _c.next()) {
                var operator = _d.value;
                try {
                    for (var _e = tslib_1.__values(MobileCodes[operator]), _f = _e.next(); !_f.done; _f = _e.next()) {
                        var code = _f.value;
                        if (phoneNumber.indexOf(code) === 0) {
                            return nameInEnglish ? operator : operatorsNames[operator];
                        }
                    }
                }
                catch (e_2_1) { e_2 = { error: e_2_1 }; }
                finally {
                    try {
                        if (_f && !_f.done && (_b = _e.return)) _b.call(_e);
                    }
                    finally { if (e_2) throw e_2.error; }
                }
            }
        }
        catch (e_1_1) { e_1 = { error: e_1_1 }; }
        finally {
            try {
                if (_d && !_d.done && (_a = _c.return)) _a.call(_c);
            }
            finally { if (e_1) throw e_1.error; }
        }
        throw new InvalidMobileOperatorError();
    };
    /**
     * @return If phoneNumber follows correct pattern and has valid operator, return true. Otherwise returns false.
     * @param phoneNumber Digits in this string should be english digits.
     * @link getPhoneNumberOperator
     */
    /**
     * @link getPhoneNumberOperator
     * @param {?} phoneNumber Digits in this string should be english digits.
     * @return {?} If phoneNumber follows correct pattern and has valid operator, return true. Otherwise returns false.
     */
    MobilePhoneNumberService.prototype.isValidPhoneNumber = /**
     * @link getPhoneNumberOperator
     * @param {?} phoneNumber Digits in this string should be english digits.
     * @return {?} If phoneNumber follows correct pattern and has valid operator, return true. Otherwise returns false.
     */
    function (phoneNumber) {
        try {
            this.getPhoneNumberOperator(phoneNumber);
            return true;
        }
        catch (e) {
            return false;
        }
    };
    MobilePhoneNumberService.decorators = [
        { type: Injectable, args: [{
                    providedIn: 'root'
                },] }
    ];
    /** @nocollapse */ MobilePhoneNumberService.ngInjectableDef = i0.ɵɵdefineInjectable({ factory: function MobilePhoneNumberService_Factory() { return new MobilePhoneNumberService(); }, token: MobilePhoneNumberService, providedIn: "root" });
    return MobilePhoneNumberService;
}());
export { MobilePhoneNumberService };
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibW9iaWxlLXBob25lLW51bWJlci5zZXJ2aWNlLmpzIiwic291cmNlUm9vdCI6Im5nOi8vbmd4LXBlcnNpYW4vIiwic291cmNlcyI6WyJsaWIvU2VydmljZXMvbW9iaWxlLXBob25lLW51bWJlci5zZXJ2aWNlLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7O0FBQUEsT0FBTyxFQUFFLFVBQVUsRUFBRSxNQUFNLGVBQWUsQ0FBQztBQUMzQyxPQUFPLEVBQUMsNkJBQTZCLEVBQUMsTUFBTSxrQ0FBa0MsQ0FBQztBQUMvRSxPQUFPLEVBQUMsMEJBQTBCLEVBQUMsTUFBTSwrQkFBK0IsQ0FBQzs7OztJQU92RSxVQUFXLFNBQVM7SUFDcEIsS0FBTSxXQUFXO0lBQ2pCLE9BQVEsT0FBTztJQUNmLFNBQVUsT0FBTztJQUNqQixRQUFTLFNBQVM7SUFDbEIsS0FBTSwyQkFBMkI7SUFDakMsUUFBUyxNQUFNO0lBQ2YsT0FBUSxNQUFNO0lBQ2QsU0FBVSxPQUFPO0lBQ2pCLFVBQVcsU0FBUztJQUNwQixVQUFXLFVBQVU7SUFDckIsV0FBWSxVQUFVOzs7Ozs7O0FBTXhCLE1BQU0sS0FBTyxXQUFXLEdBQUc7SUFDekIsUUFBUSxFQUFFLENBQUMsTUFBTSxFQUFFLE1BQU0sRUFBRSxNQUFNLEVBQUUsTUFBTSxFQUFFLE1BQU0sRUFBRSxNQUFNLEVBQUUsTUFBTSxFQUFFLE1BQU0sRUFBRSxNQUFNLEVBQUUsTUFBTSxFQUFFLE1BQU0sRUFBRSxNQUFNLEVBQUUsTUFBTSxDQUFDO0lBQ2xILEdBQUcsRUFBRSxDQUFDLE1BQU0sRUFBRSxNQUFNLEVBQUUsTUFBTSxFQUFFLE1BQU0sRUFBRSxNQUFNLEVBQUUsTUFBTSxFQUFFLE1BQU0sRUFBRSxNQUFNLEVBQUUsTUFBTSxFQUFFLE1BQU0sRUFBRSxNQUFNLEVBQUUsTUFBTSxFQUFFLE1BQU0sQ0FBQztJQUM3RyxLQUFLLEVBQUUsQ0FBQyxNQUFNLENBQUM7SUFDZixPQUFPLEVBQUUsQ0FBQyxNQUFNLEVBQUUsTUFBTSxFQUFFLE1BQU0sQ0FBQztJQUNqQyxNQUFNLEVBQUUsQ0FBQyxNQUFNLENBQUM7SUFDaEIsR0FBRyxFQUFFLENBQUMsTUFBTSxDQUFDO0lBQ2IsTUFBTSxFQUFFLENBQUMsUUFBUSxFQUFFLFFBQVEsRUFBRSxRQUFRLENBQUM7SUFDdEMsS0FBSyxFQUFFLENBQUMsUUFBUSxFQUFFLFFBQVEsRUFBRSxRQUFRLENBQUM7SUFDckMsT0FBTyxFQUFFLENBQUMsUUFBUSxDQUFDO0lBQ25CLFFBQVEsRUFBRSxDQUFDLFFBQVEsRUFBRSxRQUFRLEVBQUUsUUFBUSxFQUFFLFFBQVEsQ0FBQztJQUNsRCxRQUFRLEVBQUUsQ0FBQyxPQUFPLENBQUM7SUFDbkIsU0FBUyxFQUFFLENBQUMsT0FBTyxDQUFDO0NBQ3JCOzs7Ozs7QUFPRDtJQUFBO0tBOERDO0lBekRDOzs7Ozs7T0FNRzs7Ozs7Ozs7O0lBQ0gsNERBQXlCOzs7Ozs7OztJQUF6QixVQUEwQixXQUFtQjs7WUFDckMsWUFBWSxHQUFHLElBQUksTUFBTSxDQUFDLG9CQUFvQixDQUFDO1FBQ3JELE9BQU8sWUFBWSxDQUFDLElBQUksQ0FBQyxXQUFXLENBQUMsQ0FBQztJQUN4QyxDQUFDO0lBRUQ7OztPQUdHOzs7Ozs7SUFDSCx1REFBb0I7Ozs7O0lBQXBCLFVBQXFCLFdBQW1CO1FBQ3RDLE9BQU8sV0FBVyxDQUFDLE9BQU8sQ0FBQyxLQUFLLEVBQUUsR0FBRyxDQUFDLENBQUM7SUFDekMsQ0FBQztJQUVEOzs7Ozs7Ozs7O09BVUc7Ozs7Ozs7Ozs7SUFDSCx5REFBc0I7Ozs7Ozs7OztJQUF0QixVQUF1QixXQUFtQixFQUFFLGFBQThCOztRQUE5Qiw4QkFBQSxFQUFBLHFCQUE4QjtRQUN4RSxJQUFJLENBQUMsSUFBSSxDQUFDLHlCQUF5QixDQUFDLFdBQVcsQ0FBQyxFQUFFO1lBQUUsTUFBTSxJQUFJLDZCQUE2QixFQUFFLENBQUM7U0FBRTtRQUNoRyxXQUFXLEdBQUcsSUFBSSxDQUFDLG9CQUFvQixDQUFDLFdBQVcsQ0FBQyxDQUFDOztZQUNyRCxLQUF1QixJQUFBLEtBQUEsaUJBQUEsTUFBTSxDQUFDLElBQUksQ0FBQyxXQUFXLENBQUMsQ0FBQSxnQkFBQSw0QkFBRTtnQkFBNUMsSUFBTSxRQUFRLFdBQUE7O29CQUNqQixLQUFtQixJQUFBLEtBQUEsaUJBQUEsV0FBVyxDQUFDLFFBQVEsQ0FBQyxDQUFBLGdCQUFBLDRCQUFFO3dCQUFyQyxJQUFNLElBQUksV0FBQTt3QkFDYixJQUFJLFdBQVcsQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxFQUFFOzRCQUNuQyxPQUFPLGFBQWEsQ0FBQyxDQUFDLENBQUMsUUFBUSxDQUFDLENBQUMsQ0FBQyxjQUFjLENBQUMsUUFBUSxDQUFDLENBQUM7eUJBQzVEO3FCQUNGOzs7Ozs7Ozs7YUFDRjs7Ozs7Ozs7O1FBQ0QsTUFBTSxJQUFJLDBCQUEwQixFQUFFLENBQUM7SUFDekMsQ0FBQztJQUVEOzs7O09BSUc7Ozs7OztJQUNILHFEQUFrQjs7Ozs7SUFBbEIsVUFBbUIsV0FBbUI7UUFDcEMsSUFBSTtZQUNGLElBQUksQ0FBQyxzQkFBc0IsQ0FBQyxXQUFXLENBQUMsQ0FBQztZQUN6QyxPQUFPLElBQUksQ0FBQztTQUNiO1FBQUMsT0FBTyxDQUFDLEVBQUU7WUFDVixPQUFPLEtBQUssQ0FBQztTQUNkO0lBQ0gsQ0FBQzs7Z0JBN0RGLFVBQVUsU0FBQztvQkFDVixVQUFVLEVBQUUsTUFBTTtpQkFDbkI7OzttQ0FoREQ7Q0E0R0MsQUE5REQsSUE4REM7U0EzRFksd0JBQXdCIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgSW5qZWN0YWJsZSB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuaW1wb3J0IHtJbnZhbGlkTW9iaWxlUGhvbmVOdW1iZXJFcnJvcn0gZnJvbSAnLi9JbnZhbGlkTW9iaWxlUGhvbmVOdW1iZXIuZXJyb3InO1xuaW1wb3J0IHtJbnZhbGlkTW9iaWxlT3BlcmF0b3JFcnJvcn0gZnJvbSAnLi9JbnZhbGlkTW9iaWxlT3BlcmF0b3IuZXJyb3InO1xuXG4vKipcbiAqIEVuZ2xpc2ggbmFtZSBvZiBtb2JpbGUgb3BlcmF0b3JzIGFyZSBlbnVtIGtleXMgYW5kIHBlcnNpYW4gbmFtZSBvZiB0aGVtIGFyZSB2YWx1ZXMuXG4gKiBBbGwgY2hhcmFjdGVycyBvZiBhbGwgb2YgdGhlIGtleXMgYXJlIGluIGxvd2VyY2FzZVxuICovXG5leHBvcnQgZW51bSBvcGVyYXRvcnNOYW1lcyB7XG4gIGlyYW5jZWxsID0gJ9in24zYsdin2YbYs9mEJyxcbiAgbWNpID0gJ9mH2YXYsdin2Ycg2KfZiNmEJyxcbiAgdGFsaWEgPSAn2KrYp9mE24zYpycsXG4gIHJpZ2h0ZWwgPSAn2LHYp9uM2KrZhCcsXG4gIHNwYWRhbiA9ICfYp9iz2b7Yp9iv2KfZhicsXG4gIHRrYyA9ICfYtNio2qnZhyDZhdiz2KrZgtmEINiq2YTZgdmGINmH2YXYsdin2Ycg2qnbjNi0JyxcbiAgc2hhdGVsID0gJ9i02KfYqtmEJyxcbiAgYXB0ZWwgPSAn2KLZvtiq2YQnLFxuICBhemFydGVsID0gJ9ii2LDYsdiq2YQnLFxuICBzYW1hbnRlbCA9ICfYs9in2YXYp9mG2KrZhCcsXG4gIGxvdHVzdGVsID0gJ9mE2YjYqtmI2LPigIzYqtmEJyxcbiAgYW5hcmVzdGFuID0gJ9in2YbYp9ix2LPYqtin2YYnXG59XG5cbi8qKlxuICogQSBjb25zdGFudCBvYmplY3QuIEtleXMgYXJlIE1vYmlsZSBvcGVyYXRvciBuYW1lcyBhbmQgdmFsdWVzIGFyZSBhcnJheXMgdGhvc2Uga2VlcCBtb2JpbGUgY29kZXMuXG4gKi9cbmV4cG9ydCBjb25zdCBNb2JpbGVDb2RlcyA9IHtcbiAgaXJhbmNlbGw6IFsnMDkwMScsICcwOTAyJywgJzA5MDMnLCAnMDkwNCcsICcwOTA1JywgJzA5MzAnLCAnMDkzMycsICcwOTM1JywgJzA5MzYnLCAnMDkzNycsICcwOTM4JywgJzA5MzknLCAnMDk0MSddLFxuICBtY2k6IFsnMDkxMCcsICcwOTExJywgJzA5MTInLCAnMDkxMycsICcwOTE0JywgJzA5MTUnLCAnMDkxNicsICcwOTE3JywgJzA5MTgnLCAnMDkxOScsICcwOTkwJywgJzA5OTEnLCAnMDk5MiddLFxuICB0YWxpYTogWycwOTMyJ10sXG4gIHJpZ2h0ZWw6IFsnMDkyMCcsICcwOTIxJywgJzA5MjInXSxcbiAgc3BhZGFuOiBbJzA5MzEnXSxcbiAgdGtjOiBbJzA5MzQnXSxcbiAgc2hhdGVsOiBbJzA5OTgxMCcsICcwOTk4MTEnLCAnMDk5ODEyJ10sXG4gIGFwdGVsOiBbJzA5OTkxMCcsICcwOTk5MTEnLCAnMDk5OTEzJ10sXG4gIGF6YXJ0ZWw6IFsnMDk5OTE0J10sXG4gIHNhbWFudGVsOiBbJzA5OTk5NicsICcwOTk5OTcnLCAnMDk5OTk4JywgJzA5OTk5OSddLFxuICBsb3R1c3RlbDogWycwOTk5MCddLFxuICBhbmFyZXN0YW46IFsnMDk5NDQnXVxufTtcblxuLyoqXG4gKiBUaGlzIHNlcnZpY2UgdXNpbmcgZm9yIHZhbGlkYXRpbmcgcGhvbmUgbnVtYmVycyBzb2xkIGJ5IElyYW5pYW4gTW9iaWxlIG9wZXJhdG9ycy5cbiAqXG4gKiBZb3UgY2FuIGdldCBvcGVyYXRvciBuYW1lIGFuZCB2YWxpZGF0aW9uIHJlc3VsdCBvZiBhIHBob25lIG51bWJlciBieSBtZXRob2RzIG9mIHRoaXMgc2VydmljZS5cbiAqL1xuQEluamVjdGFibGUoe1xuICBwcm92aWRlZEluOiAncm9vdCdcbn0pXG5leHBvcnQgY2xhc3MgTW9iaWxlUGhvbmVOdW1iZXJTZXJ2aWNlIHtcblxuICAvKipcbiAgICogVGhpcyBtZXRob2Qgb25seSBjaGVja3MgaWYgcGhvbmVOdW1iZXIgZm9sbG93cyB2YWxpZCBwYXR0ZXJuLiBtZWFucyBzdGFydGluZyBieSArOTggb3IgMCwgdGhlbiBhIDkgZGlnaXQgYW5kIHRoZW4gOSBkaWdpdHMuXG4gICAqIFRoaXMgbWV0aG9kIHdpbGwgbm90IGNoZWNrIHZhbGlkaXR5IG9mIHRoZSBwaG9uZU51bWJlciBjb2RlIGFuZCBjYW4gYWNjZXB0IGludmFsaWQgc3RyaW5ncyB0aG9zZSBvbmx5IGxvY2tpbmcgbGlrZSBwaG9uZSBudW1iZXJzIGFuZFxuICAgKiBpbiByZWFsaXR5IGFyZSBub3QgYSB2YWxpZCBwaG9uZSBudW1iZXIuXG4gICAqIEBsaW5rIGlzVmFsaWRQaG9uZU51bWJlclxuICAgKiBAcGFyYW0gcGhvbmVOdW1iZXIgRGlnaXRzIGluIHRoaXMgc3RyaW5nIHNob3VsZCBiZSBlbmdsaXNoIGRpZ2l0cy5cbiAgICovXG4gIGlzUGhvbmVOdW1iZXJQYXR0ZXJuVmFsaWQocGhvbmVOdW1iZXI6IHN0cmluZyk6IGJvb2xlYW4ge1xuICAgIGNvbnN0IGdlbmVyYWxSZWdleCA9IG5ldyBSZWdFeHAoL14oKFxcKzk4fDApOVxcZHs5fSkkLyk7XG4gICAgcmV0dXJuIGdlbmVyYWxSZWdleC50ZXN0KHBob25lTnVtYmVyKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZW1vdmVzICs5OCBmcm9tIHRoZSBwaG9uZU51bWJlciBhbmQgcmVwbGFjZXMgaXQgd2l0aCBhIDAgY2hhcmFjdGVyLlxuICAgKiBAcGFyYW0gcGhvbmVOdW1iZXIgRGlnaXRzIGluIHRoaXMgc3RyaW5nIHNob3VsZCBiZSBlbmdsaXNoIGRpZ2l0cy5cbiAgICovXG4gIG5vcm1hbGl6ZVBob25lTnVtYmVyKHBob25lTnVtYmVyOiBzdHJpbmcpOiBzdHJpbmcge1xuICAgIHJldHVybiBwaG9uZU51bWJlci5yZXBsYWNlKCcrOTgnLCAnMCcpO1xuICB9XG5cbiAgLyoqXG4gICAqIENoZWNrcyBhbGwgY29kZXMgb2YgYWxsIG9wZXJhdG9ycyBpbiBNb2JpbGVDb2RlcyBvYmplY3QuIElGIGZpbmRzIGEgbWF0Y2hlZCBjb2RlLCByZXR1cm5zIHBlcnNpYW4gb3IgZW5nbGlzaCBuYW1lIG9mIHRoYXQgb3BlcmF0b3IgZnJvbVxuICAgKiBvcGVyYXRvcnNOYW1lcyBlbnVtLlxuICAgKiBAcmV0dXJuIG9wZXJhdG9yIG5hbWUgaW4gZW5nbGlzaCBvciBwZXJzaWFuIGFjY29yZGluZyB0byB0aGUgbmFtZUluRW5nbGlzaCBwYXJhbWV0ZXJcbiAgICogQHRocm93cyBJbnZhbGlkTW9iaWxlT3BlcmF0b3JFcnJvciBpZiBwYXR0ZXJuIGlzIGNvcnJlY3QgYnV0IG9wZXJhdG9yIGNvZGUgaXMgbm90IHZhbGlkLlxuICAgKiBAdGhyb3dzIEludmFsaWRNb2JpbGVQaG9uZU51bWJlckVycm9yIElmIHBhdHRlcm4gaXMgbm90IGNvcnJlY3RcbiAgICogQHBhcmFtIHBob25lTnVtYmVyIERpZ2l0cyBpbiB0aGlzIHN0cmluZyBzaG91bGQgYmUgZW5nbGlzaCBkaWdpdHMuXG4gICAqIEBwYXJhbSBuYW1lSW5FbmdsaXNoIGlmIHRydWUsIG9wZXJhdG9yIG5hbWUgd2lsbCByZXR1cm4gaW4gRW5nbGlzaC4gaWYgZmFsc2Ugb3BlcmF0b3IgbmFtZSB3aWxsIHJldHVybiBpbiBwZXJzaWFuXG4gICAqIEBsaW5rIE1vYmlsZUNvZGVzXG4gICAqIEBsaW5rIG9wZXJhdG9yc05hbWVzXG4gICAqL1xuICBnZXRQaG9uZU51bWJlck9wZXJhdG9yKHBob25lTnVtYmVyOiBzdHJpbmcsIG5hbWVJbkVuZ2xpc2g6IGJvb2xlYW4gPSBmYWxzZSk6IHN0cmluZyB7XG4gICAgaWYgKCF0aGlzLmlzUGhvbmVOdW1iZXJQYXR0ZXJuVmFsaWQocGhvbmVOdW1iZXIpKSB7IHRocm93IG5ldyBJbnZhbGlkTW9iaWxlUGhvbmVOdW1iZXJFcnJvcigpOyB9XG4gICAgcGhvbmVOdW1iZXIgPSB0aGlzLm5vcm1hbGl6ZVBob25lTnVtYmVyKHBob25lTnVtYmVyKTtcbiAgICBmb3IgKGNvbnN0IG9wZXJhdG9yIG9mIE9iamVjdC5rZXlzKE1vYmlsZUNvZGVzKSkge1xuICAgICAgZm9yIChjb25zdCBjb2RlIG9mIE1vYmlsZUNvZGVzW29wZXJhdG9yXSkge1xuICAgICAgICBpZiAocGhvbmVOdW1iZXIuaW5kZXhPZihjb2RlKSA9PT0gMCkge1xuICAgICAgICAgIHJldHVybiBuYW1lSW5FbmdsaXNoID8gb3BlcmF0b3IgOiBvcGVyYXRvcnNOYW1lc1tvcGVyYXRvcl07XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgdGhyb3cgbmV3IEludmFsaWRNb2JpbGVPcGVyYXRvckVycm9yKCk7XG4gIH1cblxuICAvKipcbiAgICogQHJldHVybiBJZiBwaG9uZU51bWJlciBmb2xsb3dzIGNvcnJlY3QgcGF0dGVybiBhbmQgaGFzIHZhbGlkIG9wZXJhdG9yLCByZXR1cm4gdHJ1ZS4gT3RoZXJ3aXNlIHJldHVybnMgZmFsc2UuXG4gICAqIEBwYXJhbSBwaG9uZU51bWJlciBEaWdpdHMgaW4gdGhpcyBzdHJpbmcgc2hvdWxkIGJlIGVuZ2xpc2ggZGlnaXRzLlxuICAgKiBAbGluayBnZXRQaG9uZU51bWJlck9wZXJhdG9yXG4gICAqL1xuICBpc1ZhbGlkUGhvbmVOdW1iZXIocGhvbmVOdW1iZXI6IHN0cmluZyk6IGJvb2xlYW4ge1xuICAgIHRyeSB7XG4gICAgICB0aGlzLmdldFBob25lTnVtYmVyT3BlcmF0b3IocGhvbmVOdW1iZXIpO1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgfVxufVxuIl19