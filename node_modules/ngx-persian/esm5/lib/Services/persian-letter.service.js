/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import { Injectable } from '@angular/core';
import { PersianNumberService } from './persian-number.service';
import * as i0 from "@angular/core";
/**
 * isPersian options parameter object should implement this interface. Fields descriptions are in the isPersian method document.
 * @record
 */
export function PLOptions() { }
if (false) {
    /** @type {?|undefined} */
    PLOptions.prototype.persianDigits;
    /** @type {?|undefined} */
    PLOptions.prototype.enDigits;
    /** @type {?|undefined} */
    PLOptions.prototype.symbols;
    /** @type {?|undefined} */
    PLOptions.prototype.whitespaces;
}
var PersianLetterService = /** @class */ (function () {
    function PersianLetterService() {
    }
    /**
     * According to the options values, returns a RegExp object. The regex pattern of it contains regex of finding each of
     * elements those specified in the options object plus persian letters.
     * @return a RegExp object that can use in searching a string for special characters (persian letters and others specified in the options)
     * @param options
     */
    /**
     * According to the options values, returns a RegExp object. The regex pattern of it contains regex of finding each of
     * elements those specified in the options object plus persian letters.
     * @private
     * @param {?} options
     * @return {?} a RegExp object that can use in searching a string for special characters (persian letters and others specified in the options)
     */
    PersianLetterService._stringValidationRegex = /**
     * According to the options values, returns a RegExp object. The regex pattern of it contains regex of finding each of
     * elements those specified in the options object plus persian letters.
     * @private
     * @param {?} options
     * @return {?} a RegExp object that can use in searching a string for special characters (persian letters and others specified in the options)
     */
    function (options) {
        /** @type {?} */
        var result = '';
        if (options.enDigits) {
            result += '0-9';
        }
        if (options.symbols) {
            result += PersianLetterService.SYMBOLS_PATTERN;
        }
        if (options.whitespaces) {
            result += PersianLetterService.WHITESPACES_PATTERN;
        }
        if (options.persianDigits) {
            result += PersianNumberService.persianNumberPattern;
        }
        // language=JSRegexp
        return new RegExp("[" + (result + PersianLetterService.PERSIAN_LETTERS_PATTERN) + "]", 'g');
    };
    /**
     * This method gets regex of persian letters and other chars specified in the options and then splits the input value by that regex.
     *
     * If match result is null - there is no match - returns 0. otherwise returns length of the match array that shows number of matched
     * occurred in the input value.
     * @param value
     * @param options
     * @return a number greater equal to 0 representing number of matches occurred in the input value.
     */
    /**
     * This method gets regex of persian letters and other chars specified in the options and then splits the input value by that regex.
     *
     * If match result is null - there is no match - returns 0. otherwise returns length of the match array that shows number of matched
     * occurred in the input value.
     * @private
     * @param {?} value
     * @param {?} options
     * @return {?} a number greater equal to 0 representing number of matches occurred in the input value.
     */
    PersianLetterService._getMatchedPatternLength = /**
     * This method gets regex of persian letters and other chars specified in the options and then splits the input value by that regex.
     *
     * If match result is null - there is no match - returns 0. otherwise returns length of the match array that shows number of matched
     * occurred in the input value.
     * @private
     * @param {?} value
     * @param {?} options
     * @return {?} a number greater equal to 0 representing number of matches occurred in the input value.
     */
    function (value, options) {
        /** @type {?} */
        var matchResult = value.match(PersianLetterService._stringValidationRegex(options));
        return matchResult ? matchResult.length : 0;
    };
    /**
     * If input value contains any persian letter or is an empty string, returns true. otherwise returns false.
     * @param value
     */
    /**
     * If input value contains any persian letter or is an empty string, returns true. otherwise returns false.
     * @param {?} value
     * @return {?}
     */
    PersianLetterService.prototype.containsPersian = /**
     * If input value contains any persian letter or is an empty string, returns true. otherwise returns false.
     * @param {?} value
     * @return {?}
     */
    function (value) {
        if (value === undefined || value === null) {
            return false;
        }
        // language=JSRegexp
        /** @type {?} */
        var persianRegex = new RegExp("[" + PersianLetterService.PERSIAN_LETTERS_PATTERN + "]");
        return value.trim() ? persianRegex.test(value) : true;
    };
    /**
     * Checks if input value is a persian text or not. If input value contains any letter that is not persian, the output will be false.
     * Result of validation on existence  of other characters controls by options parameter.
     * @param value
     * @param options controlling validation result on existence  of other characters controls by options parameter. Fields:
     *
     *        persianDigits: if sets to true, validation result will be true if input value contains persian digits plus persian letters.
     *
     *
     *        enDigits: if sets to true, validation result will be true if input value contains english digits plus persian letters
     *
     *
     *        symbols: if sets to true, validation result will be true if input value contains specific symbols plus persian letters.
     *                 symbols list: ?$-/:؟!~"'^_-[]{}()%&*><;
     *
     *
     *        whitespaces: if sets to true, validation result will be true if input value contains white spaces plus persian letters
     *
     *
     * You can combine any number of options field together.
     */
    /**
     * Checks if input value is a persian text or not. If input value contains any letter that is not persian, the output will be false.
     * Result of validation on existence  of other characters controls by options parameter.
     * @param {?} value
     * @param {?=} options controlling validation result on existence  of other characters controls by options parameter. Fields:
     *
     *        persianDigits: if sets to true, validation result will be true if input value contains persian digits plus persian letters.
     *
     *
     *        enDigits: if sets to true, validation result will be true if input value contains english digits plus persian letters
     *
     *
     *        symbols: if sets to true, validation result will be true if input value contains specific symbols plus persian letters.
     *                 symbols list: ?$-/:؟!~"'^_-[]{}()%&*><;
     *
     *
     *        whitespaces: if sets to true, validation result will be true if input value contains white spaces plus persian letters
     *
     *
     * You can combine any number of options field together.
     * @return {?}
     */
    PersianLetterService.prototype.isPersian = /**
     * Checks if input value is a persian text or not. If input value contains any letter that is not persian, the output will be false.
     * Result of validation on existence  of other characters controls by options parameter.
     * @param {?} value
     * @param {?=} options controlling validation result on existence  of other characters controls by options parameter. Fields:
     *
     *        persianDigits: if sets to true, validation result will be true if input value contains persian digits plus persian letters.
     *
     *
     *        enDigits: if sets to true, validation result will be true if input value contains english digits plus persian letters
     *
     *
     *        symbols: if sets to true, validation result will be true if input value contains specific symbols plus persian letters.
     *                 symbols list: ?$-/:؟!~"'^_-[]{}()%&*><;
     *
     *
     *        whitespaces: if sets to true, validation result will be true if input value contains white spaces plus persian letters
     *
     *
     * You can combine any number of options field together.
     * @return {?}
     */
    function (value, options) {
        if (options === void 0) { options = {
            persianDigits: false,
            enDigits: false,
            symbols: true,
            whitespaces: true
        }; }
        if (value === undefined || value === null) {
            return false;
        }
        return value.length === PersianLetterService._getMatchedPatternLength(value, options);
    };
    /**
     * Converts arabic letters: ي and ك to persian corresponding letters.
     * @param value
     */
    /**
     * Converts arabic letters: ي and ك to persian corresponding letters.
     * @param {?} value
     * @return {?}
     */
    PersianLetterService.prototype.toPersian = /**
     * Converts arabic letters: ي and ك to persian corresponding letters.
     * @param {?} value
     * @return {?}
     */
    function (value) {
        return value.replace(/ي/g, 'ی').replace(/ك/g, 'ک');
    };
    PersianLetterService.PERSIAN_LETTERS_PATTERN = '\u06A9\u06AF\u06C0\u06CC\u060C\u062A\u062B\u062C\u062D\u062E\u062F\u063A\u064A\u064B\u064C' +
        '\u064D\u064E\u064F\u067E\u0670\u0686\u0698\u200C\u0621-\u0629\u0630-\u0639\u0641-\u0654';
    PersianLetterService.SYMBOLS_PATTERN = '؟$-/:-?،{-~!"^_`\\[\\]';
    PersianLetterService.WHITESPACES_PATTERN = '\\s';
    PersianLetterService.decorators = [
        { type: Injectable, args: [{
                    providedIn: 'root'
                },] }
    ];
    /** @nocollapse */ PersianLetterService.ngInjectableDef = i0.ɵɵdefineInjectable({ factory: function PersianLetterService_Factory() { return new PersianLetterService(); }, token: PersianLetterService, providedIn: "root" });
    return PersianLetterService;
}());
export { PersianLetterService };
if (false) {
    /** @type {?} */
    PersianLetterService.PERSIAN_LETTERS_PATTERN;
    /**
     * @type {?}
     * @private
     */
    PersianLetterService.SYMBOLS_PATTERN;
    /** @type {?} */
    PersianLetterService.WHITESPACES_PATTERN;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicGVyc2lhbi1sZXR0ZXIuc2VydmljZS5qcyIsInNvdXJjZVJvb3QiOiJuZzovL25neC1wZXJzaWFuLyIsInNvdXJjZXMiOlsibGliL1NlcnZpY2VzL3BlcnNpYW4tbGV0dGVyLnNlcnZpY2UudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7OztBQUFBLE9BQU8sRUFBRSxVQUFVLEVBQUUsTUFBTSxlQUFlLENBQUM7QUFFM0MsT0FBTyxFQUFDLG9CQUFvQixFQUFDLE1BQU0sMEJBQTBCLENBQUM7Ozs7OztBQUs5RCwrQkFLQzs7O0lBSkMsa0NBQXdCOztJQUN4Qiw2QkFBbUI7O0lBQ25CLDRCQUFrQjs7SUFDbEIsZ0NBQXNCOztBQUd4QjtJQUFBO0tBNkZDO0lBL0VDOzs7OztPQUtHOzs7Ozs7OztJQUNZLDJDQUFzQjs7Ozs7OztJQUFyQyxVQUFzQyxPQUFrQjs7WUFDbEQsTUFBTSxHQUFHLEVBQUU7UUFDZixJQUFJLE9BQU8sQ0FBQyxRQUFRLEVBQUU7WUFBRSxNQUFNLElBQUksS0FBSyxDQUFDO1NBQUU7UUFDMUMsSUFBSSxPQUFPLENBQUMsT0FBTyxFQUFFO1lBQUUsTUFBTSxJQUFJLG9CQUFvQixDQUFDLGVBQWUsQ0FBQztTQUFFO1FBQ3hFLElBQUksT0FBTyxDQUFDLFdBQVcsRUFBRTtZQUFFLE1BQU0sSUFBSSxvQkFBb0IsQ0FBQyxtQkFBbUIsQ0FBQztTQUFFO1FBQ2hGLElBQUksT0FBTyxDQUFDLGFBQWEsRUFBRTtZQUFFLE1BQU0sSUFBSSxvQkFBb0IsQ0FBQyxvQkFBb0IsQ0FBQztTQUFFO1FBQ25GLG9CQUFvQjtRQUNwQixPQUFPLElBQUksTUFBTSxDQUFDLE9BQUksTUFBTSxHQUFHLG9CQUFvQixDQUFDLHVCQUF1QixPQUFHLEVBQUUsR0FBRyxDQUFDLENBQUM7SUFDdkYsQ0FBQztJQUVEOzs7Ozs7OztPQVFHOzs7Ozs7Ozs7OztJQUNZLDZDQUF3Qjs7Ozs7Ozs7OztJQUF2QyxVQUF3QyxLQUFhLEVBQUUsT0FBa0I7O1lBQ2pFLFdBQVcsR0FBRyxLQUFLLENBQUMsS0FBSyxDQUFDLG9CQUFvQixDQUFDLHNCQUFzQixDQUFDLE9BQU8sQ0FBQyxDQUFDO1FBQ3JGLE9BQU8sV0FBVyxDQUFDLENBQUMsQ0FBQyxXQUFXLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7SUFDOUMsQ0FBQztJQUVEOzs7T0FHRzs7Ozs7O0lBQ0gsOENBQWU7Ozs7O0lBQWYsVUFBZ0IsS0FBYTtRQUMzQixJQUFJLEtBQUssS0FBSyxTQUFTLElBQUksS0FBSyxLQUFLLElBQUksRUFBRTtZQUFFLE9BQU8sS0FBSyxDQUFDO1NBQUU7OztZQUV0RCxZQUFZLEdBQUcsSUFBSSxNQUFNLENBQUMsTUFBSSxvQkFBb0IsQ0FBQyx1QkFBdUIsTUFBRyxDQUFDO1FBQ3BGLE9BQU8sS0FBSyxDQUFDLElBQUksRUFBRSxDQUFDLENBQUMsQ0FBQyxZQUFZLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUM7SUFDeEQsQ0FBQztJQUVEOzs7Ozs7Ozs7Ozs7Ozs7Ozs7OztPQW9CRzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7SUFDSCx3Q0FBUzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztJQUFULFVBQVUsS0FBYSxFQUFFLE9BSXlDO1FBSnpDLHdCQUFBLEVBQUE7WUFDdUIsYUFBYSxFQUFFLEtBQUs7WUFDcEIsUUFBUSxFQUFFLEtBQUs7WUFDZixPQUFPLEVBQUUsSUFBSTtZQUNiLFdBQVcsRUFBRSxJQUFJO1NBQUM7UUFDaEUsSUFBSSxLQUFLLEtBQUssU0FBUyxJQUFJLEtBQUssS0FBSyxJQUFJLEVBQUU7WUFBRSxPQUFPLEtBQUssQ0FBQztTQUFFO1FBQzVELE9BQU8sS0FBSyxDQUFDLE1BQU0sS0FBSyxvQkFBb0IsQ0FBQyx3QkFBd0IsQ0FBQyxLQUFLLEVBQUUsT0FBTyxDQUFDLENBQUM7SUFDeEYsQ0FBQztJQUVEOzs7T0FHRzs7Ozs7O0lBQ0gsd0NBQVM7Ozs7O0lBQVQsVUFBVSxLQUFhO1FBQ3JCLE9BQU8sS0FBSyxDQUFDLE9BQU8sQ0FBQyxJQUFJLEVBQUUsR0FBRyxDQUFDLENBQUMsT0FBTyxDQUFDLElBQUksRUFBRSxHQUFHLENBQUMsQ0FBQztJQUNyRCxDQUFDO0lBbEZNLDRDQUF1QixHQUFHLDRGQUE0RjtRQUN4Rix5RkFBeUYsQ0FBQztJQUNoSCxvQ0FBZSxHQUFHLHdCQUF3QixDQUFDO0lBQ25ELHdDQUFtQixHQUFHLEtBQUssQ0FBQzs7Z0JBWnBDLFVBQVUsU0FBQztvQkFDVixVQUFVLEVBQUUsTUFBTTtpQkFDbkI7OzsrQkFoQkQ7Q0EyR0MsQUE3RkQsSUE2RkM7U0F0Rlksb0JBQW9COzs7SUFFL0IsNkNBQytIOzs7OztJQUMvSCxxQ0FBMEQ7O0lBQzFELHlDQUFtQyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEluamVjdGFibGUgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcbmltcG9ydCB7UGVyc2lhblNlcnZpY2V9IGZyb20gJy4vcGVyc2lhbi1zZXJ2aWNlJztcbmltcG9ydCB7UGVyc2lhbk51bWJlclNlcnZpY2V9IGZyb20gJy4vcGVyc2lhbi1udW1iZXIuc2VydmljZSc7XG5cbi8qKlxuICogaXNQZXJzaWFuIG9wdGlvbnMgcGFyYW1ldGVyIG9iamVjdCBzaG91bGQgaW1wbGVtZW50IHRoaXMgaW50ZXJmYWNlLiBGaWVsZHMgZGVzY3JpcHRpb25zIGFyZSBpbiB0aGUgaXNQZXJzaWFuIG1ldGhvZCBkb2N1bWVudC5cbiAqL1xuZXhwb3J0IGludGVyZmFjZSBQTE9wdGlvbnMge1xuICBwZXJzaWFuRGlnaXRzPzogYm9vbGVhbjtcbiAgZW5EaWdpdHM/OiBib29sZWFuO1xuICBzeW1ib2xzPzogYm9vbGVhbjtcbiAgd2hpdGVzcGFjZXM/OiBib29sZWFuO1xufVxuXG5ASW5qZWN0YWJsZSh7XG4gIHByb3ZpZGVkSW46ICdyb290J1xufSlcbi8qKlxuICogVGhpcyBzZXJ2aWNlIGJyaW5ncyB2YWxpZGF0aW9uIG9mIHBlcnNpYW4gdGV4dHMgdG8gdGhlIHByb2dyYW0gYW5kIGxldCB5b3UgY29udmVydCBzb21lIG5vdC1wZXJzaWFuIGxldHRlcnMgd2l0aCBwZXJzaWFuIG9uZXMuXG4gKlxuICovXG5leHBvcnQgY2xhc3MgUGVyc2lhbkxldHRlclNlcnZpY2UgaW1wbGVtZW50cyBQZXJzaWFuU2VydmljZSB7XG5cbiAgc3RhdGljIFBFUlNJQU5fTEVUVEVSU19QQVRURVJOID0gJ1xcdTA2QTlcXHUwNkFGXFx1MDZDMFxcdTA2Q0NcXHUwNjBDXFx1MDYyQVxcdTA2MkJcXHUwNjJDXFx1MDYyRFxcdTA2MkVcXHUwNjJGXFx1MDYzQVxcdTA2NEFcXHUwNjRCXFx1MDY0QycgK1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ1xcdTA2NERcXHUwNjRFXFx1MDY0RlxcdTA2N0VcXHUwNjcwXFx1MDY4NlxcdTA2OThcXHUyMDBDXFx1MDYyMS1cXHUwNjI5XFx1MDYzMC1cXHUwNjM5XFx1MDY0MS1cXHUwNjU0JztcbiAgcHJpdmF0ZSBzdGF0aWMgU1lNQk9MU19QQVRURVJOID0gJ9ifJC0vOi0/2Ix7LX4hXCJeX2BcXFxcW1xcXFxdJztcbiAgc3RhdGljIFdISVRFU1BBQ0VTX1BBVFRFUk4gPSAnXFxcXHMnO1xuXG4gIC8qKlxuICAgKiBBY2NvcmRpbmcgdG8gdGhlIG9wdGlvbnMgdmFsdWVzLCByZXR1cm5zIGEgUmVnRXhwIG9iamVjdC4gVGhlIHJlZ2V4IHBhdHRlcm4gb2YgaXQgY29udGFpbnMgcmVnZXggb2YgZmluZGluZyBlYWNoIG9mXG4gICAqIGVsZW1lbnRzIHRob3NlIHNwZWNpZmllZCBpbiB0aGUgb3B0aW9ucyBvYmplY3QgcGx1cyBwZXJzaWFuIGxldHRlcnMuXG4gICAqIEByZXR1cm4gYSBSZWdFeHAgb2JqZWN0IHRoYXQgY2FuIHVzZSBpbiBzZWFyY2hpbmcgYSBzdHJpbmcgZm9yIHNwZWNpYWwgY2hhcmFjdGVycyAocGVyc2lhbiBsZXR0ZXJzIGFuZCBvdGhlcnMgc3BlY2lmaWVkIGluIHRoZSBvcHRpb25zKVxuICAgKiBAcGFyYW0gb3B0aW9uc1xuICAgKi9cbiAgcHJpdmF0ZSBzdGF0aWMgX3N0cmluZ1ZhbGlkYXRpb25SZWdleChvcHRpb25zOiBQTE9wdGlvbnMpOiBSZWdFeHAge1xuICAgIGxldCByZXN1bHQgPSAnJztcbiAgICBpZiAob3B0aW9ucy5lbkRpZ2l0cykgeyByZXN1bHQgKz0gJzAtOSc7IH1cbiAgICBpZiAob3B0aW9ucy5zeW1ib2xzKSB7IHJlc3VsdCArPSBQZXJzaWFuTGV0dGVyU2VydmljZS5TWU1CT0xTX1BBVFRFUk47IH1cbiAgICBpZiAob3B0aW9ucy53aGl0ZXNwYWNlcykgeyByZXN1bHQgKz0gUGVyc2lhbkxldHRlclNlcnZpY2UuV0hJVEVTUEFDRVNfUEFUVEVSTjsgfVxuICAgIGlmIChvcHRpb25zLnBlcnNpYW5EaWdpdHMpIHsgcmVzdWx0ICs9IFBlcnNpYW5OdW1iZXJTZXJ2aWNlLnBlcnNpYW5OdW1iZXJQYXR0ZXJuOyB9XG4gICAgLy8gbGFuZ3VhZ2U9SlNSZWdleHBcbiAgICByZXR1cm4gbmV3IFJlZ0V4cChgWyR7cmVzdWx0ICsgUGVyc2lhbkxldHRlclNlcnZpY2UuUEVSU0lBTl9MRVRURVJTX1BBVFRFUk59XWAsICdnJyk7XG4gIH1cblxuICAvKipcbiAgICogVGhpcyBtZXRob2QgZ2V0cyByZWdleCBvZiBwZXJzaWFuIGxldHRlcnMgYW5kIG90aGVyIGNoYXJzIHNwZWNpZmllZCBpbiB0aGUgb3B0aW9ucyBhbmQgdGhlbiBzcGxpdHMgdGhlIGlucHV0IHZhbHVlIGJ5IHRoYXQgcmVnZXguXG4gICAqXG4gICAqIElmIG1hdGNoIHJlc3VsdCBpcyBudWxsIC0gdGhlcmUgaXMgbm8gbWF0Y2ggLSByZXR1cm5zIDAuIG90aGVyd2lzZSByZXR1cm5zIGxlbmd0aCBvZiB0aGUgbWF0Y2ggYXJyYXkgdGhhdCBzaG93cyBudW1iZXIgb2YgbWF0Y2hlZFxuICAgKiBvY2N1cnJlZCBpbiB0aGUgaW5wdXQgdmFsdWUuXG4gICAqIEBwYXJhbSB2YWx1ZVxuICAgKiBAcGFyYW0gb3B0aW9uc1xuICAgKiBAcmV0dXJuIGEgbnVtYmVyIGdyZWF0ZXIgZXF1YWwgdG8gMCByZXByZXNlbnRpbmcgbnVtYmVyIG9mIG1hdGNoZXMgb2NjdXJyZWQgaW4gdGhlIGlucHV0IHZhbHVlLlxuICAgKi9cbiAgcHJpdmF0ZSBzdGF0aWMgX2dldE1hdGNoZWRQYXR0ZXJuTGVuZ3RoKHZhbHVlOiBzdHJpbmcsIG9wdGlvbnM6IFBMT3B0aW9ucyk6IG51bWJlciB7XG4gICAgY29uc3QgbWF0Y2hSZXN1bHQgPSB2YWx1ZS5tYXRjaChQZXJzaWFuTGV0dGVyU2VydmljZS5fc3RyaW5nVmFsaWRhdGlvblJlZ2V4KG9wdGlvbnMpKTtcbiAgICByZXR1cm4gbWF0Y2hSZXN1bHQgPyBtYXRjaFJlc3VsdC5sZW5ndGggOiAwO1xuICB9XG5cbiAgLyoqXG4gICAqIElmIGlucHV0IHZhbHVlIGNvbnRhaW5zIGFueSBwZXJzaWFuIGxldHRlciBvciBpcyBhbiBlbXB0eSBzdHJpbmcsIHJldHVybnMgdHJ1ZS4gb3RoZXJ3aXNlIHJldHVybnMgZmFsc2UuXG4gICAqIEBwYXJhbSB2YWx1ZVxuICAgKi9cbiAgY29udGFpbnNQZXJzaWFuKHZhbHVlOiBzdHJpbmcpOiBib29sZWFuIHtcbiAgICBpZiAodmFsdWUgPT09IHVuZGVmaW5lZCB8fCB2YWx1ZSA9PT0gbnVsbCkgeyByZXR1cm4gZmFsc2U7IH1cbiAgICAvLyBsYW5ndWFnZT1KU1JlZ2V4cFxuICAgIGNvbnN0IHBlcnNpYW5SZWdleCA9IG5ldyBSZWdFeHAoYFske1BlcnNpYW5MZXR0ZXJTZXJ2aWNlLlBFUlNJQU5fTEVUVEVSU19QQVRURVJOfV1gKTtcbiAgICByZXR1cm4gdmFsdWUudHJpbSgpID8gcGVyc2lhblJlZ2V4LnRlc3QodmFsdWUpIDogdHJ1ZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDaGVja3MgaWYgaW5wdXQgdmFsdWUgaXMgYSBwZXJzaWFuIHRleHQgb3Igbm90LiBJZiBpbnB1dCB2YWx1ZSBjb250YWlucyBhbnkgbGV0dGVyIHRoYXQgaXMgbm90IHBlcnNpYW4sIHRoZSBvdXRwdXQgd2lsbCBiZSBmYWxzZS5cbiAgICogUmVzdWx0IG9mIHZhbGlkYXRpb24gb24gZXhpc3RlbmNlICBvZiBvdGhlciBjaGFyYWN0ZXJzIGNvbnRyb2xzIGJ5IG9wdGlvbnMgcGFyYW1ldGVyLlxuICAgKiBAcGFyYW0gdmFsdWVcbiAgICogQHBhcmFtIG9wdGlvbnMgY29udHJvbGxpbmcgdmFsaWRhdGlvbiByZXN1bHQgb24gZXhpc3RlbmNlICBvZiBvdGhlciBjaGFyYWN0ZXJzIGNvbnRyb2xzIGJ5IG9wdGlvbnMgcGFyYW1ldGVyLiBGaWVsZHM6XG4gICAqXG4gICAqICAgICAgICBwZXJzaWFuRGlnaXRzOiBpZiBzZXRzIHRvIHRydWUsIHZhbGlkYXRpb24gcmVzdWx0IHdpbGwgYmUgdHJ1ZSBpZiBpbnB1dCB2YWx1ZSBjb250YWlucyBwZXJzaWFuIGRpZ2l0cyBwbHVzIHBlcnNpYW4gbGV0dGVycy5cbiAgICpcbiAgICpcbiAgICogICAgICAgIGVuRGlnaXRzOiBpZiBzZXRzIHRvIHRydWUsIHZhbGlkYXRpb24gcmVzdWx0IHdpbGwgYmUgdHJ1ZSBpZiBpbnB1dCB2YWx1ZSBjb250YWlucyBlbmdsaXNoIGRpZ2l0cyBwbHVzIHBlcnNpYW4gbGV0dGVyc1xuICAgKlxuICAgKlxuICAgKiAgICAgICAgc3ltYm9sczogaWYgc2V0cyB0byB0cnVlLCB2YWxpZGF0aW9uIHJlc3VsdCB3aWxsIGJlIHRydWUgaWYgaW5wdXQgdmFsdWUgY29udGFpbnMgc3BlY2lmaWMgc3ltYm9scyBwbHVzIHBlcnNpYW4gbGV0dGVycy5cbiAgICogICAgICAgICAgICAgICAgIHN5bWJvbHMgbGlzdDogPyQtLzrYnyF+XCInXl8tW117fSgpJSYqPjw7XG4gICAqXG4gICAqXG4gICAqICAgICAgICB3aGl0ZXNwYWNlczogaWYgc2V0cyB0byB0cnVlLCB2YWxpZGF0aW9uIHJlc3VsdCB3aWxsIGJlIHRydWUgaWYgaW5wdXQgdmFsdWUgY29udGFpbnMgd2hpdGUgc3BhY2VzIHBsdXMgcGVyc2lhbiBsZXR0ZXJzXG4gICAqXG4gICAqXG4gICAqIFlvdSBjYW4gY29tYmluZSBhbnkgbnVtYmVyIG9mIG9wdGlvbnMgZmllbGQgdG9nZXRoZXIuXG4gICAqL1xuICBpc1BlcnNpYW4odmFsdWU6IHN0cmluZywgb3B0aW9uczogUExPcHRpb25zID0ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwZXJzaWFuRGlnaXRzOiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5EaWdpdHM6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzeW1ib2xzOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aGl0ZXNwYWNlczogdHJ1ZX0pOiBib29sZWFuIHtcbiAgICBpZiAodmFsdWUgPT09IHVuZGVmaW5lZCB8fCB2YWx1ZSA9PT0gbnVsbCkgeyByZXR1cm4gZmFsc2U7IH1cbiAgICByZXR1cm4gdmFsdWUubGVuZ3RoID09PSBQZXJzaWFuTGV0dGVyU2VydmljZS5fZ2V0TWF0Y2hlZFBhdHRlcm5MZW5ndGgodmFsdWUsIG9wdGlvbnMpO1xuICB9XG5cbiAgLyoqXG4gICAqIENvbnZlcnRzIGFyYWJpYyBsZXR0ZXJzOiDZiiBhbmQg2YMgdG8gcGVyc2lhbiBjb3JyZXNwb25kaW5nIGxldHRlcnMuXG4gICAqIEBwYXJhbSB2YWx1ZVxuICAgKi9cbiAgdG9QZXJzaWFuKHZhbHVlOiBzdHJpbmcpOiBzdHJpbmcge1xuICAgIHJldHVybiB2YWx1ZS5yZXBsYWNlKC/Zii9nLCAn24wnKS5yZXBsYWNlKC/Zgy9nLCAn2qknKTtcbiAgfVxuXG59XG4iXX0=