/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import { JalaliDateCalculatorService } from './jalali-date-calculator.service';
import { InvalidJalaliDateError } from './InvalidJalaliDate.error';
import { JalaliDateValidatorService } from './jalali-date-validator.service';
/**
 * This class represents a complete Date object for Jalali dates. It accepts jalali Dates, converts Georgian dates to jalali and implements
 * all the behaviours of default Date object of JavaScript for Jalali Date, plus some additional methods for developers convenience.
 *
 * ATTENTION:
 *
 * UTC methods are not implemented for Jalali date. They working directly on gDate object (Corresponding date in Georgian) and changing
 * properties of this. Then new JDate object will create from the modified Georgian Date. So they may Cause unpredictable behaviour.
 * Please don't use UTC methods with "todo" tag on them unless you are sure about the behaviour.
 * Recreating objects are safer than working with UTC methods.
 */
var JDate = /** @class */ (function () {
    /**
     * For creating a JDate object, you have 5 different options.
     *
     * 1- If you want to have current date and time, you can simply call new JDate() without any parameter.
     *
     * 2- If you want to create JDate object from a jalali date string as described in the `pars` method document, you can pass that string as
     *    first parameter and leave others empty.
     *
     * 3 - If you want to create JDate object from number of passed milliseconds from UNIX epoch (for example creating a Jalali date object
     *     from result of getTime method of another Date object), you can pass the number as first parameter and leave others alone.
     *
     * 4 - If you want to create JDate object from a Georgian Date object, you can simply pass that Date object as first parameter and leave
     *     others empty.
     *
     * 5- If you want to create JDate object from date and time values, you can simply fill corresponding parameters of each date and time
     * value to the constructor. You don't have to fill all of the parameters. only those you need. other parameters will fill with zero.
     * Examples of all of those scenarios:
     *
     * @example new JDate()
     * @example new JDate('11 دی 1348 00:00:00')
     * @example new JDate(-12600000)
     * @example new JDate(new Date(2018, 0, 1))
     * @example new JDate(1397, 0, 25)
     * @example new JDate(1397, 11, 25, 12, 32, 45, 123)
     * @param jYear
     * @param jMonth Month number starting from 0 and should be LESSER than 12.
     * @param jDay
     * @param hours
     * @param minutes
     * @param seconds
     * @param milliseconds
     * @throws InvalidJalaliDateError
     */
    function JDate(jYear, jMonth, jDay, hours, minutes, seconds, milliseconds) {
        if (hours === void 0) { hours = 0; }
        if (minutes === void 0) { minutes = 0; }
        if (seconds === void 0) { seconds = 0; }
        if (milliseconds === void 0) { milliseconds = 0; }
        this._calculator = new JalaliDateCalculatorService(new JalaliDateValidatorService());
        if (!jYear) {
            this._createFromDate(new Date());
        }
        else if (typeof jYear === 'string' && jMonth === undefined) {
            this._createFromDate(new Date(JDate.parse(jYear)));
        }
        else if (typeof jYear === 'number' && jMonth === undefined) {
            this._createFromDate(new Date(jYear));
        }
        else if (jYear instanceof Date && jMonth === undefined) {
            this._createFromDate(jYear);
        }
        else {
            // @ts-ignore
            this._gDate = this._calculator.convertToGeorgian(jYear, jMonth, jDay);
            // @ts-ignore
            this._jYear = jYear;
            this._jMonth = jMonth;
            this._jDay = jDay;
            this._gDate.setHours(hours, minutes, seconds, milliseconds);
        }
        this._check_date_validity();
    }
    /**
     * If input value length is shorter than desiredLength, adds zeros at the beginning of it until meets desired length.
     * @param value a number or string that we want have a specific length
     * @param desiredLength length of output string. If be shorter than input length, input will return.
     */
    /**
     * If input value length is shorter than desiredLength, adds zeros at the beginning of it until meets desired length.
     * @param {?} value a number or string that we want have a specific length
     * @param {?} desiredLength length of output string. If be shorter than input length, input will return.
     * @return {?}
     */
    JDate.zeroPadding = /**
     * If input value length is shorter than desiredLength, adds zeros at the beginning of it until meets desired length.
     * @param {?} value a number or string that we want have a specific length
     * @param {?} desiredLength length of output string. If be shorter than input length, input will return.
     * @return {?}
     */
    function (value, desiredLength) {
        value = value.toString();
        while (value.length < desiredLength) {
            value = '0' + value;
        }
        return value;
    };
    /**
     * Extracts Georgian Date object from a Jalali date string.
     * @param dateString a Jalali date string following this pattern:
     *
     *        "yyyy mmm dd HH:MM:SS"
     *        or this pattern:
     *
     *        "yyyy mmmm dd HH:MM:SS".
     * @example 11 دی 1348 00:00:00
     * @example 11 Dey 1348 00:00:00
     * @return a Georgian Date object.
     */
    /**
     * Extracts Georgian Date object from a Jalali date string.
     * \@example 11 دی 1348 00:00:00 / 11 Dey 1348 00:00:00
     * @param {?} dateString a Jalali date string following this pattern:
     *
     *        "yyyy mmm dd HH:MM:SS"
     *        or this pattern:
     *
     *        "yyyy mmmm dd HH:MM:SS".
     * @return {?} a Georgian Date object.
     */
    JDate.parse = /**
     * Extracts Georgian Date object from a Jalali date string.
     * \@example 11 دی 1348 00:00:00 / 11 Dey 1348 00:00:00
     * @param {?} dateString a Jalali date string following this pattern:
     *
     *        "yyyy mmm dd HH:MM:SS"
     *        or this pattern:
     *
     *        "yyyy mmmm dd HH:MM:SS".
     * @return {?} a Georgian Date object.
     */
    function (dateString) {
        /** @type {?} */
        var calculator = new JalaliDateCalculatorService(new JalaliDateValidatorService());
        /** @type {?} */
        var dateArray = dateString.split(' ');
        if (dateArray.length < 3) {
            throw new InvalidJalaliDateError();
        }
        /** @type {?} */
        var day = parseInt(dateArray[0]);
        /** @type {?} */
        var month = JDate.FA_MONTHS.indexOf(dateArray[1]);
        if (month === -1) {
            month = JDate.EN_MONTHS.indexOf(dateArray[1]);
        }
        if (month === -1) {
            throw new InvalidJalaliDateError();
        }
        /** @type {?} */
        var year = parseInt(dateArray[2]);
        /** @type {?} */
        var timeArray = dateArray.length > 3 ? dateArray[3].split(':') : ['0', '0', '0'];
        /** @type {?} */
        var hour = parseInt(timeArray[0]);
        /** @type {?} */
        var min = parseInt(timeArray[1]);
        /** @type {?} */
        var sec = parseInt(timeArray[2]);
        /** @type {?} */
        var gDate = calculator.convertToGeorgian(year, month, day);
        gDate.setHours(hour, min, sec);
        return gDate.getTime();
    };
    /**
     * This method recalculates the gDate value with private attributes those storing Jalali date parts.
     */
    /**
     * This method recalculates the gDate value with private attributes those storing Jalali date parts.
     * @private
     * @return {?}
     */
    JDate.prototype._renewGDate = /**
     * This method recalculates the gDate value with private attributes those storing Jalali date parts.
     * @private
     * @return {?}
     */
    function () {
        this._gDate = this._calculator.convertToGeorgian(this._jYear, this._jMonth, this._jDay);
    };
    Object.defineProperty(JDate.prototype, "jYear", {
        /**
         * Sets Jalali year value to the input parameter and recalculates gDate attribute.
         * @param value full Jalali year like 1397
         */
        set: /**
         * Sets Jalali year value to the input parameter and recalculates gDate attribute.
         * @private
         * @param {?} value full Jalali year like 1397
         * @return {?}
         */
        function (value) {
            this._jYear = value;
            this._check_date_validity();
            this._renewGDate();
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(JDate.prototype, "jMonth", {
        /**
         * Sets Jalali month value to the input parameter and recalculates gDate attribute.
         * @param value month number starting from zero
         */
        set: /**
         * Sets Jalali month value to the input parameter and recalculates gDate attribute.
         * @private
         * @param {?} value month number starting from zero
         * @return {?}
         */
        function (value) {
            this._jMonth = value;
            this._check_date_validity();
            this._renewGDate();
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(JDate.prototype, "jDay", {
        /**
         * Sets Jalali day value to the input parameter and recalculates gDate attribute.
         * @param value day number starting from 1.
         */
        set: /**
         * Sets Jalali day value to the input parameter and recalculates gDate attribute.
         * @private
         * @param {?} value day number starting from 1.
         * @return {?}
         */
        function (value) {
            this._jDay = value;
            this._check_date_validity();
            this._renewGDate();
        },
        enumerable: true,
        configurable: true
    });
    /**
     * throws InvalidJalaliDateError when date values of this object won't represent a valid Jalali date.
     * Otherwise nothing happens.
     * @throws InvalidJalaliDateError
     */
    /**
     * throws InvalidJalaliDateError when date values of this object won't represent a valid Jalali date.
     * Otherwise nothing happens.
     * @throws InvalidJalaliDateError
     * @private
     * @return {?}
     */
    JDate.prototype._check_date_validity = /**
     * throws InvalidJalaliDateError when date values of this object won't represent a valid Jalali date.
     * Otherwise nothing happens.
     * @throws InvalidJalaliDateError
     * @private
     * @return {?}
     */
    function () {
        if (!this._calculator.validator.isValidJDate(this._jYear, this._jMonth, this._jDay)) {
            throw new InvalidJalaliDateError();
        }
    };
    /**
     * Calculates Jalali year from Georgian Date object and sets the attributes of the object to proper values.
     * @param gDate
     */
    /**
     * Calculates Jalali year from Georgian Date object and sets the attributes of the object to proper values.
     * @private
     * @param {?} gDate
     * @return {?}
     */
    JDate.prototype._createFromDate = /**
     * Calculates Jalali year from Georgian Date object and sets the attributes of the object to proper values.
     * @private
     * @param {?} gDate
     * @return {?}
     */
    function (gDate) {
        /** @type {?} */
        var conversionResult = this._calculator.convertToJalali(gDate);
        this._jYear = conversionResult.year;
        this._jMonth = conversionResult.month;
        this._jDay = conversionResult.day;
        this._gDate = gDate;
    };
    /**
     * @param {?} hint
     * @return {?}
     */
    JDate.prototype[Symbol.toPrimitive] = /**
     * @param {?} hint
     * @return {?}
     */
    function (hint) {
        return undefined;
    };
    /**
     * @return a regular javascript Date object representing Georgian date corresponding to the Jalili date of the JDate object.
     */
    /**
     * @return {?} a regular javascript Date object representing Georgian date corresponding to the Jalili date of the JDate object.
     */
    JDate.prototype.getGeorgianDate = /**
     * @return {?} a regular javascript Date object representing Georgian date corresponding to the Jalili date of the JDate object.
     */
    function () {
        return this._gDate;
    };
    /**
     * @return the day of the month for the specified date according to local time.
     */
    /**
     * @return {?} the day of the month for the specified date according to local time.
     */
    JDate.prototype.getDate = /**
     * @return {?} the day of the month for the specified date according to local time.
     */
    function () {
        return this._jDay;
    };
    /**
     *  @return the day of the week for the specified date according to local time, where 0 represents Friday and 6 is Thursday.
     */
    /**
     * @return {?} the day of the week for the specified date according to local time, where 0 represents Friday and 6 is Thursday.
     */
    JDate.prototype.getDay = /**
     * @return {?} the day of the week for the specified date according to local time, where 0 represents Friday and 6 is Thursday.
     */
    function () {
        return (this._gDate.getDay() + 2) % 7;
    };
    /**
     * @return the year (4 digits for years greater than 999) of the specified date according to local time
     * @example 1397
     * @example 100
     * */
    /**
     * \@example 1397 / 100
     *
     * @return {?} the year (4 digits for years greater than 999) of the specified date according to local time
     */
    JDate.prototype.getFullYear = /**
     * \@example 1397 / 100
     *
     * @return {?} the year (4 digits for years greater than 999) of the specified date according to local time
     */
    function () {
        return this._jYear;
    };
    /**
     * @return the hour for the specified date, according to local time.
     * @example 10
     */
    /**
     * \@example 10
     * @return {?} the hour for the specified date, according to local time.
     */
    JDate.prototype.getHours = /**
     * \@example 10
     * @return {?} the hour for the specified date, according to local time.
     */
    function () {
        return this._gDate.getHours();
    };
    /**
     * Converts default 24-hour clock hour value to the 12-hour clock version.
     * @return a number between 1 to 12
     */
    /**
     * Converts default 24-hour clock hour value to the 12-hour clock version.
     * @return {?} a number between 1 to 12
     */
    JDate.prototype.getHours12hourClock = /**
     * Converts default 24-hour clock hour value to the 12-hour clock version.
     * @return {?} a number between 1 to 12
     */
    function () {
        /** @type {?} */
        var result = this.getHours() % 12;
        return result ? result : 12;
    };
    /**
     * @return the milliseconds in the specified date according to local time.
     */
    /**
     * @return {?} the milliseconds in the specified date according to local time.
     */
    JDate.prototype.getMilliseconds = /**
     * @return {?} the milliseconds in the specified date according to local time.
     */
    function () {
        return this._gDate.getMilliseconds();
    };
    /**
     * @Return the minutes in the specified date according to local time.
     */
    /**
     * \@Return the minutes in the specified date according to local time.
     * @return {?}
     */
    JDate.prototype.getMinutes = /**
     * \@Return the minutes in the specified date according to local time.
     * @return {?}
     */
    function () {
        return this._gDate.getMinutes();
    };
    /**
     * @return the month in the specified date according to local time, as a zero-based value
     * where zero indicates the first month of the year.
     */
    /**
     * @return {?} the month in the specified date according to local time, as a zero-based value
     * where zero indicates the first month of the year.
     */
    JDate.prototype.getMonth = /**
     * @return {?} the month in the specified date according to local time, as a zero-based value
     * where zero indicates the first month of the year.
     */
    function () {
        return this._jMonth;
    };
    /**
     * @return the seconds in the specified date according to local time.
     */
    /**
     * @return {?} the seconds in the specified date according to local time.
     */
    JDate.prototype.getSeconds = /**
     * @return {?} the seconds in the specified date according to local time.
     */
    function () {
        return this._gDate.getSeconds();
    };
    /**
     * JavaScript uses milliseconds as the unit of measurement, whereas Unix Time is in seconds.
     *
     * getTime() always uses UTC for time representation. For example, a client browser in one timezone, getTime() will be the same as a
     * client browser in any other timezone.
     *
     *You can use this method to help assign a date and time to another Date object. This method is functionally equivalent to the valueOf() method.
     * @return the number of milliseconds since the Unix Epoch.
     */
    /**
     * JavaScript uses milliseconds as the unit of measurement, whereas Unix Time is in seconds.
     *
     * getTime() always uses UTC for time representation. For example, a client browser in one timezone, getTime() will be the same as a
     * client browser in any other timezone.
     *
     * You can use this method to help assign a date and time to another Date object. This method is functionally equivalent to the valueOf() method.
     * @return {?} the number of milliseconds since the Unix Epoch.
     */
    JDate.prototype.getTime = /**
     * JavaScript uses milliseconds as the unit of measurement, whereas Unix Time is in seconds.
     *
     * getTime() always uses UTC for time representation. For example, a client browser in one timezone, getTime() will be the same as a
     * client browser in any other timezone.
     *
     * You can use this method to help assign a date and time to another Date object. This method is functionally equivalent to the valueOf() method.
     * @return {?} the number of milliseconds since the Unix Epoch.
     */
    function () {
        return this._gDate.getTime();
    };
    /**
     * Attention: Not implemented
     * @return the time zone difference, in minutes, from current locale (host system settings) to UTC
     * @todo add implementation
     */
    /**
     * Attention: Not implemented
     * \@todo add implementation
     * @return {?} the time zone difference, in minutes, from current locale (host system settings) to UTC
     */
    JDate.prototype.getTimezoneOffset = /**
     * Attention: Not implemented
     * \@todo add implementation
     * @return {?} the time zone difference, in minutes, from current locale (host system settings) to UTC
     */
    function () {
        return this._gDate.getTimezoneOffset();
    };
    /**
     * Output is not jalali day.
     * @return getUTCDate of the corresponding Georgian date.
     * @todo add implementation
     */
    /**
     * Output is not jalali day.
     * \@todo add implementation
     * @return {?} getUTCDate of the corresponding Georgian date.
     */
    JDate.prototype.getUTCDate = /**
     * Output is not jalali day.
     * \@todo add implementation
     * @return {?} getUTCDate of the corresponding Georgian date.
     */
    function () {
        return this._gDate.getUTCDate();
    };
    /**
     * Output is not jalali day.
     * @return getUTCDay of the corresponding Georgian date.
     * @todo add implementation
     */
    /**
     * Output is not jalali day.
     * \@todo add implementation
     * @return {?} getUTCDay of the corresponding Georgian date.
     */
    JDate.prototype.getUTCDay = /**
     * Output is not jalali day.
     * \@todo add implementation
     * @return {?} getUTCDay of the corresponding Georgian date.
     */
    function () {
        return this._gDate.getUTCDay();
    };
    /**
     * Output is not a Jalali Year.
     * @return getUTCFullYear of the corresponding Georgian date.
     * @todo add implementation
     */
    /**
     * Output is not a Jalali Year.
     * \@todo add implementation
     * @return {?} getUTCFullYear of the corresponding Georgian date.
     */
    JDate.prototype.getUTCFullYear = /**
     * Output is not a Jalali Year.
     * \@todo add implementation
     * @return {?} getUTCFullYear of the corresponding Georgian date.
     */
    function () {
        return this._gDate.getUTCFullYear();
    };
    /**
     * @return getUTCHours of the corresponding Georgian date.
     * @todo add implementation
     */
    /**
     * \@todo add implementation
     * @return {?} getUTCHours of the corresponding Georgian date.
     */
    JDate.prototype.getUTCHours = /**
     * \@todo add implementation
     * @return {?} getUTCHours of the corresponding Georgian date.
     */
    function () {
        return this._gDate.getUTCHours();
    };
    /**
     * @return getUTCMilliseconds of the corresponding Georgian date.
     * @todo add implementation
     */
    /**
     * \@todo add implementation
     * @return {?} getUTCMilliseconds of the corresponding Georgian date.
     */
    JDate.prototype.getUTCMilliseconds = /**
     * \@todo add implementation
     * @return {?} getUTCMilliseconds of the corresponding Georgian date.
     */
    function () {
        return this._gDate.getUTCMilliseconds();
    };
    /**
     * @return getUTCMinutes of the corresponding Georgian date.
     * @todo add implementation
     */
    /**
     * \@todo add implementation
     * @return {?} getUTCMinutes of the corresponding Georgian date.
     */
    JDate.prototype.getUTCMinutes = /**
     * \@todo add implementation
     * @return {?} getUTCMinutes of the corresponding Georgian date.
     */
    function () {
        return this._gDate.getUTCMinutes();
    };
    /**
     * Output is not a Jalali Year.
     * @return getUTCMonth of the corresponding Georgian date.
     * @todo add implementation
     */
    /**
     * Output is not a Jalali Year.
     * \@todo add implementation
     * @return {?} getUTCMonth of the corresponding Georgian date.
     */
    JDate.prototype.getUTCMonth = /**
     * Output is not a Jalali Year.
     * \@todo add implementation
     * @return {?} getUTCMonth of the corresponding Georgian date.
     */
    function () {
        return this._gDate.getUTCMonth();
    };
    /**
     * @return getUTCSeconds of the corresponding Georgian date.
     * @todo add implementation
     */
    /**
     * \@todo add implementation
     * @return {?} getUTCSeconds of the corresponding Georgian date.
     */
    JDate.prototype.getUTCSeconds = /**
     * \@todo add implementation
     * @return {?} getUTCSeconds of the corresponding Georgian date.
     */
    function () {
        return this._gDate.getUTCSeconds();
    };
    /**
     * sets the day of the JDate object relative to the beginning of the currently set month.
     * @param date day number starts from 1.
     * @return The number of milliseconds between 1 January 1970 00:00:00 UTC and the given date (the Date object is also changed in place).
     */
    /**
     * sets the day of the JDate object relative to the beginning of the currently set month.
     * @param {?} date day number starts from 1.
     * @return {?} The number of milliseconds between 1 January 1970 00:00:00 UTC and the given date (the Date object is also changed in place).
     */
    JDate.prototype.setDate = /**
     * sets the day of the JDate object relative to the beginning of the currently set month.
     * @param {?} date day number starts from 1.
     * @return {?} The number of milliseconds between 1 January 1970 00:00:00 UTC and the given date (the Date object is also changed in place).
     */
    function (date) {
        this.jDay = date;
        return this.getTime();
    };
    /**
     * sets the full year for a specified date according to local time. Returns new timestamp.
     * @param year full Jalali year like 1397
     * @param month number of month starting from 0
     * @param date number of day starting from 1
     */
    /**
     * sets the full year for a specified date according to local time. Returns new timestamp.
     * @param {?} year full Jalali year like 1397
     * @param {?=} month number of month starting from 0
     * @param {?=} date number of day starting from 1
     * @return {?}
     */
    JDate.prototype.setFullYear = /**
     * sets the full year for a specified date according to local time. Returns new timestamp.
     * @param {?} year full Jalali year like 1397
     * @param {?=} month number of month starting from 0
     * @param {?=} date number of day starting from 1
     * @return {?}
     */
    function (year, month, date) {
        this.jYear = year;
        if (month) {
            this.jMonth = month;
        }
        if (date) {
            this.jDay = date;
        }
        return this.getTime();
    };
    /**
     * Sets the hours for a specified date according to local time, and returns the number of milliseconds since
     * January 1, 1970 00:00:00 UTC until the time represented by the updated JDate instance.
     * @param hours An integer between 0 and 23, representing the hour
     * @param min An integer between 0 and 59, representing the minutes.
     * @param sec An integer between 0 and 59, representing the seconds.
     * @param ms A number between 0 and 999, representing the milliseconds.
     * @return The number of milliseconds between January 1, 1970 00:00:00 UTC and the updated date.
     */
    /**
     * Sets the hours for a specified date according to local time, and returns the number of milliseconds since
     * January 1, 1970 00:00:00 UTC until the time represented by the updated JDate instance.
     * @param {?} hours An integer between 0 and 23, representing the hour
     * @param {?=} min An integer between 0 and 59, representing the minutes.
     * @param {?=} sec An integer between 0 and 59, representing the seconds.
     * @param {?=} ms A number between 0 and 999, representing the milliseconds.
     * @return {?} The number of milliseconds between January 1, 1970 00:00:00 UTC and the updated date.
     */
    JDate.prototype.setHours = /**
     * Sets the hours for a specified date according to local time, and returns the number of milliseconds since
     * January 1, 1970 00:00:00 UTC until the time represented by the updated JDate instance.
     * @param {?} hours An integer between 0 and 23, representing the hour
     * @param {?=} min An integer between 0 and 59, representing the minutes.
     * @param {?=} sec An integer between 0 and 59, representing the seconds.
     * @param {?=} ms A number between 0 and 999, representing the milliseconds.
     * @return {?} The number of milliseconds between January 1, 1970 00:00:00 UTC and the updated date.
     */
    function (hours, min, sec, ms) {
        this._gDate.setHours(hours);
        if (min !== undefined) {
            this.setMinutes(min);
        }
        if (sec !== undefined) {
            this.setSeconds(sec);
        }
        if (ms !== undefined) {
            this.setMilliseconds(ms);
        }
        return this.getTime();
    };
    /**
     * Sets the milliseconds for a specified date according to local time.
     * @param ms A number between 0 and 999, representing the milliseconds.
     * @return The number of milliseconds between 1 January 1970 00:00:00 UTC and the updated date.
     */
    /**
     * Sets the milliseconds for a specified date according to local time.
     * @param {?} ms A number between 0 and 999, representing the milliseconds.
     * @return {?} The number of milliseconds between 1 January 1970 00:00:00 UTC and the updated date.
     */
    JDate.prototype.setMilliseconds = /**
     * Sets the milliseconds for a specified date according to local time.
     * @param {?} ms A number between 0 and 999, representing the milliseconds.
     * @return {?} The number of milliseconds between 1 January 1970 00:00:00 UTC and the updated date.
     */
    function (ms) {
        this._gDate.setMilliseconds(ms);
        return this.getTime();
    };
    /**
     * Sets the minutes for a specified date according to local time.
     * @param min An integer between 0 and 59, representing the minutes.
     * @param sec An integer between 0 and 59, representing the seconds.
     * @param ms A number between 0 and 999, representing the milliseconds.
     * @return The number of milliseconds between 1 January 1970 00:00:00 UTC and the updated date.
     */
    /**
     * Sets the minutes for a specified date according to local time.
     * @param {?} min An integer between 0 and 59, representing the minutes.
     * @param {?=} sec An integer between 0 and 59, representing the seconds.
     * @param {?=} ms A number between 0 and 999, representing the milliseconds.
     * @return {?} The number of milliseconds between 1 January 1970 00:00:00 UTC and the updated date.
     */
    JDate.prototype.setMinutes = /**
     * Sets the minutes for a specified date according to local time.
     * @param {?} min An integer between 0 and 59, representing the minutes.
     * @param {?=} sec An integer between 0 and 59, representing the seconds.
     * @param {?=} ms A number between 0 and 999, representing the milliseconds.
     * @return {?} The number of milliseconds between 1 January 1970 00:00:00 UTC and the updated date.
     */
    function (min, sec, ms) {
        this._gDate.setMinutes(min);
        if (sec !== undefined) {
            this.setSeconds(sec);
        }
        if (ms !== undefined) {
            this.setMilliseconds(ms);
        }
        return this.getTime();
    };
    /**
     * Sets the month for a specified date according to the currently set year.
     * @param month An integer between 0 and 11, representing the months Farvardin through Esfand.
     * @param date An integer from 1 to 31, representing the day of the month.
     * @return The number of milliseconds between 1 January 1970 00:00:00 UTC and the updated date.
     */
    /**
     * Sets the month for a specified date according to the currently set year.
     * @param {?} month An integer between 0 and 11, representing the months Farvardin through Esfand.
     * @param {?=} date An integer from 1 to 31, representing the day of the month.
     * @return {?} The number of milliseconds between 1 January 1970 00:00:00 UTC and the updated date.
     */
    JDate.prototype.setMonth = /**
     * Sets the month for a specified date according to the currently set year.
     * @param {?} month An integer between 0 and 11, representing the months Farvardin through Esfand.
     * @param {?=} date An integer from 1 to 31, representing the day of the month.
     * @return {?} The number of milliseconds between 1 January 1970 00:00:00 UTC and the updated date.
     */
    function (month, date) {
        this.jMonth = month;
        if (date !== undefined) {
            this.jDay = date;
        }
        return this.getTime();
    };
    /**
     * Sets the seconds for a specified date according to local time.
     * @param sec An integer between 0 and 59, representing the seconds.
     * @param ms A number between 0 and 999, representing the milliseconds.
     * @return The number of milliseconds between 1 January 1970 00:00:00 UTC and the updated date.
     */
    /**
     * Sets the seconds for a specified date according to local time.
     * @param {?} sec An integer between 0 and 59, representing the seconds.
     * @param {?=} ms A number between 0 and 999, representing the milliseconds.
     * @return {?} The number of milliseconds between 1 January 1970 00:00:00 UTC and the updated date.
     */
    JDate.prototype.setSeconds = /**
     * Sets the seconds for a specified date according to local time.
     * @param {?} sec An integer between 0 and 59, representing the seconds.
     * @param {?=} ms A number between 0 and 999, representing the milliseconds.
     * @return {?} The number of milliseconds between 1 January 1970 00:00:00 UTC and the updated date.
     */
    function (sec, ms) {
        this._gDate.setSeconds(sec);
        if (ms !== undefined) {
            this.setMilliseconds(ms);
        }
        return this.getTime();
    };
    /**
     * Sets the JDate object to the time represented by a number of milliseconds since January 1, 1970, 00:00:00 UTC.
     * @param time sets the Date object to the time represented by a number of milliseconds since January 1, 1970, 00:00:00 UTC.
     * @return The number of milliseconds between 1 January 1970 00:00:00 UTC and the updated date.
     */
    /**
     * Sets the JDate object to the time represented by a number of milliseconds since January 1, 1970, 00:00:00 UTC.
     * @param {?} time sets the Date object to the time represented by a number of milliseconds since January 1, 1970, 00:00:00 UTC.
     * @return {?} The number of milliseconds between 1 January 1970 00:00:00 UTC and the updated date.
     */
    JDate.prototype.setTime = /**
     * Sets the JDate object to the time represented by a number of milliseconds since January 1, 1970, 00:00:00 UTC.
     * @param {?} time sets the Date object to the time represented by a number of milliseconds since January 1, 1970, 00:00:00 UTC.
     * @return {?} The number of milliseconds between 1 January 1970 00:00:00 UTC and the updated date.
     */
    function (time) {
        this._createFromDate(new Date(time));
        return time;
    };
    /**
     * sets the day of the month for a specified date according to universal time.
     * Then recreate the JDate object from new Georgian object.
     * @param  date An integer from 1 to 31, representing the day of the month.
     * @return The number of milliseconds between 1 January 1970 00:00:00 UTC and the updated date.
     * @todo add implementation
     */
    /**
     * sets the day of the month for a specified date according to universal time.
     * Then recreate the JDate object from new Georgian object.
     * \@todo add implementation
     * @param {?} date An integer from 1 to 31, representing the day of the month.
     * @return {?} The number of milliseconds between 1 January 1970 00:00:00 UTC and the updated date.
     */
    JDate.prototype.setUTCDate = /**
     * sets the day of the month for a specified date according to universal time.
     * Then recreate the JDate object from new Georgian object.
     * \@todo add implementation
     * @param {?} date An integer from 1 to 31, representing the day of the month.
     * @return {?} The number of milliseconds between 1 January 1970 00:00:00 UTC and the updated date.
     */
    function (date) {
        this._gDate.setUTCDate(date);
        this._createFromDate(this._gDate);
        return this.getTime();
    };
    /**
     * Sets the full year for a specified date according to universal time.
     * Then recreate the JDate object from new Georgian object.
     * @param year  An integer specifying the numeric value of the year, for example, 1995.
     * @param month  Optional. An integer between 0 and 11 representing the months January through December.
     * @param date An integer between 1 and 31 representing the day of the month. If you specify the dayValue parameter, you must also
     * specify the monthValue.
     * @todo add implementation
     */
    /**
     * Sets the full year for a specified date according to universal time.
     * Then recreate the JDate object from new Georgian object.
     * \@todo add implementation
     * @param {?} year  An integer specifying the numeric value of the year, for example, 1995.
     * @param {?=} month  Optional. An integer between 0 and 11 representing the months January through December.
     * @param {?=} date An integer between 1 and 31 representing the day of the month. If you specify the dayValue parameter, you must also
     * specify the monthValue.
     * @return {?}
     */
    JDate.prototype.setUTCFullYear = /**
     * Sets the full year for a specified date according to universal time.
     * Then recreate the JDate object from new Georgian object.
     * \@todo add implementation
     * @param {?} year  An integer specifying the numeric value of the year, for example, 1995.
     * @param {?=} month  Optional. An integer between 0 and 11 representing the months January through December.
     * @param {?=} date An integer between 1 and 31 representing the day of the month. If you specify the dayValue parameter, you must also
     * specify the monthValue.
     * @return {?}
     */
    function (year, month, date) {
        this._gDate.setUTCFullYear(year, month, date);
        this._createFromDate(this._gDate);
        return this.getTime();
    };
    /**
     * Sets the hour for a specified date according to universal time, and returns the number of milliseconds since
     * January 1, 1970 00:00:00 UTC until the time represented by the updated Date instance.
     * Then recreate the JDate object from new Georgian object.
     * @param hours  An integer between 0 and 23, representing the hour.
     * @param min Optional. An integer between 0 and 59, representing the minutes.
     * @param sec Optional. An integer between 0 and 59, representing the seconds. If you specify the secondsValue parameter,
     *        you must also specify the minutesValue.
     * @param ms Optional. A number between 0 and 999, representing the milliseconds. If you specify the msValue parameter,
     *        you must also specify the minutesValue and secondsValue.
     * @return The number of milliseconds between January 1, 1970 00:00:00 UTC and the updated date.
     * @todo add implementation
     */
    /**
     * Sets the hour for a specified date according to universal time, and returns the number of milliseconds since
     * January 1, 1970 00:00:00 UTC until the time represented by the updated Date instance.
     * Then recreate the JDate object from new Georgian object.
     * \@todo add implementation
     * @param {?} hours  An integer between 0 and 23, representing the hour.
     * @param {?=} min Optional. An integer between 0 and 59, representing the minutes.
     * @param {?=} sec Optional. An integer between 0 and 59, representing the seconds. If you specify the secondsValue parameter,
     *        you must also specify the minutesValue.
     * @param {?=} ms Optional. A number between 0 and 999, representing the milliseconds. If you specify the msValue parameter,
     *        you must also specify the minutesValue and secondsValue.
     * @return {?} The number of milliseconds between January 1, 1970 00:00:00 UTC and the updated date.
     */
    JDate.prototype.setUTCHours = /**
     * Sets the hour for a specified date according to universal time, and returns the number of milliseconds since
     * January 1, 1970 00:00:00 UTC until the time represented by the updated Date instance.
     * Then recreate the JDate object from new Georgian object.
     * \@todo add implementation
     * @param {?} hours  An integer between 0 and 23, representing the hour.
     * @param {?=} min Optional. An integer between 0 and 59, representing the minutes.
     * @param {?=} sec Optional. An integer between 0 and 59, representing the seconds. If you specify the secondsValue parameter,
     *        you must also specify the minutesValue.
     * @param {?=} ms Optional. A number between 0 and 999, representing the milliseconds. If you specify the msValue parameter,
     *        you must also specify the minutesValue and secondsValue.
     * @return {?} The number of milliseconds between January 1, 1970 00:00:00 UTC and the updated date.
     */
    function (hours, min, sec, ms) {
        this._gDate.setUTCHours(hours, min, sec, ms);
        this._createFromDate(this._gDate);
        return this.getTime();
    };
    /**
     * Sets the milliseconds for a specified date according to universal time.
     *
     * Then recreate the JDate object from new Georgian object.
     * @param ms A number between 0 and 999, representing the milliseconds.
     * @return The number of milliseconds between 1 January 1970 00:00:00 UTC and the updated date.
     * @todo add implementation
     */
    /**
     * Sets the milliseconds for a specified date according to universal time.
     *
     * Then recreate the JDate object from new Georgian object.
     * \@todo add implementation
     * @param {?} ms A number between 0 and 999, representing the milliseconds.
     * @return {?} The number of milliseconds between 1 January 1970 00:00:00 UTC and the updated date.
     */
    JDate.prototype.setUTCMilliseconds = /**
     * Sets the milliseconds for a specified date according to universal time.
     *
     * Then recreate the JDate object from new Georgian object.
     * \@todo add implementation
     * @param {?} ms A number between 0 and 999, representing the milliseconds.
     * @return {?} The number of milliseconds between 1 January 1970 00:00:00 UTC and the updated date.
     */
    function (ms) {
        this._gDate.setUTCMilliseconds(ms);
        this._createFromDate(this._gDate);
        return this.getTime();
    };
    /**
     * Sets the minutes for a specified date according to universal time.
     *
     * Then recreate the JDate object from new Georgian object.
     * @param min An integer between 0 and 59, representing the minutes.
     * @param sec Optional. An integer between 0 and 59, representing the seconds. If you specify the secondsValue parameter,
     *        you must also specify the minutesValue.
     * @param ms Optional. A number between 0 and 999, representing the milliseconds. If you specify the msValue parameter,
     *        you must also specify the minutesValue and secondsValue.
     * @return The number of milliseconds between 1 January 1970 00:00:00 UTC and the updated date.
     * @todo add implementation
     */
    /**
     * Sets the minutes for a specified date according to universal time.
     *
     * Then recreate the JDate object from new Georgian object.
     * \@todo add implementation
     * @param {?} min An integer between 0 and 59, representing the minutes.
     * @param {?=} sec Optional. An integer between 0 and 59, representing the seconds. If you specify the secondsValue parameter,
     *        you must also specify the minutesValue.
     * @param {?=} ms Optional. A number between 0 and 999, representing the milliseconds. If you specify the msValue parameter,
     *        you must also specify the minutesValue and secondsValue.
     * @return {?} The number of milliseconds between 1 January 1970 00:00:00 UTC and the updated date.
     */
    JDate.prototype.setUTCMinutes = /**
     * Sets the minutes for a specified date according to universal time.
     *
     * Then recreate the JDate object from new Georgian object.
     * \@todo add implementation
     * @param {?} min An integer between 0 and 59, representing the minutes.
     * @param {?=} sec Optional. An integer between 0 and 59, representing the seconds. If you specify the secondsValue parameter,
     *        you must also specify the minutesValue.
     * @param {?=} ms Optional. A number between 0 and 999, representing the milliseconds. If you specify the msValue parameter,
     *        you must also specify the minutesValue and secondsValue.
     * @return {?} The number of milliseconds between 1 January 1970 00:00:00 UTC and the updated date.
     */
    function (min, sec, ms) {
        this._gDate.setUTCMinutes(min, sec, ms);
        this._createFromDate(this._gDate);
        return this.getTime();
    };
    /**
     * Sets the month for a specified date according to universal time.
     *
     * Then recreate the JDate object from new Georgian object.
     * @param month An integer between 0 and 11, representing the months January through December.
     * @param date Optional. An integer from 1 to 31, representing the day of the month.
     * @return The number of milliseconds between 1 January 1970 00:00:00 UTC and the updated date.
     * @todo add implementation
     */
    /**
     * Sets the month for a specified date according to universal time.
     *
     * Then recreate the JDate object from new Georgian object.
     * \@todo add implementation
     * @param {?} month An integer between 0 and 11, representing the months January through December.
     * @param {?=} date Optional. An integer from 1 to 31, representing the day of the month.
     * @return {?} The number of milliseconds between 1 January 1970 00:00:00 UTC and the updated date.
     */
    JDate.prototype.setUTCMonth = /**
     * Sets the month for a specified date according to universal time.
     *
     * Then recreate the JDate object from new Georgian object.
     * \@todo add implementation
     * @param {?} month An integer between 0 and 11, representing the months January through December.
     * @param {?=} date Optional. An integer from 1 to 31, representing the day of the month.
     * @return {?} The number of milliseconds between 1 January 1970 00:00:00 UTC and the updated date.
     */
    function (month, date) {
        this._gDate.setUTCMonth(month, date);
        this._createFromDate(this._gDate);
        return this.getTime();
    };
    /**
     * Sets the seconds for a specified date according to universal time.
     *
     * Then recreate the JDate object from new Georgian object.
     * @param sec An integer between 0 and 59, representing the seconds.
     * @param ms Optional. A number between 0 and 999, representing the milliseconds.
     * @todo add implementation
     */
    /**
     * Sets the seconds for a specified date according to universal time.
     *
     * Then recreate the JDate object from new Georgian object.
     * \@todo add implementation
     * @param {?} sec An integer between 0 and 59, representing the seconds.
     * @param {?=} ms Optional. A number between 0 and 999, representing the milliseconds.
     * @return {?}
     */
    JDate.prototype.setUTCSeconds = /**
     * Sets the seconds for a specified date according to universal time.
     *
     * Then recreate the JDate object from new Georgian object.
     * \@todo add implementation
     * @param {?} sec An integer between 0 and 59, representing the seconds.
     * @param {?=} ms Optional. A number between 0 and 999, representing the milliseconds.
     * @return {?}
     */
    function (sec, ms) {
        this._gDate.setUTCSeconds(sec, ms);
        this._createFromDate(this._gDate);
        return this.getTime();
    };
    /**
     * @return name of the day of the week in persian.
     * @example دوشنبه
     */
    /**
     * \@example دوشنبه
     * @return {?} name of the day of the week in persian.
     */
    JDate.prototype.getNameOfTheDay = /**
     * \@example دوشنبه
     * @return {?} name of the day of the week in persian.
     */
    function () {
        return JDate.DAYS_OF_WEEK[this.getDay()];
    };
    /**
     * @return name of the month in persian.
     * @example مهر
     */
    /**
     * \@example مهر
     * @return {?} name of the month in persian.
     */
    JDate.prototype.getNameOfTheMonth = /**
     * \@example مهر
     * @return {?} name of the month in persian.
     */
    function () {
        return JDate.FA_MONTHS[this.getMonth()];
    };
    /**
     * returns the date portion of a Date object in human readable form in Persian.
     * @return a string following this pattern: "nameOfTheDay nameOfTheMonth dayNumber fullYear".
     * @example پنج‌شنبه اسفند 30 1375
     */
    /**
     * returns the date portion of a Date object in human readable form in Persian.
     * \@example پنج‌شنبه اسفند 30 1375
     * @return {?} a string following this pattern: "nameOfTheDay nameOfTheMonth dayNumber fullYear".
     */
    JDate.prototype.toDateString = /**
     * returns the date portion of a Date object in human readable form in Persian.
     * \@example پنج‌شنبه اسفند 30 1375
     * @return {?} a string following this pattern: "nameOfTheDay nameOfTheMonth dayNumber fullYear".
     */
    function () {
        return this.getNameOfTheDay() + " " + this.getNameOfTheMonth() + " " + this.getDate() + " " + this.getFullYear();
    };
    /**
     * Returns time marker of object time. all hour numbers lesser than 12 are before noon and all greater than 12 are after noon.
     * @param shortVersion controls output. if be true, output will be in short format like: ب.ظ if be false, output will be in complete format like: بعد از ظهر
     * @return time marker for showing if time is before noon or after it
     */
    /**
     * Returns time marker of object time. all hour numbers lesser than 12 are before noon and all greater than 12 are after noon.
     * @param {?=} shortVersion controls output. if be true, output will be in short format like: ب.ظ if be false, output will be in complete format like: بعد از ظهر
     * @return {?} time marker for showing if time is before noon or after it
     */
    JDate.prototype.getTimeMarker = /**
     * Returns time marker of object time. all hour numbers lesser than 12 are before noon and all greater than 12 are after noon.
     * @param {?=} shortVersion controls output. if be true, output will be in short format like: ب.ظ if be false, output will be in complete format like: بعد از ظهر
     * @return {?} time marker for showing if time is before noon or after it
     */
    function (shortVersion) {
        if (shortVersion === void 0) { shortVersion = false; }
        if (this.getHours() < 12) {
            return shortVersion ? JDate.SHORT_BEFORE_NOON : JDate.COMPLETE_BEFORE_NOON;
        }
        return shortVersion ? JDate.SHORT_AFTER_NOON : JDate.COMPLETE_AFTER_NOON;
    };
    /**
     * Replace patterns of date formatting with corresponding strings from JDate object values.
     * In bi-character pattern parts, missed digits will fill with zero.
     * @param pattern a pattern string with replaceable parts:
     *
     *        yyyy -> Year number in 4-digit representation. ex: 1397
     *
     *        yy -> Year number in 2-digit representation. ex: 97
     *
     *        mmmm -> Name of the month in English representation. ex: Esfand
     *
     *        mmm -> Name of the month in Persian representation. ex: اسفند
     *
     *        mm -> 2-digit number of the month starting from 1
     *
     *        m -> non zero-padding number of the month starting from 1
     *
     *        dddd -> Name of the day in the week in English representation. ex: Shanbe
     *
     *        ddd -> Name of the day in the week id Persian representation. ex: شنبه
     *
     *        dd -> 2-digit number of the day in the month starting from 1
     *
     *        d -> non zero-padding number of the day in the month starting from 1
     *
     * @return A formatted string that all Date pattern parts has been replaced. Other characters of the pattern will left unchanged.
     */
    /**
     * Replace patterns of date formatting with corresponding strings from JDate object values.
     * In bi-character pattern parts, missed digits will fill with zero.
     * @private
     * @param {?} pattern a pattern string with replaceable parts:
     *
     *        yyyy -> Year number in 4-digit representation. ex: 1397
     *
     *        yy -> Year number in 2-digit representation. ex: 97
     *
     *        mmmm -> Name of the month in English representation. ex: Esfand
     *
     *        mmm -> Name of the month in Persian representation. ex: اسفند
     *
     *        mm -> 2-digit number of the month starting from 1
     *
     *        m -> non zero-padding number of the month starting from 1
     *
     *        dddd -> Name of the day in the week in English representation. ex: Shanbe
     *
     *        ddd -> Name of the day in the week id Persian representation. ex: شنبه
     *
     *        dd -> 2-digit number of the day in the month starting from 1
     *
     *        d -> non zero-padding number of the day in the month starting from 1
     *
     * @return {?} A formatted string that all Date pattern parts has been replaced. Other characters of the pattern will left unchanged.
     */
    JDate.prototype._format_date = /**
     * Replace patterns of date formatting with corresponding strings from JDate object values.
     * In bi-character pattern parts, missed digits will fill with zero.
     * @private
     * @param {?} pattern a pattern string with replaceable parts:
     *
     *        yyyy -> Year number in 4-digit representation. ex: 1397
     *
     *        yy -> Year number in 2-digit representation. ex: 97
     *
     *        mmmm -> Name of the month in English representation. ex: Esfand
     *
     *        mmm -> Name of the month in Persian representation. ex: اسفند
     *
     *        mm -> 2-digit number of the month starting from 1
     *
     *        m -> non zero-padding number of the month starting from 1
     *
     *        dddd -> Name of the day in the week in English representation. ex: Shanbe
     *
     *        ddd -> Name of the day in the week id Persian representation. ex: شنبه
     *
     *        dd -> 2-digit number of the day in the month starting from 1
     *
     *        d -> non zero-padding number of the day in the month starting from 1
     *
     * @return {?} A formatted string that all Date pattern parts has been replaced. Other characters of the pattern will left unchanged.
     */
    function (pattern) {
        return pattern.replace(/yyyy/g, JDate.zeroPadding(this.getFullYear(), 4))
            .replace(/\byy\b/g, (this.getFullYear() % 100).toString())
            .replace(/\bmmmm\b/g, JDate.EN_MONTHS[this.getMonth()])
            .replace(/\bmmm\b/g, JDate.FA_MONTHS[this.getMonth()])
            .replace(/\bmm\b/g, JDate.zeroPadding(this.getMonth() + 1, 2))
            .replace(/\bm\b/g, (this.getMonth() + 1).toString())
            .replace(/\bdddd\b/g, JDate.EN_DAYS_OF_WEEK[this.getDay()])
            .replace(/\bddd\b/g, JDate.DAYS_OF_WEEK[this.getDay()])
            .replace(/\bdd\b/g, JDate.zeroPadding(this.getDate(), 2))
            .replace(/\bd\b/g, this.getDate().toString());
    };
    /**
     * Replace patterns of time formatting with corresponding strings from JDate object values.
     *
     * In bi-character pattern parts, missed digits will fill with zero.
     * @param pattern a pattern string with replaceable parts:
     *
     *        HH -> 2-digit form of hour number in 24-hour clock format.
     *
     *        H -> non zero-padding form of hour number in 24-hour clock format.
     *
     *        hh -> 2-digit form of hour number in 12-hour clock format.
     *
     *        h -> non zero-padding form of hour number in 12-hour clock format.
     *
     *        H -> non zero-padding form of hour number in 12-hour clock format.
     *
     *        MM -> 2-digit form of minutes number.
     *
     *        M -> non zero-padding form of minutes number
     *
     *        SS -> 2-digit form of seconds number.
     *
     *        S -> non zero-padding form of seconds number.
     *
     *        l -> number of milliseconds
     *
     *        T -> Time marker in full format like: قبل از ظهر
     *
     *        t -> Time marker in short format like: ق.ظ
     */
    /**
     * Replace patterns of time formatting with corresponding strings from JDate object values.
     *
     * In bi-character pattern parts, missed digits will fill with zero.
     * @private
     * @param {?} pattern a pattern string with replaceable parts:
     *
     *        HH -> 2-digit form of hour number in 24-hour clock format.
     *
     *        H -> non zero-padding form of hour number in 24-hour clock format.
     *
     *        hh -> 2-digit form of hour number in 12-hour clock format.
     *
     *        h -> non zero-padding form of hour number in 12-hour clock format.
     *
     *        H -> non zero-padding form of hour number in 12-hour clock format.
     *
     *        MM -> 2-digit form of minutes number.
     *
     *        M -> non zero-padding form of minutes number
     *
     *        SS -> 2-digit form of seconds number.
     *
     *        S -> non zero-padding form of seconds number.
     *
     *        l -> number of milliseconds
     *
     *        T -> Time marker in full format like: قبل از ظهر
     *
     *        t -> Time marker in short format like: ق.ظ
     * @return {?}
     */
    JDate.prototype._format_time = /**
     * Replace patterns of time formatting with corresponding strings from JDate object values.
     *
     * In bi-character pattern parts, missed digits will fill with zero.
     * @private
     * @param {?} pattern a pattern string with replaceable parts:
     *
     *        HH -> 2-digit form of hour number in 24-hour clock format.
     *
     *        H -> non zero-padding form of hour number in 24-hour clock format.
     *
     *        hh -> 2-digit form of hour number in 12-hour clock format.
     *
     *        h -> non zero-padding form of hour number in 12-hour clock format.
     *
     *        H -> non zero-padding form of hour number in 12-hour clock format.
     *
     *        MM -> 2-digit form of minutes number.
     *
     *        M -> non zero-padding form of minutes number
     *
     *        SS -> 2-digit form of seconds number.
     *
     *        S -> non zero-padding form of seconds number.
     *
     *        l -> number of milliseconds
     *
     *        T -> Time marker in full format like: قبل از ظهر
     *
     *        t -> Time marker in short format like: ق.ظ
     * @return {?}
     */
    function (pattern) {
        return pattern.replace(/\bHH\b/g, JDate.zeroPadding(this.getHours(), 2))
            .replace(/\bH\b/g, this.getHours().toString())
            .replace(/\bhh\b/g, JDate.zeroPadding(this.getHours12hourClock(), 2))
            .replace(/\bh\b/g, this.getHours12hourClock().toString())
            .replace(/\bMM\b/g, JDate.zeroPadding(this.getMinutes(), 2))
            .replace(/\bM\b/g, this.getMinutes().toString())
            .replace(/\bSS\b/g, JDate.zeroPadding(this.getSeconds(), 2))
            .replace(/\bS\b/g, this.getSeconds().toString())
            .replace(/\bl\b/g, this.getMilliseconds().toString())
            .replace(/\bT\b/g, this.getTimeMarker(false))
            .replace(/\bt\b/g, this.getTimeMarker(true));
    };
    /**
     * This method format date and time stored in the JDate object according to the entered pattern.
     *
     * Only masks will replace and all other characters will be unchanged after formatting.
     *
     * You can use masks several times in a pattern but be careful because if some of masks written immediately, they create new masks with
     * different meaning. It's better to always have some splitter characters between different masks.
     * @param pattern a string containing zero or more formatting mask.
     *
     * Masks:
     *
     *        yyyy -> Year number in 4-digit representation. Leading zero for years lesser than 1000 ex: 1397
     *
     *        yy -> Year number in 2-digit representation without Leading zeros. ex: 97
     *
     *        mmmm -> Name of the month in English representation. ex: Esfand
     *
     *        mmm -> Name of the month in Persian representation. ex: اسفند
     *
     *        mm -> 2-digit number of the month starting from 1. Leading zero for single-digit months.
     *
     *        m -> number of the month starting from 1 without Leading zeros.
     *
     *        dddd -> Name of the day in the week in English representation. ex: Shanbe
     *
     *        ddd -> Name of the day in the week id Persian representation. ex: شنبه
     *
     *        dd -> 2-digit number of the day in the month starting from 1. Leading zero for single-digit days.
     *
     *        d -> number of the day in the month starting from 1 without Leading zeros.
     *
     *        HH -> 2-digit form of hour number in 24-hour clock format. Leading zero for single-digit hours.
     *
     *        H -> non zero-padding form of hour number in 24-hour clock format without Leading zeros.
     *
     *        hh -> 2-digit form of hour number in 12-hour clock format. Leading zero for single-digit hours.
     *
     *        H -> non zero-padding form of hour number in 12-hour clock format without Leading zeros.
     *
     *        MM -> 2-digit form of minutes number. Leading zero for single-digit minutes.
     *
     *        M -> non zero-padding form of minutes number without Leading zeros.
     *
     *        SS -> 2-digit form of seconds number. Leading zero for single-digit seconds.
     *
     *        S -> non zero-padding form of seconds number without Leading zeros.
     *
     *        l -> number of milliseconds without Leading zeros.
     *
     *        T -> Time marker in full format like: قبل از ظهر
     *
     *        t -> Time marker in short format like: ق.ظ
     *@return formatted dateTime string.
     */
    /**
     * This method format date and time stored in the JDate object according to the entered pattern.
     *
     * Only masks will replace and all other characters will be unchanged after formatting.
     *
     * You can use masks several times in a pattern but be careful because if some of masks written immediately, they create new masks with
     * different meaning. It's better to always have some splitter characters between different masks.
     * @param {?} pattern a string containing zero or more formatting mask.
     *
     * Masks:
     *
     *        yyyy -> Year number in 4-digit representation. Leading zero for years lesser than 1000 ex: 1397
     *
     *        yy -> Year number in 2-digit representation without Leading zeros. ex: 97
     *
     *        mmmm -> Name of the month in English representation. ex: Esfand
     *
     *        mmm -> Name of the month in Persian representation. ex: اسفند
     *
     *        mm -> 2-digit number of the month starting from 1. Leading zero for single-digit months.
     *
     *        m -> number of the month starting from 1 without Leading zeros.
     *
     *        dddd -> Name of the day in the week in English representation. ex: Shanbe
     *
     *        ddd -> Name of the day in the week id Persian representation. ex: شنبه
     *
     *        dd -> 2-digit number of the day in the month starting from 1. Leading zero for single-digit days.
     *
     *        d -> number of the day in the month starting from 1 without Leading zeros.
     *
     *        HH -> 2-digit form of hour number in 24-hour clock format. Leading zero for single-digit hours.
     *
     *        H -> non zero-padding form of hour number in 24-hour clock format without Leading zeros.
     *
     *        hh -> 2-digit form of hour number in 12-hour clock format. Leading zero for single-digit hours.
     *
     *        H -> non zero-padding form of hour number in 12-hour clock format without Leading zeros.
     *
     *        MM -> 2-digit form of minutes number. Leading zero for single-digit minutes.
     *
     *        M -> non zero-padding form of minutes number without Leading zeros.
     *
     *        SS -> 2-digit form of seconds number. Leading zero for single-digit seconds.
     *
     *        S -> non zero-padding form of seconds number without Leading zeros.
     *
     *        l -> number of milliseconds without Leading zeros.
     *
     *        T -> Time marker in full format like: قبل از ظهر
     *
     *        t -> Time marker in short format like: ق.ظ
     * @return {?} formatted dateTime string.
     */
    JDate.prototype.format = /**
     * This method format date and time stored in the JDate object according to the entered pattern.
     *
     * Only masks will replace and all other characters will be unchanged after formatting.
     *
     * You can use masks several times in a pattern but be careful because if some of masks written immediately, they create new masks with
     * different meaning. It's better to always have some splitter characters between different masks.
     * @param {?} pattern a string containing zero or more formatting mask.
     *
     * Masks:
     *
     *        yyyy -> Year number in 4-digit representation. Leading zero for years lesser than 1000 ex: 1397
     *
     *        yy -> Year number in 2-digit representation without Leading zeros. ex: 97
     *
     *        mmmm -> Name of the month in English representation. ex: Esfand
     *
     *        mmm -> Name of the month in Persian representation. ex: اسفند
     *
     *        mm -> 2-digit number of the month starting from 1. Leading zero for single-digit months.
     *
     *        m -> number of the month starting from 1 without Leading zeros.
     *
     *        dddd -> Name of the day in the week in English representation. ex: Shanbe
     *
     *        ddd -> Name of the day in the week id Persian representation. ex: شنبه
     *
     *        dd -> 2-digit number of the day in the month starting from 1. Leading zero for single-digit days.
     *
     *        d -> number of the day in the month starting from 1 without Leading zeros.
     *
     *        HH -> 2-digit form of hour number in 24-hour clock format. Leading zero for single-digit hours.
     *
     *        H -> non zero-padding form of hour number in 24-hour clock format without Leading zeros.
     *
     *        hh -> 2-digit form of hour number in 12-hour clock format. Leading zero for single-digit hours.
     *
     *        H -> non zero-padding form of hour number in 12-hour clock format without Leading zeros.
     *
     *        MM -> 2-digit form of minutes number. Leading zero for single-digit minutes.
     *
     *        M -> non zero-padding form of minutes number without Leading zeros.
     *
     *        SS -> 2-digit form of seconds number. Leading zero for single-digit seconds.
     *
     *        S -> non zero-padding form of seconds number without Leading zeros.
     *
     *        l -> number of milliseconds without Leading zeros.
     *
     *        T -> Time marker in full format like: قبل از ظهر
     *
     *        t -> Time marker in short format like: ق.ظ
     * @return {?} formatted dateTime string.
     */
    function (pattern) {
        return this._format_time(this._format_date(pattern));
    };
    /**
     * @return a string in simplified extended ISO format (ISO 8601), which is always 24 or 27 characters long (yyyy-mm-ddTHH:MM:SS.lZ).
     *        Be careful because that T in the middle of the pattern is not a format Mask and is a simple character.
     */
    /**
     * @return {?} a string in simplified extended ISO format (ISO 8601), which is always 24 or 27 characters long (yyyy-mm-ddTHH:MM:SS.lZ).
     *        Be careful because that T in the middle of the pattern is not a format Mask and is a simple character.
     */
    JDate.prototype.toISOString = /**
     * @return {?} a string in simplified extended ISO format (ISO 8601), which is always 24 or 27 characters long (yyyy-mm-ddTHH:MM:SS.lZ).
     *        Be careful because that T in the middle of the pattern is not a format Mask and is a simple character.
     */
    function () {
        return this.format('yyyy-mm-dd') + 'T' + this.format('HH:MM:SS.l') + 'Z';
    };
    /**
     * @return a string representation of the Date object.
     * [see toString method]{@link toString}
     * @param key
     */
    /**
     * @param {?=} key
     * @return {?} a string representation of the Date object.
     * [see toString method]{\@link toString}
     */
    JDate.prototype.toJSON = /**
     * @param {?=} key
     * @return {?} a string representation of the Date object.
     * [see toString method]{\@link toString}
     */
    function (key) {
        return this.toString();
    };
    /**
     * returns formatted date with following pattern: 'ddd mmm d yyyy HH:MM:SS'
     */
    /**
     * returns formatted date with following pattern: 'ddd mmm d yyyy HH:MM:SS'
     * @return {?}
     */
    JDate.prototype.toString = /**
     * returns formatted date with following pattern: 'ddd mmm d yyyy HH:MM:SS'
     * @return {?}
     */
    function () {
        return this.format('ddd mmm d yyyy HH:MM:SS');
    };
    /**
     * @param {?=} locales
     * @param {?=} options
     * @return {?}
     */
    JDate.prototype.toLocaleDateString = /**
     * @param {?=} locales
     * @param {?=} options
     * @return {?}
     */
    function (locales, options) {
        return this._gDate.toLocaleDateString(locales, options);
    };
    /**
     * @param {?=} locales
     * @param {?=} options
     * @return {?}
     */
    JDate.prototype.toLocaleTimeString = /**
     * @param {?=} locales
     * @param {?=} options
     * @return {?}
     */
    function (locales, options) {
        return this._gDate.toLocaleTimeString(locales, options);
    };
    /**
     * @return toTimeString of Georgian date
     *
     * [For more information see javascript Date object documentation about this method]{@link https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Date/toTimeString}
     */
    /**
     * @return {?} toTimeString of Georgian date
     *
     * [For more information see javascript Date object documentation about this method]{\@link https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Date/toTimeString}
     */
    JDate.prototype.toTimeString = /**
     * @return {?} toTimeString of Georgian date
     *
     * [For more information see javascript Date object documentation about this method]{\@link https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Date/toTimeString}
     */
    function () {
        return this._gDate.toTimeString();
    };
    /**
     * @return toUTCString of Georgian date.
     *
     * [For more information see javascript Date object documentation about this method]{@link https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Date/toUTCString}
     * @todo add implementation
     */
    /**
     * \@todo add implementation
     * @return {?} toUTCString of Georgian date.
     *
     * [For more information see javascript Date object documentation about this method]{\@link https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Date/toUTCString}
     */
    JDate.prototype.toUTCString = /**
     * \@todo add implementation
     * @return {?} toUTCString of Georgian date.
     *
     * [For more information see javascript Date object documentation about this method]{\@link https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Date/toUTCString}
     */
    function () {
        return this._gDate.toUTCString();
    };
    /**
     * Similar to the getTime method.
     *
     * [For more information also see getTime method]{@link getTime}
     */
    /**
     * Similar to the getTime method.
     *
     * [For more information also see getTime method]{\@link getTime}
     * @return {?}
     */
    JDate.prototype.valueOf = /**
     * Similar to the getTime method.
     *
     * [For more information also see getTime method]{\@link getTime}
     * @return {?}
     */
    function () {
        return this.getTime();
    };
    /**
     * @param {?} incValue
     * @return {?}
     */
    JDate.prototype.addMonth = /**
     * @param {?} incValue
     * @return {?}
     */
    function (incValue) {
        // let newMonth: number = (this.getMonth() + incValue) % 11;
        // let passedYears: number = this.getFullYear() + newMonth / 11;
        // let newYear: number = newMonth === 0 ? ;
        // this.setFullYear(newYear);
        // this.setMonth(newMonth % 11);
    };
    JDate.EN_MONTHS = ['Farvardin', 'Ordibehesht', 'Khordad', 'Tir', 'Mordad', 'Shahrivar', 'Mehr', 'Aban', 'Azar', 'Dey', 'Behman', 'Esfand'];
    JDate.FA_MONTHS = ['فروردین', 'اردیبهشت', 'خرداد', 'تیر', 'مرداد', 'شهریور', 'مهر', 'آبان', 'آذر', 'دی', 'بهمن', 'اسفند'];
    JDate.DAYS_OF_WEEK = ['جمعه', 'شنبه', 'یکشنبه', 'دوشنبه', 'سه‌شنبه', 'چهارشنبه', 'پنج‌شنبه'];
    JDate.EN_DAYS_OF_WEEK = ['Jom\'e', 'Shanbe', 'Yekshanbe', 'Doshanbe', 'Seshanbe', 'Cheharshanbe', 'Panjshanbe'];
    JDate.COMPLETE_BEFORE_NOON = 'قبل از ظهر';
    JDate.COMPLETE_AFTER_NOON = 'بعد از ظهر';
    JDate.SHORT_BEFORE_NOON = 'ق.ظ';
    JDate.SHORT_AFTER_NOON = 'ب.ظ';
    return JDate;
}());
export { JDate };
if (false) {
    /**
     * @type {?}
     * @private
     */
    JDate.EN_MONTHS;
    /**
     * @type {?}
     * @private
     */
    JDate.FA_MONTHS;
    /**
     * @type {?}
     * @private
     */
    JDate.DAYS_OF_WEEK;
    /**
     * @type {?}
     * @private
     */
    JDate.EN_DAYS_OF_WEEK;
    /**
     * @type {?}
     * @private
     */
    JDate.COMPLETE_BEFORE_NOON;
    /**
     * @type {?}
     * @private
     */
    JDate.COMPLETE_AFTER_NOON;
    /**
     * @type {?}
     * @private
     */
    JDate.SHORT_BEFORE_NOON;
    /**
     * @type {?}
     * @private
     */
    JDate.SHORT_AFTER_NOON;
    /**
     * @type {?}
     * @private
     */
    JDate.prototype._gDate;
    /**
     * @type {?}
     * @private
     */
    JDate.prototype._jYear;
    /**
     * @type {?}
     * @private
     */
    JDate.prototype._jMonth;
    /**
     * @type {?}
     * @private
     */
    JDate.prototype._jDay;
    /**
     * @type {?}
     * @private
     */
    JDate.prototype._calculator;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiamRhdGUuanMiLCJzb3VyY2VSb290Ijoibmc6Ly9uZ3gtcGVyc2lhbi8iLCJzb3VyY2VzIjpbImxpYi9KRGF0ZS9qZGF0ZS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7O0FBQUEsT0FBTyxFQUFDLDJCQUEyQixFQUFDLE1BQU0sa0NBQWtDLENBQUM7QUFDN0UsT0FBTyxFQUFDLHNCQUFzQixFQUFDLE1BQU0sMkJBQTJCLENBQUM7QUFDakUsT0FBTyxFQUFDLDBCQUEwQixFQUFDLE1BQU0saUNBQWlDLENBQUM7Ozs7Ozs7Ozs7OztBQWEzRTtJQTZERTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7T0FnQ0c7SUFDSCxlQUFZLEtBQThCLEVBQUUsTUFBZSxFQUFFLElBQWEsRUFBRSxLQUFpQixFQUFFLE9BQW1CLEVBQ3RHLE9BQW1CLEVBQUUsWUFBd0I7UUFEbUIsc0JBQUEsRUFBQSxTQUFpQjtRQUFFLHdCQUFBLEVBQUEsV0FBbUI7UUFDdEcsd0JBQUEsRUFBQSxXQUFtQjtRQUFFLDZCQUFBLEVBQUEsZ0JBQXdCO1FBaEZqRCxnQkFBVyxHQUFnQyxJQUFJLDJCQUEyQixDQUFDLElBQUksMEJBQTBCLEVBQUUsQ0FBQyxDQUFDO1FBaUZuSCxJQUFJLENBQUMsS0FBSyxFQUFFO1lBQ1YsSUFBSSxDQUFDLGVBQWUsQ0FBQyxJQUFJLElBQUksRUFBRSxDQUFDLENBQUM7U0FDbEM7YUFBTSxJQUFJLE9BQU8sS0FBSyxLQUFLLFFBQVEsSUFBSSxNQUFNLEtBQUssU0FBUyxFQUFFO1lBQzVELElBQUksQ0FBQyxlQUFlLENBQUMsSUFBSSxJQUFJLENBQUMsS0FBSyxDQUFDLEtBQUssQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUM7U0FDcEQ7YUFBTSxJQUFJLE9BQU8sS0FBSyxLQUFLLFFBQVEsSUFBSSxNQUFNLEtBQUssU0FBUyxFQUFFO1lBQzVELElBQUksQ0FBQyxlQUFlLENBQUMsSUFBSSxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQztT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SSxFQUFFLE1BQU0sRUFBRSxPQUFPLENBQUMsQ0FBQztJQUNwSCxrQkFBWSxHQUFHLENBQUMsTUFBTSxFQUFFLE1BQU0sRUFBRSxRQUFRLEVBQUUsUUFBUSxFQUFFLFNBQVMsRUFBRSxVQUFVLEVBQUUsVUFBVSxDQUFDLENBQUM7SUFDdkYscUJBQWUsR0FBRyxDQUFDLFFBQVEsRUFBRSxRQUFRLEVBQUUsV0FBVyxFQUFFLFVBQVUsRUFBRSxVQUFVLEVBQUUsY0FBYyxFQUFFLFlBQVksQ0FBQyxDQUFDO0lBQzFHLDBCQUFvQixHQUFHLFlBQVksQ0FBQztJQUNwQyx5QkFBbUIsR0FBRyxZQUFZLENBQUM7SUFDbkMsdUJBQWlCLEdBQUcsS0FBSyxDQUFDO0lBQzFCLHNCQUFnQixHQUFHLEtBQUssQ0FBQztJQTR5QjFDLFlBQUM7Q0FBQSxBQXJ6QkQsSUFxekJDO1NBcnpCWSxLQUFLOzs7Ozs7SUFFaEIsZ0JBQW9KOzs7OztJQUNwSixnQkFBbUk7Ozs7O0lBQ25JLG1CQUFzRzs7Ozs7SUFDdEcsc0JBQXlIOzs7OztJQUN6SCwyQkFBbUQ7Ozs7O0lBQ25ELDBCQUFrRDs7Ozs7SUFDbEQsd0JBQXlDOzs7OztJQUN6Qyx1QkFBd0M7Ozs7O0lBRXhDLHVCQUFxQjs7Ozs7SUFDckIsdUJBQXVCOzs7OztJQUN2Qix3QkFBd0I7Ozs7O0lBQ3hCLHNCQUFzQjs7Ozs7SUFDdEIsNEJBQXFIIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHtKYWxhbGlEYXRlQ2FsY3VsYXRvclNlcnZpY2V9IGZyb20gJy4vamFsYWxpLWRhdGUtY2FsY3VsYXRvci5zZXJ2aWNlJztcbmltcG9ydCB7SW52YWxpZEphbGFsaURhdGVFcnJvcn0gZnJvbSAnLi9JbnZhbGlkSmFsYWxpRGF0ZS5lcnJvcic7XG5pbXBvcnQge0phbGFsaURhdGVWYWxpZGF0b3JTZXJ2aWNlfSBmcm9tICcuL2phbGFsaS1kYXRlLXZhbGlkYXRvci5zZXJ2aWNlJztcblxuLyoqXG4gKiBUaGlzIGNsYXNzIHJlcHJlc2VudHMgYSBjb21wbGV0ZSBEYXRlIG9iamVjdCBmb3IgSmFsYWxpIGRhdGVzLiBJdCBhY2NlcHRzIGphbGFsaSBEYXRlcywgY29udmVydHMgR2VvcmdpYW4gZGF0ZXMgdG8gamFsYWxpIGFuZCBpbXBsZW1lbnRzXG4gKiBhbGwgdGhlIGJlaGF2aW91cnMgb2YgZGVmYXVsdCBEYXRlIG9iamVjdCBvZiBKYXZhU2NyaXB0IGZvciBKYWxhbGkgRGF0ZSwgcGx1cyBzb21lIGFkZGl0aW9uYWwgbWV0aG9kcyBmb3IgZGV2ZWxvcGVycyBjb252ZW5pZW5jZS5cbiAqXG4gKiBBVFRFTlRJT046XG4gKlxuICogVVRDIG1ldGhvZHMgYXJlIG5vdCBpbXBsZW1lbnRlZCBmb3IgSmFsYWxpIGRhdGUuIFRoZXkgd29ya2luZyBkaXJlY3RseSBvbiBnRGF0ZSBvYmplY3QgKENvcnJlc3BvbmRpbmcgZGF0ZSBpbiBHZW9yZ2lhbikgYW5kIGNoYW5naW5nXG4gKiBwcm9wZXJ0aWVzIG9mIHRoaXMuIFRoZW4gbmV3IEpEYXRlIG9iamVjdCB3aWxsIGNyZWF0ZSBmcm9tIHRoZSBtb2RpZmllZCBHZW9yZ2lhbiBEYXRlLiBTbyB0aGV5IG1heSBDYXVzZSB1bnByZWRpY3RhYmxlIGJlaGF2aW91ci5cbiAqIFBsZWFzZSBkb24ndCB1c2UgVVRDIG1ldGhvZHMgd2l0aCBcInRvZG9cIiB0YWcgb24gdGhlbSB1bmxlc3MgeW91IGFyZSBzdXJlIGFib3V0IHRoZSBiZWhhdmlvdXIuXG4gKiBSZWNyZWF0aW5nIG9iamVjdHMgYXJlIHNhZmVyIHRoYW4gd29ya2luZyB3aXRoIFVUQyBtZXRob2RzLlxuICovXG5leHBvcnQgY2xhc3MgSkRhdGUgaW1wbGVtZW50cyBEYXRle1xuXG4gIHByaXZhdGUgc3RhdGljIEVOX01PTlRIUyA9IFsnRmFydmFyZGluJywgJ09yZGliZWhlc2h0JywgJ0tob3JkYWQnLCAnVGlyJywgJ01vcmRhZCcsICdTaGFocml2YXInLCAnTWVocicsICdBYmFuJywgJ0F6YXInLCAnRGV5JywgJ0JlaG1hbicsICdFc2ZhbmQnXTtcbiAgcHJpdmF0ZSBzdGF0aWMgRkFfTU9OVEhTID0gWyfZgdix2YjYsdiv24zZhicsICfYp9ix2K/bjNio2YfYtNiqJywgJ9iu2LHYr9in2K8nLCAn2KrbjNixJywgJ9mF2LHYr9in2K8nLCAn2LTZh9ix24zZiNixJywgJ9mF2YfYsScsICfYotio2KfZhicsICfYotiw2LEnLCAn2K/bjCcsICfYqNmH2YXZhicsICfYp9iz2YHZhtivJ107XG4gIHByaXZhdGUgc3RhdGljIERBWVNfT0ZfV0VFSyA9IFsn2KzZhdi52YcnLCAn2LTZhtio2YcnLCAn24zaqdi02YbYqNmHJywgJ9iv2YjYtNmG2KjZhycsICfYs9mH4oCM2LTZhtio2YcnLCAn2obZh9in2LHYtNmG2KjZhycsICfZvtmG2KzigIzYtNmG2KjZhyddO1xuICBwcml2YXRlIHN0YXRpYyBFTl9EQVlTX09GX1dFRUsgPSBbJ0pvbVxcJ2UnLCAnU2hhbmJlJywgJ1lla3NoYW5iZScsICdEb3NoYW5iZScsICdTZXNoYW5iZScsICdDaGVoYXJzaGFuYmUnLCAnUGFuanNoYW5iZSddO1xuICBwcml2YXRlIHN0YXRpYyBDT01QTEVURV9CRUZPUkVfTk9PTiA9ICfZgtio2YQg2KfYsiDYuNmH2LEnO1xuICBwcml2YXRlIHN0YXRpYyBDT01QTEVURV9BRlRFUl9OT09OID0gJ9io2LnYryDYp9iyINi42YfYsSc7XG4gIHByaXZhdGUgc3RhdGljIFNIT1JUX0JFRk9SRV9OT09OID0gJ9mCLti4JztcbiAgcHJpdmF0ZSBzdGF0aWMgU0hPUlRfQUZURVJfTk9PTiA9ICfYqC7YuCc7XG5cbiAgcHJpdmF0ZSBfZ0RhdGU6IERhdGU7XG4gIHByaXZhdGUgX2pZZWFyOiBudW1iZXI7XG4gIHByaXZhdGUgX2pNb250aDogbnVtYmVyO1xuICBwcml2YXRlIF9qRGF5OiBudW1iZXI7XG4gIHByaXZhdGUgX2NhbGN1bGF0b3I6IEphbGFsaURhdGVDYWxjdWxhdG9yU2VydmljZSA9IG5ldyBKYWxhbGlEYXRlQ2FsY3VsYXRvclNlcnZpY2UobmV3IEphbGFsaURhdGVWYWxpZGF0b3JTZXJ2aWNlKCkpO1xuXG4gIC8qKlxuICAgKiBJZiBpbnB1dCB2YWx1ZSBsZW5ndGggaXMgc2hvcnRlciB0aGFuIGRlc2lyZWRMZW5ndGgsIGFkZHMgemVyb3MgYXQgdGhlIGJlZ2lubmluZyBvZiBpdCB1bnRpbCBtZWV0cyBkZXNpcmVkIGxlbmd0aC5cbiAgICogQHBhcmFtIHZhbHVlIGEgbnVtYmVyIG9yIHN0cmluZyB0aGF0IHdlIHdhbnQgaGF2ZSBhIHNwZWNpZmljIGxlbmd0aFxuICAgKiBAcGFyYW0gZGVzaXJlZExlbmd0aCBsZW5ndGggb2Ygb3V0cHV0IHN0cmluZy4gSWYgYmUgc2hvcnRlciB0aGFuIGlucHV0IGxlbmd0aCwgaW5wdXQgd2lsbCByZXR1cm4uXG4gICAqL1xuICBwdWJsaWMgc3RhdGljIHplcm9QYWRkaW5nKHZhbHVlOiBudW1iZXIgfCBzdHJpbmcsIGRlc2lyZWRMZW5ndGg6IG51bWJlcik6IHN0cmluZyB7XG4gICAgdmFsdWUgPSB2YWx1ZS50b1N0cmluZygpO1xuICAgIHdoaWxlICh2YWx1ZS5sZW5ndGggPCBkZXNpcmVkTGVuZ3RoKSB7XG4gICAgICB2YWx1ZSA9ICcwJyArIHZhbHVlO1xuICAgIH1cbiAgICByZXR1cm4gdmFsdWU7XG4gIH1cblxuICAvKipcbiAgICogRXh0cmFjdHMgR2VvcmdpYW4gRGF0ZSBvYmplY3QgZnJvbSBhIEphbGFsaSBkYXRlIHN0cmluZy5cbiAgICogQHBhcmFtIGRhdGVTdHJpbmcgYSBKYWxhbGkgZGF0ZSBzdHJpbmcgZm9sbG93aW5nIHRoaXMgcGF0dGVybjpcbiAgICpcbiAgICogICAgICAgIFwieXl5eSBtbW0gZGQgSEg6TU06U1NcIlxuICAgKiAgICAgICAgb3IgdGhpcyBwYXR0ZXJuOlxuICAgKlxuICAgKiAgICAgICAgXCJ5eXl5IG1tbW0gZGQgSEg6TU06U1NcIi5cbiAgICogQGV4YW1wbGUgMTEg2K/bjCAxMzQ4IDAwOjAwOjAwXG4gICAqIEBleGFtcGxlIDExIERleSAxMzQ4IDAwOjAwOjAwXG4gICAqIEByZXR1cm4gYSBHZW9yZ2lhbiBEYXRlIG9iamVjdC5cbiAgICovXG4gIHB1YmxpYyBzdGF0aWMgcGFyc2UoZGF0ZVN0cmluZzogc3RyaW5nKTogbnVtYmVyIHtcbiAgICBjb25zdCBjYWxjdWxhdG9yID0gbmV3IEphbGFsaURhdGVDYWxjdWxhdG9yU2VydmljZShuZXcgSmFsYWxpRGF0ZVZhbGlkYXRvclNlcnZpY2UoKSk7XG4gICAgY29uc3QgZGF0ZUFycmF5ID0gZGF0ZVN0cmluZy5zcGxpdCgnICcpO1xuICAgIGlmIChkYXRlQXJyYXkubGVuZ3RoIDwgMykgeyB0aHJvdyBuZXcgSW52YWxpZEphbGFsaURhdGVFcnJvcigpOyB9XG4gICAgY29uc3QgZGF5ID0gcGFyc2VJbnQoZGF0ZUFycmF5WzBdKTtcbiAgICBsZXQgbW9udGggPSBKRGF0ZS5GQV9NT05USFMuaW5kZXhPZihkYXRlQXJyYXlbMV0pO1xuICAgIGlmIChtb250aCA9PT0gLTEpIHsgbW9udGggPSBKRGF0ZS5FTl9NT05USFMuaW5kZXhPZihkYXRlQXJyYXlbMV0pOyB9XG4gICAgaWYgKG1vbnRoID09PSAtMSkgeyB0aHJvdyBuZXcgSW52YWxpZEphbGFsaURhdGVFcnJvcigpOyB9XG4gICAgY29uc3QgeWVhciA9IHBhcnNlSW50KGRhdGVBcnJheVsyXSk7XG4gICAgY29uc3QgdGltZUFycmF5ID0gZGF0ZUFycmF5Lmxlbmd0aCA+IDMgPyBkYXRlQXJyYXlbM10uc3BsaXQoJzonKSA6IFsnMCcsICcwJywgJzAnXTtcbiAgICBjb25zdCBob3VyID0gcGFyc2VJbnQodGltZUFycmF5WzBdKTtcbiAgICBjb25zdCBtaW4gPSBwYXJzZUludCh0aW1lQXJyYXlbMV0pO1xuICAgIGNvbnN0IHNlYyA9IHBhcnNlSW50KHRpbWVBcnJheVsyXSk7XG4gICAgY29uc3QgZ0RhdGUgPSBjYWxjdWxhdG9yLmNvbnZlcnRUb0dlb3JnaWFuKHllYXIsIG1vbnRoLCBkYXkpO1xuICAgIGdEYXRlLnNldEhvdXJzKGhvdXIsIG1pbiwgc2VjKTtcbiAgICByZXR1cm4gZ0RhdGUuZ2V0VGltZSgpO1xuICB9XG5cblxuICAvKipcbiAgICogRm9yIGNyZWF0aW5nIGEgSkRhdGUgb2JqZWN0LCB5b3UgaGF2ZSA1IGRpZmZlcmVudCBvcHRpb25zLlxuICAgKlxuICAgKiAxLSBJZiB5b3Ugd2FudCB0byBoYXZlIGN1cnJlbnQgZGF0ZSBhbmQgdGltZSwgeW91IGNhbiBzaW1wbHkgY2FsbCBuZXcgSkRhdGUoKSB3aXRob3V0IGFueSBwYXJhbWV0ZXIuXG4gICAqXG4gICAqIDItIElmIHlvdSB3YW50IHRvIGNyZWF0ZSBKRGF0ZSBvYmplY3QgZnJvbSBhIGphbGFsaSBkYXRlIHN0cmluZyBhcyBkZXNjcmliZWQgaW4gdGhlIGBwYXJzYCBtZXRob2QgZG9jdW1lbnQsIHlvdSBjYW4gcGFzcyB0aGF0IHN0cmluZyBhc1xuICAgKiAgICBmaXJzdCBwYXJhbWV0ZXIgYW5kIGxlYXZlIG90aGVycyBlbXB0eS5cbiAgICpcbiAgICogMyAtIElmIHlvdSB3YW50IHRvIGNyZWF0ZSBKRGF0ZSBvYmplY3QgZnJvbSBudW1iZXIgb2YgcGFzc2VkIG1pbGxpc2Vjb25kcyBmcm9tIFVOSVggZXBvY2ggKGZvciBleGFtcGxlIGNyZWF0aW5nIGEgSmFsYWxpIGRhdGUgb2JqZWN0XG4gICAqICAgICBmcm9tIHJlc3VsdCBvZiBnZXRUaW1lIG1ldGhvZCBvZiBhbm90aGVyIERhdGUgb2JqZWN0KSwgeW91IGNhbiBwYXNzIHRoZSBudW1iZXIgYXMgZmlyc3QgcGFyYW1ldGVyIGFuZCBsZWF2ZSBvdGhlcnMgYWxvbmUuXG4gICAqXG4gICAqIDQgLSBJZiB5b3Ugd2FudCB0byBjcmVhdGUgSkRhdGUgb2JqZWN0IGZyb20gYSBHZW9yZ2lhbiBEYXRlIG9iamVjdCwgeW91IGNhbiBzaW1wbHkgcGFzcyB0aGF0IERhdGUgb2JqZWN0IGFzIGZpcnN0IHBhcmFtZXRlciBhbmQgbGVhdmVcbiAgICogICAgIG90aGVycyBlbXB0eS5cbiAgICpcbiAgICogNS0gSWYgeW91IHdhbnQgdG8gY3JlYXRlIEpEYXRlIG9iamVjdCBmcm9tIGRhdGUgYW5kIHRpbWUgdmFsdWVzLCB5b3UgY2FuIHNpbXBseSBmaWxsIGNvcnJlc3BvbmRpbmcgcGFyYW1ldGVycyBvZiBlYWNoIGRhdGUgYW5kIHRpbWVcbiAgICogdmFsdWUgdG8gdGhlIGNvbnN0cnVjdG9yLiBZb3UgZG9uJ3QgaGF2ZSB0byBmaWxsIGFsbCBvZiB0aGUgcGFyYW1ldGVycy4gb25seSB0aG9zZSB5b3UgbmVlZC4gb3RoZXIgcGFyYW1ldGVycyB3aWxsIGZpbGwgd2l0aCB6ZXJvLlxuICAgKiBFeGFtcGxlcyBvZiBhbGwgb2YgdGhvc2Ugc2NlbmFyaW9zOlxuICAgKlxuICAgKiBAZXhhbXBsZSBuZXcgSkRhdGUoKVxuICAgKiBAZXhhbXBsZSBuZXcgSkRhdGUoJzExINiv24wgMTM0OCAwMDowMDowMCcpXG4gICAqIEBleGFtcGxlIG5ldyBKRGF0ZSgtMTI2MDAwMDApXG4gICAqIEBleGFtcGxlIG5ldyBKRGF0ZShuZXcgRGF0ZSgyMDE4LCAwLCAxKSlcbiAgICogQGV4YW1wbGUgbmV3IEpEYXRlKDEzOTcsIDAsIDI1KVxuICAgKiBAZXhhbXBsZSBuZXcgSkRhdGUoMTM5NywgMTEsIDI1LCAxMiwgMzIsIDQ1LCAxMjMpXG4gICAqIEBwYXJhbSBqWWVhclxuICAgKiBAcGFyYW0gak1vbnRoIE1vbnRoIG51bWJlciBzdGFydGluZyBmcm9tIDAgYW5kIHNob3VsZCBiZSBMRVNTRVIgdGhhbiAxMi5cbiAgICogQHBhcmFtIGpEYXlcbiAgICogQHBhcmFtIGhvdXJzXG4gICAqIEBwYXJhbSBtaW51dGVzXG4gICAqIEBwYXJhbSBzZWNvbmRzXG4gICAqIEBwYXJhbSBtaWxsaXNlY29uZHNcbiAgICogQHRocm93cyBJbnZhbGlkSmFsYWxpRGF0ZUVycm9yXG4gICAqL1xuICBjb25zdHJ1Y3RvcihqWWVhcj86IG51bWJlciB8IHN0cmluZyB8IERhdGUsIGpNb250aD86IG51bWJlciwgakRheT86IG51bWJlciwgaG91cnM6IG51bWJlciA9IDAsIG1pbnV0ZXM6IG51bWJlciA9IDAsXG4gICAgICAgICAgICAgIHNlY29uZHM6IG51bWJlciA9IDAsIG1pbGxpc2Vjb25kczogbnVtYmVyID0gMCkge1xuICAgIGlmICghalllYXIpIHtcbiAgICAgIHRoaXMuX2NyZWF0ZUZyb21EYXRlKG5ldyBEYXRlKCkpO1xuICAgIH0gZWxzZSBpZiAodHlwZW9mIGpZZWFyID09PSAnc3RyaW5nJyAmJiBqTW9udGggPT09IHVuZGVmaW5lZCkge1xuICAgICAgdGhpcy5fY3JlYXRlRnJvbURhdGUobmV3IERhdGUoSkRhdGUucGFyc2UoalllYXIpKSk7XG4gICAgfSBlbHNlIGlmICh0eXBlb2YgalllYXIgPT09ICdudW1iZXInICYmIGpNb250aCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICB0aGlzLl9jcmVhdGVGcm9tRGF0ZShuZXcgRGF0ZShqWWVhcikpO1xuICAgIH0gZWxzZSBpZiAoalllYXIgaW5zdGFuY2VvZiBEYXRlICYmIGpNb250aCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICB0aGlzLl9jcmVhdGVGcm9tRGF0ZShqWWVhcik7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgLy8gQHRzLWlnbm9yZVxuICAgICAgdGhpcy5fZ0RhdGUgPSB0aGlzLl9jYWxjdWxhdG9yLmNvbnZlcnRUb0dlb3JnaWFuKGpZZWFyLCBqTW9udGgsIGpEYXkpO1xuICAgICAgLy8gQHRzLWlnbm9yZVxuICAgICAgdGhpcy5falllYXIgPSBqWWVhcjtcbiAgICAgIHRoaXMuX2pNb250aCA9IGpNb250aDtcbiAgICAgIHRoaXMuX2pEYXkgPSBqRGF5O1xuICAgICAgdGhpcy5fZ0RhdGUuc2V0SG91cnMoaG91cnMsIG1pbnV0ZXMsIHNlY29uZHMsIG1pbGxpc2Vjb25kcyk7XG4gICAgfVxuICAgIHRoaXMuX2NoZWNrX2RhdGVfdmFsaWRpdHkoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBUaGlzIG1ldGhvZCByZWNhbGN1bGF0ZXMgdGhlIGdEYXRlIHZhbHVlIHdpdGggcHJpdmF0ZSBhdHRyaWJ1dGVzIHRob3NlIHN0b3JpbmcgSmFsYWxpIGRhdGUgcGFydHMuXG4gICAqL1xuICBwcml2YXRlIF9yZW5ld0dEYXRlKCk6IHZvaWQge1xuICAgIHRoaXMuX2dEYXRlID0gdGhpcy5fY2FsY3VsYXRvci5jb252ZXJ0VG9HZW9yZ2lhbih0aGlzLl9qWWVhciwgdGhpcy5fak1vbnRoLCB0aGlzLl9qRGF5KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTZXRzIEphbGFsaSB5ZWFyIHZhbHVlIHRvIHRoZSBpbnB1dCBwYXJhbWV0ZXIgYW5kIHJlY2FsY3VsYXRlcyBnRGF0ZSBhdHRyaWJ1dGUuXG4gICAqIEBwYXJhbSB2YWx1ZSBmdWxsIEphbGFsaSB5ZWFyIGxpa2UgMTM5N1xuICAgKi9cbiAgcHJpdmF0ZSBzZXQgalllYXIodmFsdWU6IG51bWJlcikge1xuICAgIHRoaXMuX2pZZWFyID0gdmFsdWU7XG4gICAgdGhpcy5fY2hlY2tfZGF0ZV92YWxpZGl0eSgpO1xuICAgIHRoaXMuX3JlbmV3R0RhdGUoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTZXRzIEphbGFsaSBtb250aCB2YWx1ZSB0byB0aGUgaW5wdXQgcGFyYW1ldGVyIGFuZCByZWNhbGN1bGF0ZXMgZ0RhdGUgYXR0cmlidXRlLlxuICAgKiBAcGFyYW0gdmFsdWUgbW9udGggbnVtYmVyIHN0YXJ0aW5nIGZyb20gemVyb1xuICAgKi9cbiAgcHJpdmF0ZSBzZXQgak1vbnRoKHZhbHVlOiBudW1iZXIpIHtcbiAgICB0aGlzLl9qTW9udGggPSB2YWx1ZTtcbiAgICB0aGlzLl9jaGVja19kYXRlX3ZhbGlkaXR5KCk7XG4gICAgdGhpcy5fcmVuZXdHRGF0ZSgpO1xuICB9XG5cbiAgLyoqXG4gICAqIFNldHMgSmFsYWxpIGRheSB2YWx1ZSB0byB0aGUgaW5wdXQgcGFyYW1ldGVyIGFuZCByZWNhbGN1bGF0ZXMgZ0RhdGUgYXR0cmlidXRlLlxuICAgKiBAcGFyYW0gdmFsdWUgZGF5IG51bWJlciBzdGFydGluZyBmcm9tIDEuXG4gICAqL1xuICBwcml2YXRlIHNldCBqRGF5KHZhbHVlOiBudW1iZXIpIHtcbiAgICB0aGlzLl9qRGF5ID0gdmFsdWU7XG4gICAgdGhpcy5fY2hlY2tfZGF0ZV92YWxpZGl0eSgpO1xuICAgIHRoaXMuX3JlbmV3R0RhdGUoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiB0aHJvd3MgSW52YWxpZEphbGFsaURhdGVFcnJvciB3aGVuIGRhdGUgdmFsdWVzIG9mIHRoaXMgb2JqZWN0IHdvbid0IHJlcHJlc2VudCBhIHZhbGlkIEphbGFsaSBkYXRlLlxuICAgKiBPdGhlcndpc2Ugbm90aGluZyBoYXBwZW5zLlxuICAgKiBAdGhyb3dzIEludmFsaWRKYWxhbGlEYXRlRXJyb3JcbiAgICovXG4gIHByaXZhdGUgX2NoZWNrX2RhdGVfdmFsaWRpdHkoKTogdm9pZHtcbiAgICBpZiAoIXRoaXMuX2NhbGN1bGF0b3IudmFsaWRhdG9yLmlzVmFsaWRKRGF0ZSh0aGlzLl9qWWVhciwgdGhpcy5fak1vbnRoLCB0aGlzLl9qRGF5KSkgeyB0aHJvdyBuZXcgSW52YWxpZEphbGFsaURhdGVFcnJvcigpOyB9XG4gIH1cblxuICAvKipcbiAgICogQ2FsY3VsYXRlcyBKYWxhbGkgeWVhciBmcm9tIEdlb3JnaWFuIERhdGUgb2JqZWN0IGFuZCBzZXRzIHRoZSBhdHRyaWJ1dGVzIG9mIHRoZSBvYmplY3QgdG8gcHJvcGVyIHZhbHVlcy5cbiAgICogQHBhcmFtIGdEYXRlXG4gICAqL1xuICBwcml2YXRlIF9jcmVhdGVGcm9tRGF0ZShnRGF0ZTogRGF0ZSkge1xuICAgIGNvbnN0IGNvbnZlcnNpb25SZXN1bHQgPSB0aGlzLl9jYWxjdWxhdG9yLmNvbnZlcnRUb0phbGFsaShnRGF0ZSk7XG4gICAgdGhpcy5falllYXIgPSBjb252ZXJzaW9uUmVzdWx0LnllYXI7XG4gICAgdGhpcy5fak1vbnRoID0gY29udmVyc2lvblJlc3VsdC5tb250aDtcbiAgICB0aGlzLl9qRGF5ID0gY29udmVyc2lvblJlc3VsdC5kYXk7XG4gICAgdGhpcy5fZ0RhdGUgPSBnRGF0ZTtcbiAgfVxuXG4gIFtTeW1ib2wudG9QcmltaXRpdmVdKGhpbnQ6IFwiZGVmYXVsdFwiKTogc3RyaW5nO1xuXG4gIFtTeW1ib2wudG9QcmltaXRpdmVdKGhpbnQ6IFwic3RyaW5nXCIpOiBzdHJpbmc7XG5cbiAgW1N5bWJvbC50b1ByaW1pdGl2ZV0oaGludDogXCJudW1iZXJcIik6IG51bWJlcjtcblxuICBbU3ltYm9sLnRvUHJpbWl0aXZlXShoaW50OiBzdHJpbmcpOiBzdHJpbmcgfCBudW1iZXI7XG5cbiAgW1N5bWJvbC50b1ByaW1pdGl2ZV0oaGludDogXCJkZWZhdWx0XCIgfCBcInN0cmluZ1wiIHwgXCJudW1iZXJcIiB8IHN0cmluZyk6IHN0cmluZyB8IG51bWJlciB7XG4gICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcmV0dXJuIGEgcmVndWxhciBqYXZhc2NyaXB0IERhdGUgb2JqZWN0IHJlcHJlc2VudGluZyBHZW9yZ2lhbiBkYXRlIGNvcnJlc3BvbmRpbmcgdG8gdGhlIEphbGlsaSBkYXRlIG9mIHRoZSBKRGF0ZSBvYmplY3QuXG4gICAqL1xuICBnZXRHZW9yZ2lhbkRhdGUoKTogRGF0ZSB7XG4gICAgcmV0dXJuIHRoaXMuX2dEYXRlO1xuICB9XG5cbiAgLyoqXG4gICAqIEByZXR1cm4gdGhlIGRheSBvZiB0aGUgbW9udGggZm9yIHRoZSBzcGVjaWZpZWQgZGF0ZSBhY2NvcmRpbmcgdG8gbG9jYWwgdGltZS5cbiAgICovXG4gIGdldERhdGUoKTogbnVtYmVyIHtcbiAgICByZXR1cm4gdGhpcy5fakRheTtcbiAgfVxuXG4gIC8qKlxuICAgKiAgQHJldHVybiB0aGUgZGF5IG9mIHRoZSB3ZWVrIGZvciB0aGUgc3BlY2lmaWVkIGRhdGUgYWNjb3JkaW5nIHRvIGxvY2FsIHRpbWUsIHdoZXJlIDAgcmVwcmVzZW50cyBGcmlkYXkgYW5kIDYgaXMgVGh1cnNkYXkuXG4gICAqL1xuICBnZXREYXkoKTogbnVtYmVyIHtcbiAgICByZXR1cm4gKHRoaXMuX2dEYXRlLmdldERheSgpICsgMikgJSA3O1xuICB9XG5cbiAgLyoqXG4gICAqIEByZXR1cm4gdGhlIHllYXIgKDQgZGlnaXRzIGZvciB5ZWFycyBncmVhdGVyIHRoYW4gOTk5KSBvZiB0aGUgc3BlY2lmaWVkIGRhdGUgYWNjb3JkaW5nIHRvIGxvY2FsIHRpbWVcbiAgICogQGV4YW1wbGUgMTM5N1xuICAgKiBAZXhhbXBsZSAxMDBcbiAgICogKi9cbiAgZ2V0RnVsbFllYXIoKTogbnVtYmVyIHtcbiAgICByZXR1cm4gdGhpcy5falllYXI7XG4gIH1cblxuICAvKipcbiAgICogQHJldHVybiB0aGUgaG91ciBmb3IgdGhlIHNwZWNpZmllZCBkYXRlLCBhY2NvcmRpbmcgdG8gbG9jYWwgdGltZS5cbiAgICogQGV4YW1wbGUgMTBcbiAgICovXG4gIGdldEhvdXJzKCk6IG51bWJlciB7XG4gICAgcmV0dXJuIHRoaXMuX2dEYXRlLmdldEhvdXJzKCk7XG4gIH1cblxuICAvKipcbiAgICogQ29udmVydHMgZGVmYXVsdCAyNC1ob3VyIGNsb2NrIGhvdXIgdmFsdWUgdG8gdGhlIDEyLWhvdXIgY2xvY2sgdmVyc2lvbi5cbiAgICogQHJldHVybiBhIG51bWJlciBiZXR3ZWVuIDEgdG8gMTJcbiAgICovXG4gIGdldEhvdXJzMTJob3VyQ2xvY2soKTogbnVtYmVyIHtcbiAgICBjb25zdCByZXN1bHQgPSB0aGlzLmdldEhvdXJzKCkgJSAxMjtcbiAgICByZXR1cm4gcmVzdWx0ID8gcmVzdWx0IDogMTI7XG4gIH1cblxuICAvKipcbiAgICogQHJldHVybiB0aGUgbWlsbGlzZWNvbmRzIGluIHRoZSBzcGVjaWZpZWQgZGF0ZSBhY2NvcmRpbmcgdG8gbG9jYWwgdGltZS5cbiAgICovXG4gIGdldE1pbGxpc2Vjb25kcygpOiBudW1iZXIge1xuICAgIHJldHVybiB0aGlzLl9nRGF0ZS5nZXRNaWxsaXNlY29uZHMoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAUmV0dXJuIHRoZSBtaW51dGVzIGluIHRoZSBzcGVjaWZpZWQgZGF0ZSBhY2NvcmRpbmcgdG8gbG9jYWwgdGltZS5cbiAgICovXG4gIGdldE1pbnV0ZXMoKTogbnVtYmVyIHtcbiAgICByZXR1cm4gdGhpcy5fZ0RhdGUuZ2V0TWludXRlcygpO1xuICB9XG5cbiAgLyoqXG4gICAqIEByZXR1cm4gdGhlIG1vbnRoIGluIHRoZSBzcGVjaWZpZWQgZGF0ZSBhY2NvcmRpbmcgdG8gbG9jYWwgdGltZSwgYXMgYSB6ZXJvLWJhc2VkIHZhbHVlXG4gICAqIHdoZXJlIHplcm8gaW5kaWNhdGVzIHRoZSBmaXJzdCBtb250aCBvZiB0aGUgeWVhci5cbiAgICovXG4gIGdldE1vbnRoKCk6IG51bWJlciB7XG4gICAgcmV0dXJuIHRoaXMuX2pNb250aDtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcmV0dXJuIHRoZSBzZWNvbmRzIGluIHRoZSBzcGVjaWZpZWQgZGF0ZSBhY2NvcmRpbmcgdG8gbG9jYWwgdGltZS5cbiAgICovXG4gIGdldFNlY29uZHMoKTogbnVtYmVyIHtcbiAgICByZXR1cm4gdGhpcy5fZ0RhdGUuZ2V0U2Vjb25kcygpO1xuICB9XG5cbiAgLyoqXG4gICAqIEphdmFTY3JpcHQgdXNlcyBtaWxsaXNlY29uZHMgYXMgdGhlIHVuaXQgb2YgbWVhc3VyZW1lbnQsIHdoZXJlYXMgVW5peCBUaW1lIGlzIGluIHNlY29uZHMuXG4gICAqXG4gICAqIGdldFRpbWUoKSBhbHdheXMgdXNlcyBVVEMgZm9yIHRpbWUgcmVwcmVzZW50YXRpb24uIEZvciBleGFtcGxlLCBhIGNsaWVudCBicm93c2VyIGluIG9uZSB0aW1lem9uZSwgZ2V0VGltZSgpIHdpbGwgYmUgdGhlIHNhbWUgYXMgYVxuICAgKiBjbGllbnQgYnJvd3NlciBpbiBhbnkgb3RoZXIgdGltZXpvbmUuXG4gICAqXG4gICAqWW91IGNhbiB1c2UgdGhpcyBtZXRob2QgdG8gaGVscCBhc3NpZ24gYSBkYXRlIGFuZCB0aW1lIHRvIGFub3RoZXIgRGF0ZSBvYmplY3QuIFRoaXMgbWV0aG9kIGlzIGZ1bmN0aW9uYWxseSBlcXVpdmFsZW50IHRvIHRoZSB2YWx1ZU9mKCkgbWV0aG9kLlxuICAgKiBAcmV0dXJuIHRoZSBudW1iZXIgb2YgbWlsbGlzZWNvbmRzIHNpbmNlIHRoZSBVbml4IEVwb2NoLlxuICAgKi9cbiAgZ2V0VGltZSgpOiBudW1iZXIge1xuICAgIHJldHVybiB0aGlzLl9nRGF0ZS5nZXRUaW1lKCk7XG4gIH1cblxuICAvKipcbiAgICogQXR0ZW50aW9uOiBOb3QgaW1wbGVtZW50ZWRcbiAgICogQHJldHVybiB0aGUgdGltZSB6b25lIGRpZmZlcmVuY2UsIGluIG1pbnV0ZXMsIGZyb20gY3VycmVudCBsb2NhbGUgKGhvc3Qgc3lzdGVtIHNldHRpbmdzKSB0byBVVENcbiAgICogQHRvZG8gYWRkIGltcGxlbWVudGF0aW9uXG4gICAqL1xuICBnZXRUaW1lem9uZU9mZnNldCgpOiBudW1iZXIge1xuICAgIHJldHVybiB0aGlzLl9nRGF0ZS5nZXRUaW1lem9uZU9mZnNldCgpO1xuICB9XG5cbiAgLyoqXG4gICAqIE91dHB1dCBpcyBub3QgamFsYWxpIGRheS5cbiAgICogQHJldHVybiBnZXRVVENEYXRlIG9mIHRoZSBjb3JyZXNwb25kaW5nIEdlb3JnaWFuIGRhdGUuXG4gICAqIEB0b2RvIGFkZCBpbXBsZW1lbnRhdGlvblxuICAgKi9cbiAgZ2V0VVRDRGF0ZSgpOiBudW1iZXIge1xuICAgIHJldHVybiB0aGlzLl9nRGF0ZS5nZXRVVENEYXRlKCk7XG4gIH1cblxuICAvKipcbiAgICogT3V0cHV0IGlzIG5vdCBqYWxhbGkgZGF5LlxuICAgKiBAcmV0dXJuIGdldFVUQ0RheSBvZiB0aGUgY29ycmVzcG9uZGluZyBHZW9yZ2lhbiBkYXRlLlxuICAgKiBAdG9kbyBhZGQgaW1wbGVtZW50YXRpb25cbiAgICovXG4gIGdldFVUQ0RheSgpOiBudW1iZXIge1xuICAgIHJldHVybiB0aGlzLl9nRGF0ZS5nZXRVVENEYXkoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBPdXRwdXQgaXMgbm90IGEgSmFsYWxpIFllYXIuXG4gICAqIEByZXR1cm4gZ2V0VVRDRnVsbFllYXIgb2YgdGhlIGNvcnJlc3BvbmRpbmcgR2VvcmdpYW4gZGF0ZS5cbiAgICogQHRvZG8gYWRkIGltcGxlbWVudGF0aW9uXG4gICAqL1xuICBnZXRVVENGdWxsWWVhcigpOiBudW1iZXIge1xuICAgIHJldHVybiB0aGlzLl9nRGF0ZS5nZXRVVENGdWxsWWVhcigpO1xuICB9XG5cbiAgLyoqXG4gICAqIEByZXR1cm4gZ2V0VVRDSG91cnMgb2YgdGhlIGNvcnJlc3BvbmRpbmcgR2VvcmdpYW4gZGF0ZS5cbiAgICogQHRvZG8gYWRkIGltcGxlbWVudGF0aW9uXG4gICAqL1xuICBnZXRVVENIb3VycygpOiBudW1iZXIge1xuICAgIHJldHVybiB0aGlzLl9nRGF0ZS5nZXRVVENIb3VycygpO1xuICB9XG5cbiAgLyoqXG4gICAqIEByZXR1cm4gZ2V0VVRDTWlsbGlzZWNvbmRzIG9mIHRoZSBjb3JyZXNwb25kaW5nIEdlb3JnaWFuIGRhdGUuXG4gICAqIEB0b2RvIGFkZCBpbXBsZW1lbnRhdGlvblxuICAgKi9cbiAgZ2V0VVRDTWlsbGlzZWNvbmRzKCk6IG51bWJlciB7XG4gICAgcmV0dXJuIHRoaXMuX2dEYXRlLmdldFVUQ01pbGxpc2Vjb25kcygpO1xuICB9XG5cbiAgLyoqXG4gICAqIEByZXR1cm4gZ2V0VVRDTWludXRlcyBvZiB0aGUgY29ycmVzcG9uZGluZyBHZW9yZ2lhbiBkYXRlLlxuICAgKiBAdG9kbyBhZGQgaW1wbGVtZW50YXRpb25cbiAgICovXG4gIGdldFVUQ01pbnV0ZXMoKTogbnVtYmVyIHtcbiAgICByZXR1cm4gdGhpcy5fZ0RhdGUuZ2V0VVRDTWludXRlcygpO1xuICB9XG5cbiAgLyoqXG4gICAqIE91dHB1dCBpcyBub3QgYSBKYWxhbGkgWWVhci5cbiAgICogQHJldHVybiBnZXRVVENNb250aCBvZiB0aGUgY29ycmVzcG9uZGluZyBHZW9yZ2lhbiBkYXRlLlxuICAgKiBAdG9kbyBhZGQgaW1wbGVtZW50YXRpb25cbiAgICovXG4gIGdldFVUQ01vbnRoKCk6IG51bWJlciB7XG4gICAgcmV0dXJuIHRoaXMuX2dEYXRlLmdldFVUQ01vbnRoKCk7XG4gIH1cblxuICAvKipcbiAgICogQHJldHVybiBnZXRVVENTZWNvbmRzIG9mIHRoZSBjb3JyZXNwb25kaW5nIEdlb3JnaWFuIGRhdGUuXG4gICAqIEB0b2RvIGFkZCBpbXBsZW1lbnRhdGlvblxuICAgKi9cbiAgZ2V0VVRDU2Vjb25kcygpOiBudW1iZXIge1xuICAgIHJldHVybiB0aGlzLl9nRGF0ZS5nZXRVVENTZWNvbmRzKCk7XG4gIH1cblxuICAvKipcbiAgICogc2V0cyB0aGUgZGF5IG9mIHRoZSBKRGF0ZSBvYmplY3QgcmVsYXRpdmUgdG8gdGhlIGJlZ2lubmluZyBvZiB0aGUgY3VycmVudGx5IHNldCBtb250aC5cbiAgICogQHBhcmFtIGRhdGUgZGF5IG51bWJlciBzdGFydHMgZnJvbSAxLlxuICAgKiBAcmV0dXJuIFRoZSBudW1iZXIgb2YgbWlsbGlzZWNvbmRzIGJldHdlZW4gMSBKYW51YXJ5IDE5NzAgMDA6MDA6MDAgVVRDIGFuZCB0aGUgZ2l2ZW4gZGF0ZSAodGhlIERhdGUgb2JqZWN0IGlzIGFsc28gY2hhbmdlZCBpbiBwbGFjZSkuXG4gICAqL1xuICBzZXREYXRlKGRhdGU6IG51bWJlcik6IG51bWJlciB7XG4gICAgdGhpcy5qRGF5ID0gZGF0ZTtcbiAgICByZXR1cm4gdGhpcy5nZXRUaW1lKCk7XG4gIH1cblxuICAvKipcbiAgICogc2V0cyB0aGUgZnVsbCB5ZWFyIGZvciBhIHNwZWNpZmllZCBkYXRlIGFjY29yZGluZyB0byBsb2NhbCB0aW1lLiBSZXR1cm5zIG5ldyB0aW1lc3RhbXAuXG4gICAqIEBwYXJhbSB5ZWFyIGZ1bGwgSmFsYWxpIHllYXIgbGlrZSAxMzk3XG4gICAqIEBwYXJhbSBtb250aCBudW1iZXIgb2YgbW9udGggc3RhcnRpbmcgZnJvbSAwXG4gICAqIEBwYXJhbSBkYXRlIG51bWJlciBvZiBkYXkgc3RhcnRpbmcgZnJvbSAxXG4gICAqL1xuICBzZXRGdWxsWWVhcih5ZWFyOiBudW1iZXIsIG1vbnRoPzogbnVtYmVyLCBkYXRlPzogbnVtYmVyKTogbnVtYmVyIHtcbiAgICB0aGlzLmpZZWFyID0geWVhcjtcbiAgICBpZiAobW9udGgpIHsgdGhpcy5qTW9udGggPSBtb250aDsgfVxuICAgIGlmIChkYXRlKSB7dGhpcy5qRGF5ID0gZGF0ZTsgfVxuICAgIHJldHVybiB0aGlzLmdldFRpbWUoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTZXRzIHRoZSBob3VycyBmb3IgYSBzcGVjaWZpZWQgZGF0ZSBhY2NvcmRpbmcgdG8gbG9jYWwgdGltZSwgYW5kIHJldHVybnMgdGhlIG51bWJlciBvZiBtaWxsaXNlY29uZHMgc2luY2VcbiAgICogSmFudWFyeSAxLCAxOTcwIDAwOjAwOjAwIFVUQyB1bnRpbCB0aGUgdGltZSByZXByZXNlbnRlZCBieSB0aGUgdXBkYXRlZCBKRGF0ZSBpbnN0YW5jZS5cbiAgICogQHBhcmFtIGhvdXJzIEFuIGludGVnZXIgYmV0d2VlbiAwIGFuZCAyMywgcmVwcmVzZW50aW5nIHRoZSBob3VyXG4gICAqIEBwYXJhbSBtaW4gQW4gaW50ZWdlciBiZXR3ZWVuIDAgYW5kIDU5LCByZXByZXNlbnRpbmcgdGhlIG1pbnV0ZXMuXG4gICAqIEBwYXJhbSBzZWMgQW4gaW50ZWdlciBiZXR3ZWVuIDAgYW5kIDU5LCByZXByZXNlbnRpbmcgdGhlIHNlY29uZHMuXG4gICAqIEBwYXJhbSBtcyBBIG51bWJlciBiZXR3ZWVuIDAgYW5kIDk5OSwgcmVwcmVzZW50aW5nIHRoZSBtaWxsaXNlY29uZHMuXG4gICAqIEByZXR1cm4gVGhlIG51bWJlciBvZiBtaWxsaXNlY29uZHMgYmV0d2VlbiBKYW51YXJ5IDEsIDE5NzAgMDA6MDA6MDAgVVRDIGFuZCB0aGUgdXBkYXRlZCBkYXRlLlxuICAgKi9cbiAgc2V0SG91cnMoaG91cnM6IG51bWJlciwgbWluPzogbnVtYmVyLCBzZWM/OiBudW1iZXIsIG1zPzogbnVtYmVyKTogbnVtYmVyIHtcbiAgICB0aGlzLl9nRGF0ZS5zZXRIb3Vycyhob3Vycyk7XG4gICAgaWYgKG1pbiAhPT0gdW5kZWZpbmVkKSB7IHRoaXMuc2V0TWludXRlcyhtaW4pOyB9XG4gICAgaWYgKHNlYyAhPT0gdW5kZWZpbmVkKSB7IHRoaXMuc2V0U2Vjb25kcyhzZWMpOyB9XG4gICAgaWYgKG1zICE9PSB1bmRlZmluZWQpIHsgdGhpcy5zZXRNaWxsaXNlY29uZHMobXMpOyB9XG4gICAgcmV0dXJuIHRoaXMuZ2V0VGltZSgpO1xuICB9XG5cbiAgLyoqXG4gICAqIFNldHMgdGhlIG1pbGxpc2Vjb25kcyBmb3IgYSBzcGVjaWZpZWQgZGF0ZSBhY2NvcmRpbmcgdG8gbG9jYWwgdGltZS5cbiAgICogQHBhcmFtIG1zIEEgbnVtYmVyIGJldHdlZW4gMCBhbmQgOTk5LCByZXByZXNlbnRpbmcgdGhlIG1pbGxpc2Vjb25kcy5cbiAgICogQHJldHVybiBUaGUgbnVtYmVyIG9mIG1pbGxpc2Vjb25kcyBiZXR3ZWVuIDEgSmFudWFyeSAxOTcwIDAwOjAwOjAwIFVUQyBhbmQgdGhlIHVwZGF0ZWQgZGF0ZS5cbiAgICovXG4gIHNldE1pbGxpc2Vjb25kcyhtczogbnVtYmVyKTogbnVtYmVyIHtcbiAgICB0aGlzLl9nRGF0ZS5zZXRNaWxsaXNlY29uZHMobXMpO1xuICAgIHJldHVybiB0aGlzLmdldFRpbWUoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTZXRzIHRoZSBtaW51dGVzIGZvciBhIHNwZWNpZmllZCBkYXRlIGFjY29yZGluZyB0byBsb2NhbCB0aW1lLlxuICAgKiBAcGFyYW0gbWluIEFuIGludGVnZXIgYmV0d2VlbiAwIGFuZCA1OSwgcmVwcmVzZW50aW5nIHRoZSBtaW51dGVzLlxuICAgKiBAcGFyYW0gc2VjIEFuIGludGVnZXIgYmV0d2VlbiAwIGFuZCA1OSwgcmVwcmVzZW50aW5nIHRoZSBzZWNvbmRzLlxuICAgKiBAcGFyYW0gbXMgQSBudW1iZXIgYmV0d2VlbiAwIGFuZCA5OTksIHJlcHJlc2VudGluZyB0aGUgbWlsbGlzZWNvbmRzLlxuICAgKiBAcmV0dXJuIFRoZSBudW1iZXIgb2YgbWlsbGlzZWNvbmRzIGJldHdlZW4gMSBKYW51YXJ5IDE5NzAgMDA6MDA6MDAgVVRDIGFuZCB0aGUgdXBkYXRlZCBkYXRlLlxuICAgKi9cbiAgc2V0TWludXRlcyhtaW46IG51bWJlciwgc2VjPzogbnVtYmVyLCBtcz86IG51bWJlcik6IG51bWJlciB7XG4gICAgdGhpcy5fZ0RhdGUuc2V0TWludXRlcyhtaW4pO1xuICAgIGlmKHNlYyAhPT0gdW5kZWZpbmVkKSB7IHRoaXMuc2V0U2Vjb25kcyhzZWMpOyB9XG4gICAgaWYgKG1zICE9PSB1bmRlZmluZWQpIHsgdGhpcy5zZXRNaWxsaXNlY29uZHMobXMpOyB9XG4gICAgcmV0dXJuIHRoaXMuZ2V0VGltZSgpO1xuICB9XG5cbiAgLyoqXG4gICAqIFNldHMgdGhlIG1vbnRoIGZvciBhIHNwZWNpZmllZCBkYXRlIGFjY29yZGluZyB0byB0aGUgY3VycmVudGx5IHNldCB5ZWFyLlxuICAgKiBAcGFyYW0gbW9udGggQW4gaW50ZWdlciBiZXR3ZWVuIDAgYW5kIDExLCByZXByZXNlbnRpbmcgdGhlIG1vbnRocyBGYXJ2YXJkaW4gdGhyb3VnaCBFc2ZhbmQuXG4gICAqIEBwYXJhbSBkYXRlIEFuIGludGVnZXIgZnJvbSAxIHRvIDMxLCByZXByZXNlbnRpbmcgdGhlIGRheSBvZiB0aGUgbW9udGguXG4gICAqIEByZXR1cm4gVGhlIG51bWJlciBvZiBtaWxsaXNlY29uZHMgYmV0d2VlbiAxIEphbnVhcnkgMTk3MCAwMDowMDowMCBVVEMgYW5kIHRoZSB1cGRhdGVkIGRhdGUuXG4gICAqL1xuICBzZXRNb250aChtb250aDogbnVtYmVyLCBkYXRlPzogbnVtYmVyKTogbnVtYmVyIHtcbiAgICB0aGlzLmpNb250aCA9IG1vbnRoO1xuICAgIGlmIChkYXRlICE9PSB1bmRlZmluZWQpIHsgdGhpcy5qRGF5ID0gZGF0ZTsgfVxuICAgIHJldHVybiB0aGlzLmdldFRpbWUoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTZXRzIHRoZSBzZWNvbmRzIGZvciBhIHNwZWNpZmllZCBkYXRlIGFjY29yZGluZyB0byBsb2NhbCB0aW1lLlxuICAgKiBAcGFyYW0gc2VjIEFuIGludGVnZXIgYmV0d2VlbiAwIGFuZCA1OSwgcmVwcmVzZW50aW5nIHRoZSBzZWNvbmRzLlxuICAgKiBAcGFyYW0gbXMgQSBudW1iZXIgYmV0d2VlbiAwIGFuZCA5OTksIHJlcHJlc2VudGluZyB0aGUgbWlsbGlzZWNvbmRzLlxuICAgKiBAcmV0dXJuIFRoZSBudW1iZXIgb2YgbWlsbGlzZWNvbmRzIGJldHdlZW4gMSBKYW51YXJ5IDE5NzAgMDA6MDA6MDAgVVRDIGFuZCB0aGUgdXBkYXRlZCBkYXRlLlxuICAgKi9cbiAgc2V0U2Vjb25kcyhzZWM6IG51bWJlciwgbXM/OiBudW1iZXIpOiBudW1iZXIge1xuICAgIHRoaXMuX2dEYXRlLnNldFNlY29uZHMoc2VjKTtcbiAgICBpZiAobXMgIT09IHVuZGVmaW5lZCkgeyB0aGlzLnNldE1pbGxpc2Vjb25kcyhtcyk7IH1cbiAgICByZXR1cm4gdGhpcy5nZXRUaW1lKCk7XG4gIH1cblxuICAvKipcbiAgICogU2V0cyB0aGUgSkRhdGUgb2JqZWN0IHRvIHRoZSB0aW1lIHJlcHJlc2VudGVkIGJ5IGEgbnVtYmVyIG9mIG1pbGxpc2Vjb25kcyBzaW5jZSBKYW51YXJ5IDEsIDE5NzAsIDAwOjAwOjAwIFVUQy5cbiAgICogQHBhcmFtIHRpbWUgc2V0cyB0aGUgRGF0ZSBvYmplY3QgdG8gdGhlIHRpbWUgcmVwcmVzZW50ZWQgYnkgYSBudW1iZXIgb2YgbWlsbGlzZWNvbmRzIHNpbmNlIEphbnVhcnkgMSwgMTk3MCwgMDA6MDA6MDAgVVRDLlxuICAgKiBAcmV0dXJuIFRoZSBudW1iZXIgb2YgbWlsbGlzZWNvbmRzIGJldHdlZW4gMSBKYW51YXJ5IDE5NzAgMDA6MDA6MDAgVVRDIGFuZCB0aGUgdXBkYXRlZCBkYXRlLlxuICAgKi9cbiAgc2V0VGltZSh0aW1lOiBudW1iZXIpOiBudW1iZXIge1xuICAgIHRoaXMuX2NyZWF0ZUZyb21EYXRlKG5ldyBEYXRlKHRpbWUpKTtcbiAgICByZXR1cm4gdGltZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBzZXRzIHRoZSBkYXkgb2YgdGhlIG1vbnRoIGZvciBhIHNwZWNpZmllZCBkYXRlIGFjY29yZGluZyB0byB1bml2ZXJzYWwgdGltZS5cbiAgICogVGhlbiByZWNyZWF0ZSB0aGUgSkRhdGUgb2JqZWN0IGZyb20gbmV3IEdlb3JnaWFuIG9iamVjdC5cbiAgICogQHBhcmFtICBkYXRlIEFuIGludGVnZXIgZnJvbSAxIHRvIDMxLCByZXByZXNlbnRpbmcgdGhlIGRheSBvZiB0aGUgbW9udGguXG4gICAqIEByZXR1cm4gVGhlIG51bWJlciBvZiBtaWxsaXNlY29uZHMgYmV0d2VlbiAxIEphbnVhcnkgMTk3MCAwMDowMDowMCBVVEMgYW5kIHRoZSB1cGRhdGVkIGRhdGUuXG4gICAqIEB0b2RvIGFkZCBpbXBsZW1lbnRhdGlvblxuICAgKi9cbiAgc2V0VVRDRGF0ZShkYXRlOiBudW1iZXIpOiBudW1iZXIge1xuICAgIHRoaXMuX2dEYXRlLnNldFVUQ0RhdGUoZGF0ZSk7XG4gICAgdGhpcy5fY3JlYXRlRnJvbURhdGUodGhpcy5fZ0RhdGUpO1xuICAgIHJldHVybiB0aGlzLmdldFRpbWUoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTZXRzIHRoZSBmdWxsIHllYXIgZm9yIGEgc3BlY2lmaWVkIGRhdGUgYWNjb3JkaW5nIHRvIHVuaXZlcnNhbCB0aW1lLlxuICAgKiBUaGVuIHJlY3JlYXRlIHRoZSBKRGF0ZSBvYmplY3QgZnJvbSBuZXcgR2VvcmdpYW4gb2JqZWN0LlxuICAgKiBAcGFyYW0geWVhciAgQW4gaW50ZWdlciBzcGVjaWZ5aW5nIHRoZSBudW1lcmljIHZhbHVlIG9mIHRoZSB5ZWFyLCBmb3IgZXhhbXBsZSwgMTk5NS5cbiAgICogQHBhcmFtIG1vbnRoICBPcHRpb25hbC4gQW4gaW50ZWdlciBiZXR3ZWVuIDAgYW5kIDExIHJlcHJlc2VudGluZyB0aGUgbW9udGhzIEphbnVhcnkgdGhyb3VnaCBEZWNlbWJlci5cbiAgICogQHBhcmFtIGRhdGUgQW4gaW50ZWdlciBiZXR3ZWVuIDEgYW5kIDMxIHJlcHJlc2VudGluZyB0aGUgZGF5IG9mIHRoZSBtb250aC4gSWYgeW91IHNwZWNpZnkgdGhlIGRheVZhbHVlIHBhcmFtZXRlciwgeW91IG11c3QgYWxzb1xuICAgKiBzcGVjaWZ5IHRoZSBtb250aFZhbHVlLlxuICAgKiBAdG9kbyBhZGQgaW1wbGVtZW50YXRpb25cbiAgICovXG4gIHNldFVUQ0Z1bGxZZWFyKHllYXI6IG51bWJlciwgbW9udGg/OiBudW1iZXIsIGRhdGU/OiBudW1iZXIpOiBudW1iZXIge1xuICAgIHRoaXMuX2dEYXRlLnNldFVUQ0Z1bGxZZWFyKHllYXIsIG1vbnRoLCBkYXRlKTtcbiAgICB0aGlzLl9jcmVhdGVGcm9tRGF0ZSh0aGlzLl9nRGF0ZSk7XG4gICAgcmV0dXJuIHRoaXMuZ2V0VGltZSgpO1xuICB9XG5cbiAgLyoqXG4gICAqIFNldHMgdGhlIGhvdXIgZm9yIGEgc3BlY2lmaWVkIGRhdGUgYWNjb3JkaW5nIHRvIHVuaXZlcnNhbCB0aW1lLCBhbmQgcmV0dXJucyB0aGUgbnVtYmVyIG9mIG1pbGxpc2Vjb25kcyBzaW5jZVxuICAgKiBKYW51YXJ5IDEsIDE5NzAgMDA6MDA6MDAgVVRDIHVudGlsIHRoZSB0aW1lIHJlcHJlc2VudGVkIGJ5IHRoZSB1cGRhdGVkIERhdGUgaW5zdGFuY2UuXG4gICAqIFRoZW4gcmVjcmVhdGUgdGhlIEpEYXRlIG9iamVjdCBmcm9tIG5ldyBHZW9yZ2lhbiBvYmplY3QuXG4gICAqIEBwYXJhbSBob3VycyAgQW4gaW50ZWdlciBiZXR3ZWVuIDAgYW5kIDIzLCByZXByZXNlbnRpbmcgdGhlIGhvdXIuXG4gICAqIEBwYXJhbSBtaW4gT3B0aW9uYWwuIEFuIGludGVnZXIgYmV0d2VlbiAwIGFuZCA1OSwgcmVwcmVzZW50aW5nIHRoZSBtaW51dGVzLlxuICAgKiBAcGFyYW0gc2VjIE9wdGlvbmFsLiBBbiBpbnRlZ2VyIGJldHdlZW4gMCBhbmQgNTksIHJlcHJlc2VudGluZyB0aGUgc2Vjb25kcy4gSWYgeW91IHNwZWNpZnkgdGhlIHNlY29uZHNWYWx1ZSBwYXJhbWV0ZXIsXG4gICAqICAgICAgICB5b3UgbXVzdCBhbHNvIHNwZWNpZnkgdGhlIG1pbnV0ZXNWYWx1ZS5cbiAgICogQHBhcmFtIG1zIE9wdGlvbmFsLiBBIG51bWJlciBiZXR3ZWVuIDAgYW5kIDk5OSwgcmVwcmVzZW50aW5nIHRoZSBtaWxsaXNlY29uZHMuIElmIHlvdSBzcGVjaWZ5IHRoZSBtc1ZhbHVlIHBhcmFtZXRlcixcbiAgICogICAgICAgIHlvdSBtdXN0IGFsc28gc3BlY2lmeSB0aGUgbWludXRlc1ZhbHVlIGFuZCBzZWNvbmRzVmFsdWUuXG4gICAqIEByZXR1cm4gVGhlIG51bWJlciBvZiBtaWxsaXNlY29uZHMgYmV0d2VlbiBKYW51YXJ5IDEsIDE5NzAgMDA6MDA6MDAgVVRDIGFuZCB0aGUgdXBkYXRlZCBkYXRlLlxuICAgKiBAdG9kbyBhZGQgaW1wbGVtZW50YXRpb25cbiAgICovXG4gIHNldFVUQ0hvdXJzKGhvdXJzOiBudW1iZXIsIG1pbj86IG51bWJlciwgc2VjPzogbnVtYmVyLCBtcz86IG51bWJlcik6IG51bWJlciB7XG4gICAgdGhpcy5fZ0RhdGUuc2V0VVRDSG91cnMoaG91cnMsIG1pbiwgc2VjLCBtcyk7XG4gICAgdGhpcy5fY3JlYXRlRnJvbURhdGUodGhpcy5fZ0RhdGUpO1xuICAgIHJldHVybiB0aGlzLmdldFRpbWUoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTZXRzIHRoZSBtaWxsaXNlY29uZHMgZm9yIGEgc3BlY2lmaWVkIGRhdGUgYWNjb3JkaW5nIHRvIHVuaXZlcnNhbCB0aW1lLlxuICAgKlxuICAgKiBUaGVuIHJlY3JlYXRlIHRoZSBKRGF0ZSBvYmplY3QgZnJvbSBuZXcgR2VvcmdpYW4gb2JqZWN0LlxuICAgKiBAcGFyYW0gbXMgQSBudW1iZXIgYmV0d2VlbiAwIGFuZCA5OTksIHJlcHJlc2VudGluZyB0aGUgbWlsbGlzZWNvbmRzLlxuICAgKiBAcmV0dXJuIFRoZSBudW1iZXIgb2YgbWlsbGlzZWNvbmRzIGJldHdlZW4gMSBKYW51YXJ5IDE5NzAgMDA6MDA6MDAgVVRDIGFuZCB0aGUgdXBkYXRlZCBkYXRlLlxuICAgKiBAdG9kbyBhZGQgaW1wbGVtZW50YXRpb25cbiAgICovXG4gIHNldFVUQ01pbGxpc2Vjb25kcyhtczogbnVtYmVyKTogbnVtYmVyIHtcbiAgICB0aGlzLl9nRGF0ZS5zZXRVVENNaWxsaXNlY29uZHMobXMpO1xuICAgIHRoaXMuX2NyZWF0ZUZyb21EYXRlKHRoaXMuX2dEYXRlKTtcbiAgICByZXR1cm4gdGhpcy5nZXRUaW1lKCk7XG4gIH1cblxuICAvKipcbiAgICogU2V0cyB0aGUgbWludXRlcyBmb3IgYSBzcGVjaWZpZWQgZGF0ZSBhY2NvcmRpbmcgdG8gdW5pdmVyc2FsIHRpbWUuXG4gICAqXG4gICAqIFRoZW4gcmVjcmVhdGUgdGhlIEpEYXRlIG9iamVjdCBmcm9tIG5ldyBHZW9yZ2lhbiBvYmplY3QuXG4gICAqIEBwYXJhbSBtaW4gQW4gaW50ZWdlciBiZXR3ZWVuIDAgYW5kIDU5LCByZXByZXNlbnRpbmcgdGhlIG1pbnV0ZXMuXG4gICAqIEBwYXJhbSBzZWMgT3B0aW9uYWwuIEFuIGludGVnZXIgYmV0d2VlbiAwIGFuZCA1OSwgcmVwcmVzZW50aW5nIHRoZSBzZWNvbmRzLiBJZiB5b3Ugc3BlY2lmeSB0aGUgc2Vjb25kc1ZhbHVlIHBhcmFtZXRlcixcbiAgICogICAgICAgIHlvdSBtdXN0IGFsc28gc3BlY2lmeSB0aGUgbWludXRlc1ZhbHVlLlxuICAgKiBAcGFyYW0gbXMgT3B0aW9uYWwuIEEgbnVtYmVyIGJldHdlZW4gMCBhbmQgOTk5LCByZXByZXNlbnRpbmcgdGhlIG1pbGxpc2Vjb25kcy4gSWYgeW91IHNwZWNpZnkgdGhlIG1zVmFsdWUgcGFyYW1ldGVyLFxuICAgKiAgICAgICAgeW91IG11c3QgYWxzbyBzcGVjaWZ5IHRoZSBtaW51dGVzVmFsdWUgYW5kIHNlY29uZHNWYWx1ZS5cbiAgICogQHJldHVybiBUaGUgbnVtYmVyIG9mIG1pbGxpc2Vjb25kcyBiZXR3ZWVuIDEgSmFudWFyeSAxOTcwIDAwOjAwOjAwIFVUQyBhbmQgdGhlIHVwZGF0ZWQgZGF0ZS5cbiAgICogQHRvZG8gYWRkIGltcGxlbWVudGF0aW9uXG4gICAqL1xuICBzZXRVVENNaW51dGVzKG1pbjogbnVtYmVyLCBzZWM/OiBudW1iZXIsIG1zPzogbnVtYmVyKTogbnVtYmVyIHtcbiAgICB0aGlzLl9nRGF0ZS5zZXRVVENNaW51dGVzKG1pbiwgc2VjLCBtcyk7XG4gICAgdGhpcy5fY3JlYXRlRnJvbURhdGUodGhpcy5fZ0RhdGUpO1xuICAgIHJldHVybiB0aGlzLmdldFRpbWUoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTZXRzIHRoZSBtb250aCBmb3IgYSBzcGVjaWZpZWQgZGF0ZSBhY2NvcmRpbmcgdG8gdW5pdmVyc2FsIHRpbWUuXG4gICAqXG4gICAqIFRoZW4gcmVjcmVhdGUgdGhlIEpEYXRlIG9iamVjdCBmcm9tIG5ldyBHZW9yZ2lhbiBvYmplY3QuXG4gICAqIEBwYXJhbSBtb250aCBBbiBpbnRlZ2VyIGJldHdlZW4gMCBhbmQgMTEsIHJlcHJlc2VudGluZyB0aGUgbW9udGhzIEphbnVhcnkgdGhyb3VnaCBEZWNlbWJlci5cbiAgICogQHBhcmFtIGRhdGUgT3B0aW9uYWwuIEFuIGludGVnZXIgZnJvbSAxIHRvIDMxLCByZXByZXNlbnRpbmcgdGhlIGRheSBvZiB0aGUgbW9udGguXG4gICAqIEByZXR1cm4gVGhlIG51bWJlciBvZiBtaWxsaXNlY29uZHMgYmV0d2VlbiAxIEphbnVhcnkgMTk3MCAwMDowMDowMCBVVEMgYW5kIHRoZSB1cGRhdGVkIGRhdGUuXG4gICAqIEB0b2RvIGFkZCBpbXBsZW1lbnRhdGlvblxuICAgKi9cbiAgc2V0VVRDTW9udGgobW9udGg6IG51bWJlciwgZGF0ZT86IG51bWJlcik6IG51bWJlciB7XG4gICAgdGhpcy5fZ0RhdGUuc2V0VVRDTW9udGgobW9udGgsIGRhdGUpO1xuICAgIHRoaXMuX2NyZWF0ZUZyb21EYXRlKHRoaXMuX2dEYXRlKTtcbiAgICByZXR1cm4gdGhpcy5nZXRUaW1lKCk7XG4gIH1cblxuICAvKipcbiAgICogU2V0cyB0aGUgc2Vjb25kcyBmb3IgYSBzcGVjaWZpZWQgZGF0ZSBhY2NvcmRpbmcgdG8gdW5pdmVyc2FsIHRpbWUuXG4gICAqXG4gICAqIFRoZW4gcmVjcmVhdGUgdGhlIEpEYXRlIG9iamVjdCBmcm9tIG5ldyBHZW9yZ2lhbiBvYmplY3QuXG4gICAqIEBwYXJhbSBzZWMgQW4gaW50ZWdlciBiZXR3ZWVuIDAgYW5kIDU5LCByZXByZXNlbnRpbmcgdGhlIHNlY29uZHMuXG4gICAqIEBwYXJhbSBtcyBPcHRpb25hbC4gQSBudW1iZXIgYmV0d2VlbiAwIGFuZCA5OTksIHJlcHJlc2VudGluZyB0aGUgbWlsbGlzZWNvbmRzLlxuICAgKiBAdG9kbyBhZGQgaW1wbGVtZW50YXRpb25cbiAgICovXG4gIHNldFVUQ1NlY29uZHMoc2VjOiBudW1iZXIsIG1zPzogbnVtYmVyKTogbnVtYmVyIHtcbiAgICB0aGlzLl9nRGF0ZS5zZXRVVENTZWNvbmRzKHNlYywgbXMpO1xuICAgIHRoaXMuX2NyZWF0ZUZyb21EYXRlKHRoaXMuX2dEYXRlKTtcbiAgICByZXR1cm4gdGhpcy5nZXRUaW1lKCk7XG4gIH1cblxuICAvKipcbiAgICogQHJldHVybiBuYW1lIG9mIHRoZSBkYXkgb2YgdGhlIHdlZWsgaW4gcGVyc2lhbi5cbiAgICogQGV4YW1wbGUg2K/ZiNi02YbYqNmHXG4gICAqL1xuICBnZXROYW1lT2ZUaGVEYXkoKTogc3RyaW5nIHtcbiAgICByZXR1cm4gSkRhdGUuREFZU19PRl9XRUVLW3RoaXMuZ2V0RGF5KCldO1xuICB9XG5cbiAgLyoqXG4gICAqIEByZXR1cm4gbmFtZSBvZiB0aGUgbW9udGggaW4gcGVyc2lhbi5cbiAgICogQGV4YW1wbGUg2YXZh9ixXG4gICAqL1xuICBnZXROYW1lT2ZUaGVNb250aCgpOiBzdHJpbmcge1xuICAgIHJldHVybiBKRGF0ZS5GQV9NT05USFNbdGhpcy5nZXRNb250aCgpXTtcbiAgfVxuXG4gIC8qKlxuICAgKiByZXR1cm5zIHRoZSBkYXRlIHBvcnRpb24gb2YgYSBEYXRlIG9iamVjdCBpbiBodW1hbiByZWFkYWJsZSBmb3JtIGluIFBlcnNpYW4uXG4gICAqIEByZXR1cm4gYSBzdHJpbmcgZm9sbG93aW5nIHRoaXMgcGF0dGVybjogXCJuYW1lT2ZUaGVEYXkgbmFtZU9mVGhlTW9udGggZGF5TnVtYmVyIGZ1bGxZZWFyXCIuXG4gICAqIEBleGFtcGxlINm+2YbYrOKAjNi02YbYqNmHINin2LPZgdmG2K8gMzAgMTM3NVxuICAgKi9cbiAgdG9EYXRlU3RyaW5nKCk6IHN0cmluZyB7XG4gICAgcmV0dXJuIGAke3RoaXMuZ2V0TmFtZU9mVGhlRGF5KCl9ICR7dGhpcy5nZXROYW1lT2ZUaGVNb250aCgpfSAke3RoaXMuZ2V0RGF0ZSgpfSAke3RoaXMuZ2V0RnVsbFllYXIoKX1gO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgdGltZSBtYXJrZXIgb2Ygb2JqZWN0IHRpbWUuIGFsbCBob3VyIG51bWJlcnMgbGVzc2VyIHRoYW4gMTIgYXJlIGJlZm9yZSBub29uIGFuZCBhbGwgZ3JlYXRlciB0aGFuIDEyIGFyZSBhZnRlciBub29uLlxuICAgKiBAcGFyYW0gc2hvcnRWZXJzaW9uIGNvbnRyb2xzIG91dHB1dC4gaWYgYmUgdHJ1ZSwgb3V0cHV0IHdpbGwgYmUgaW4gc2hvcnQgZm9ybWF0IGxpa2U6INioLti4IGlmIGJlIGZhbHNlLCBvdXRwdXQgd2lsbCBiZSBpbiBjb21wbGV0ZSBmb3JtYXQgbGlrZTog2KjYudivINin2LIg2LjZh9ixXG4gICAqIEByZXR1cm4gdGltZSBtYXJrZXIgZm9yIHNob3dpbmcgaWYgdGltZSBpcyBiZWZvcmUgbm9vbiBvciBhZnRlciBpdFxuICAgKi9cbiAgZ2V0VGltZU1hcmtlcihzaG9ydFZlcnNpb246IGJvb2xlYW4gPSBmYWxzZSk6IHN0cmluZyB7XG4gICAgaWYgKHRoaXMuZ2V0SG91cnMoKSA8IDEyKSB7IHJldHVybiBzaG9ydFZlcnNpb24gPyBKRGF0ZS5TSE9SVF9CRUZPUkVfTk9PTiA6IEpEYXRlLkNPTVBMRVRFX0JFRk9SRV9OT09OOyB9XG4gICAgcmV0dXJuIHNob3J0VmVyc2lvbiA/IEpEYXRlLlNIT1JUX0FGVEVSX05PT04gOiBKRGF0ZS5DT01QTEVURV9BRlRFUl9OT09OO1xuICB9XG5cbiAgLyoqXG4gICAqIFJlcGxhY2UgcGF0dGVybnMgb2YgZGF0ZSBmb3JtYXR0aW5nIHdpdGggY29ycmVzcG9uZGluZyBzdHJpbmdzIGZyb20gSkRhdGUgb2JqZWN0IHZhbHVlcy5cbiAgICogSW4gYmktY2hhcmFjdGVyIHBhdHRlcm4gcGFydHMsIG1pc3NlZCBkaWdpdHMgd2lsbCBmaWxsIHdpdGggemVyby5cbiAgICogQHBhcmFtIHBhdHRlcm4gYSBwYXR0ZXJuIHN0cmluZyB3aXRoIHJlcGxhY2VhYmxlIHBhcnRzOlxuICAgKlxuICAgKiAgICAgICAgeXl5eSAtPiBZZWFyIG51bWJlciBpbiA0LWRpZ2l0IHJlcHJlc2VudGF0aW9uLiBleDogMTM5N1xuICAgKlxuICAgKiAgICAgICAgeXkgLT4gWWVhciBudW1iZXIgaW4gMi1kaWdpdCByZXByZXNlbnRhdGlvbi4gZXg6IDk3XG4gICAqXG4gICAqICAgICAgICBtbW1tIC0+IE5hbWUgb2YgdGhlIG1vbnRoIGluIEVuZ2xpc2ggcmVwcmVzZW50YXRpb24uIGV4OiBFc2ZhbmRcbiAgICpcbiAgICogICAgICAgIG1tbSAtPiBOYW1lIG9mIHRoZSBtb250aCBpbiBQZXJzaWFuIHJlcHJlc2VudGF0aW9uLiBleDog2KfYs9mB2YbYr1xuICAgKlxuICAgKiAgICAgICAgbW0gLT4gMi1kaWdpdCBudW1iZXIgb2YgdGhlIG1vbnRoIHN0YXJ0aW5nIGZyb20gMVxuICAgKlxuICAgKiAgICAgICAgbSAtPiBub24gemVyby1wYWRkaW5nIG51bWJlciBvZiB0aGUgbW9udGggc3RhcnRpbmcgZnJvbSAxXG4gICAqXG4gICAqICAgICAgICBkZGRkIC0+IE5hbWUgb2YgdGhlIGRheSBpbiB0aGUgd2VlayBpbiBFbmdsaXNoIHJlcHJlc2VudGF0aW9uLiBleDogU2hhbmJlXG4gICAqXG4gICAqICAgICAgICBkZGQgLT4gTmFtZSBvZiB0aGUgZGF5IGluIHRoZSB3ZWVrIGlkIFBlcnNpYW4gcmVwcmVzZW50YXRpb24uIGV4OiDYtNmG2KjZh1xuICAgKlxuICAgKiAgICAgICAgZGQgLT4gMi1kaWdpdCBudW1iZXIgb2YgdGhlIGRheSBpbiB0aGUgbW9udGggc3RhcnRpbmcgZnJvbSAxXG4gICAqXG4gICAqICAgICAgICBkIC0+IG5vbiB6ZXJvLXBhZGRpbmcgbnVtYmVyIG9mIHRoZSBkYXkgaW4gdGhlIG1vbnRoIHN0YXJ0aW5nIGZyb20gMVxuICAgKlxuICAgKiBAcmV0dXJuIEEgZm9ybWF0dGVkIHN0cmluZyB0aGF0IGFsbCBEYXRlIHBhdHRlcm4gcGFydHMgaGFzIGJlZW4gcmVwbGFjZWQuIE90aGVyIGNoYXJhY3RlcnMgb2YgdGhlIHBhdHRlcm4gd2lsbCBsZWZ0IHVuY2hhbmdlZC5cbiAgICovXG4gIHByaXZhdGUgX2Zvcm1hdF9kYXRlKHBhdHRlcm46IHN0cmluZyk6IHN0cmluZyB7XG4gICAgcmV0dXJuIHBhdHRlcm4ucmVwbGFjZSgveXl5eS9nLCBKRGF0ZS56ZXJvUGFkZGluZyh0aGlzLmdldEZ1bGxZZWFyKCksIDQpKVxuICAgICAgLnJlcGxhY2UoL1xcYnl5XFxiL2csICh0aGlzLmdldEZ1bGxZZWFyKCkgJSAxMDApLnRvU3RyaW5nKCkpXG4gICAgICAucmVwbGFjZSgvXFxibW1tbVxcYi9nLCBKRGF0ZS5FTl9NT05USFNbdGhpcy5nZXRNb250aCgpXSlcbiAgICAgIC5yZXBsYWNlKC9cXGJtbW1cXGIvZywgSkRhdGUuRkFfTU9OVEhTW3RoaXMuZ2V0TW9udGgoKV0pXG4gICAgICAucmVwbGFjZSgvXFxibW1cXGIvZywgSkRhdGUuemVyb1BhZGRpbmcodGhpcy5nZXRNb250aCgpICsgMSwgMikpXG4gICAgICAucmVwbGFjZSgvXFxibVxcYi9nLCAodGhpcy5nZXRNb250aCgpICsgMSkudG9TdHJpbmcoKSlcbiAgICAgIC5yZXBsYWNlKC9cXGJkZGRkXFxiL2csIEpEYXRlLkVOX0RBWVNfT0ZfV0VFS1t0aGlzLmdldERheSgpXSlcbiAgICAgIC5yZXBsYWNlKC9cXGJkZGRcXGIvZywgSkRhdGUuREFZU19PRl9XRUVLW3RoaXMuZ2V0RGF5KCldKVxuICAgICAgLnJlcGxhY2UoL1xcYmRkXFxiL2csIEpEYXRlLnplcm9QYWRkaW5nKHRoaXMuZ2V0RGF0ZSgpLCAyKSlcbiAgICAgIC5yZXBsYWNlKC9cXGJkXFxiL2csIHRoaXMuZ2V0RGF0ZSgpLnRvU3RyaW5nKCkpXG4gIH1cblxuICAvKipcbiAgICogUmVwbGFjZSBwYXR0ZXJucyBvZiB0aW1lIGZvcm1hdHRpbmcgd2l0aCBjb3JyZXNwb25kaW5nIHN0cmluZ3MgZnJvbSBKRGF0ZSBvYmplY3QgdmFsdWVzLlxuICAgKlxuICAgKiBJbiBiaS1jaGFyYWN0ZXIgcGF0dGVybiBwYXJ0cywgbWlzc2VkIGRpZ2l0cyB3aWxsIGZpbGwgd2l0aCB6ZXJvLlxuICAgKiBAcGFyYW0gcGF0dGVybiBhIHBhdHRlcm4gc3RyaW5nIHdpdGggcmVwbGFjZWFibGUgcGFydHM6XG4gICAqXG4gICAqICAgICAgICBISCAtPiAyLWRpZ2l0IGZvcm0gb2YgaG91ciBudW1iZXIgaW4gMjQtaG91ciBjbG9jayBmb3JtYXQuXG4gICAqXG4gICAqICAgICAgICBIIC0+IG5vbiB6ZXJvLXBhZGRpbmcgZm9ybSBvZiBob3VyIG51bWJlciBpbiAyNC1ob3VyIGNsb2NrIGZvcm1hdC5cbiAgICpcbiAgICogICAgICAgIGhoIC0+IDItZGlnaXQgZm9ybSBvZiBob3VyIG51bWJlciBpbiAxMi1ob3VyIGNsb2NrIGZvcm1hdC5cbiAgICpcbiAgICogICAgICAgIGggLT4gbm9uIHplcm8tcGFkZGluZyBmb3JtIG9mIGhvdXIgbnVtYmVyIGluIDEyLWhvdXIgY2xvY2sgZm9ybWF0LlxuICAgKlxuICAgKiAgICAgICAgSCAtPiBub24gemVyby1wYWRkaW5nIGZvcm0gb2YgaG91ciBudW1iZXIgaW4gMTItaG91ciBjbG9jayBmb3JtYXQuXG4gICAqXG4gICAqICAgICAgICBNTSAtPiAyLWRpZ2l0IGZvcm0gb2YgbWludXRlcyBudW1iZXIuXG4gICAqXG4gICAqICAgICAgICBNIC0+IG5vbiB6ZXJvLXBhZGRpbmcgZm9ybSBvZiBtaW51dGVzIG51bWJlclxuICAgKlxuICAgKiAgICAgICAgU1MgLT4gMi1kaWdpdCBmb3JtIG9mIHNlY29uZHMgbnVtYmVyLlxuICAgKlxuICAgKiAgICAgICAgUyAtPiBub24gemVyby1wYWRkaW5nIGZvcm0gb2Ygc2Vjb25kcyBudW1iZXIuXG4gICAqXG4gICAqICAgICAgICBsIC0+IG51bWJlciBvZiBtaWxsaXNlY29uZHNcbiAgICpcbiAgICogICAgICAgIFQgLT4gVGltZSBtYXJrZXIgaW4gZnVsbCBmb3JtYXQgbGlrZTog2YLYqNmEINin2LIg2LjZh9ixXG4gICAqXG4gICAqICAgICAgICB0IC0+IFRpbWUgbWFya2VyIGluIHNob3J0IGZvcm1hdCBsaWtlOiDZgi7YuFxuICAgKi9cbiAgcHJpdmF0ZSBfZm9ybWF0X3RpbWUocGF0dGVybjogc3RyaW5nKTogc3RyaW5nIHtcbiAgICByZXR1cm4gcGF0dGVybi5yZXBsYWNlKC9cXGJISFxcYi9nLCBKRGF0ZS56ZXJvUGFkZGluZyh0aGlzLmdldEhvdXJzKCksIDIpKVxuICAgICAgLnJlcGxhY2UoL1xcYkhcXGIvZywgdGhpcy5nZXRIb3VycygpLnRvU3RyaW5nKCkpXG4gICAgICAucmVwbGFjZSgvXFxiaGhcXGIvZywgSkRhdGUuemVyb1BhZGRpbmcodGhpcy5nZXRIb3VyczEyaG91ckNsb2NrKCksIDIpKVxuICAgICAgLnJlcGxhY2UoL1xcYmhcXGIvZywgdGhpcy5nZXRIb3VyczEyaG91ckNsb2NrKCkudG9TdHJpbmcoKSlcbiAgICAgIC5yZXBsYWNlKC9cXGJNTVxcYi9nLCBKRGF0ZS56ZXJvUGFkZGluZyh0aGlzLmdldE1pbnV0ZXMoKSwgMikpXG4gICAgICAucmVwbGFjZSgvXFxiTVxcYi9nLCB0aGlzLmdldE1pbnV0ZXMoKS50b1N0cmluZygpKVxuICAgICAgLnJlcGxhY2UoL1xcYlNTXFxiL2csIEpEYXRlLnplcm9QYWRkaW5nKHRoaXMuZ2V0U2Vjb25kcygpLCAyKSlcbiAgICAgIC5yZXBsYWNlKC9cXGJTXFxiL2csIHRoaXMuZ2V0U2Vjb25kcygpLnRvU3RyaW5nKCkpXG4gICAgICAucmVwbGFjZSgvXFxibFxcYi9nLCB0aGlzLmdldE1pbGxpc2Vjb25kcygpLnRvU3RyaW5nKCkpXG4gICAgICAucmVwbGFjZSgvXFxiVFxcYi9nLCB0aGlzLmdldFRpbWVNYXJrZXIoZmFsc2UpKVxuICAgICAgLnJlcGxhY2UoL1xcYnRcXGIvZywgdGhpcy5nZXRUaW1lTWFya2VyKHRydWUpKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBUaGlzIG1ldGhvZCBmb3JtYXQgZGF0ZSBhbmQgdGltZSBzdG9yZWQgaW4gdGhlIEpEYXRlIG9iamVjdCBhY2NvcmRpbmcgdG8gdGhlIGVudGVyZWQgcGF0dGVybi5cbiAgICpcbiAgICogT25seSBtYXNrcyB3aWxsIHJlcGxhY2UgYW5kIGFsbCBvdGhlciBjaGFyYWN0ZXJzIHdpbGwgYmUgdW5jaGFuZ2VkIGFmdGVyIGZvcm1hdHRpbmcuXG4gICAqXG4gICAqIFlvdSBjYW4gdXNlIG1hc2tzIHNldmVyYWwgdGltZXMgaW4gYSBwYXR0ZXJuIGJ1dCBiZSBjYXJlZnVsIGJlY2F1c2UgaWYgc29tZSBvZiBtYXNrcyB3cml0dGVuIGltbWVkaWF0ZWx5LCB0aGV5IGNyZWF0ZSBuZXcgbWFza3Mgd2l0aFxuICAgKiBkaWZmZXJlbnQgbWVhbmluZy4gSXQncyBiZXR0ZXIgdG8gYWx3YXlzIGhhdmUgc29tZSBzcGxpdHRlciBjaGFyYWN0ZXJzIGJldHdlZW4gZGlmZmVyZW50IG1hc2tzLlxuICAgKiBAcGFyYW0gcGF0dGVybiBhIHN0cmluZyBjb250YWluaW5nIHplcm8gb3IgbW9yZSBmb3JtYXR0aW5nIG1hc2suXG4gICAqXG4gICAqIE1hc2tzOlxuICAgKlxuICAgKiAgICAgICAgeXl5eSAtPiBZZWFyIG51bWJlciBpbiA0LWRpZ2l0IHJlcHJlc2VudGF0aW9uLiBMZWFkaW5nIHplcm8gZm9yIHllYXJzIGxlc3NlciB0aGFuIDEwMDAgZXg6IDEzOTdcbiAgICpcbiAgICogICAgICAgIHl5IC0+IFllYXIgbnVtYmVyIGluIDItZGlnaXQgcmVwcmVzZW50YXRpb24gd2l0aG91dCBMZWFkaW5nIHplcm9zLiBleDogOTdcbiAgICpcbiAgICogICAgICAgIG1tbW0gLT4gTmFtZSBvZiB0aGUgbW9udGggaW4gRW5nbGlzaCByZXByZXNlbnRhdGlvbi4gZXg6IEVzZmFuZFxuICAgKlxuICAgKiAgICAgICAgbW1tIC0+IE5hbWUgb2YgdGhlIG1vbnRoIGluIFBlcnNpYW4gcmVwcmVzZW50YXRpb24uIGV4OiDYp9iz2YHZhtivXG4gICAqXG4gICAqICAgICAgICBtbSAtPiAyLWRpZ2l0IG51bWJlciBvZiB0aGUgbW9udGggc3RhcnRpbmcgZnJvbSAxLiBMZWFkaW5nIHplcm8gZm9yIHNpbmdsZS1kaWdpdCBtb250aHMuXG4gICAqXG4gICAqICAgICAgICBtIC0+IG51bWJlciBvZiB0aGUgbW9udGggc3RhcnRpbmcgZnJvbSAxIHdpdGhvdXQgTGVhZGluZyB6ZXJvcy5cbiAgICpcbiAgICogICAgICAgIGRkZGQgLT4gTmFtZSBvZiB0aGUgZGF5IGluIHRoZSB3ZWVrIGluIEVuZ2xpc2ggcmVwcmVzZW50YXRpb24uIGV4OiBTaGFuYmVcbiAgICpcbiAgICogICAgICAgIGRkZCAtPiBOYW1lIG9mIHRoZSBkYXkgaW4gdGhlIHdlZWsgaWQgUGVyc2lhbiByZXByZXNlbnRhdGlvbi4gZXg6INi02YbYqNmHXG4gICAqXG4gICAqICAgICAgICBkZCAtPiAyLWRpZ2l0IG51bWJlciBvZiB0aGUgZGF5IGluIHRoZSBtb250aCBzdGFydGluZyBmcm9tIDEuIExlYWRpbmcgemVybyBmb3Igc2luZ2xlLWRpZ2l0IGRheXMuXG4gICAqXG4gICAqICAgICAgICBkIC0+IG51bWJlciBvZiB0aGUgZGF5IGluIHRoZSBtb250aCBzdGFydGluZyBmcm9tIDEgd2l0aG91dCBMZWFkaW5nIHplcm9zLlxuICAgKlxuICAgKiAgICAgICAgSEggLT4gMi1kaWdpdCBmb3JtIG9mIGhvdXIgbnVtYmVyIGluIDI0LWhvdXIgY2xvY2sgZm9ybWF0LiBMZWFkaW5nIHplcm8gZm9yIHNpbmdsZS1kaWdpdCBob3Vycy5cbiAgICpcbiAgICogICAgICAgIEggLT4gbm9uIHplcm8tcGFkZGluZyBmb3JtIG9mIGhvdXIgbnVtYmVyIGluIDI0LWhvdXIgY2xvY2sgZm9ybWF0IHdpdGhvdXQgTGVhZGluZyB6ZXJvcy5cbiAgICpcbiAgICogICAgICAgIGhoIC0+IDItZGlnaXQgZm9ybSBvZiBob3VyIG51bWJlciBpbiAxMi1ob3VyIGNsb2NrIGZvcm1hdC4gTGVhZGluZyB6ZXJvIGZvciBzaW5nbGUtZGlnaXQgaG91cnMuXG4gICAqXG4gICAqICAgICAgICBIIC0+IG5vbiB6ZXJvLXBhZGRpbmcgZm9ybSBvZiBob3VyIG51bWJlciBpbiAxMi1ob3VyIGNsb2NrIGZvcm1hdCB3aXRob3V0IExlYWRpbmcgemVyb3MuXG4gICAqXG4gICAqICAgICAgICBNTSAtPiAyLWRpZ2l0IGZvcm0gb2YgbWludXRlcyBudW1iZXIuIExlYWRpbmcgemVybyBmb3Igc2luZ2xlLWRpZ2l0IG1pbnV0ZXMuXG4gICAqXG4gICAqICAgICAgICBNIC0+IG5vbiB6ZXJvLXBhZGRpbmcgZm9ybSBvZiBtaW51dGVzIG51bWJlciB3aXRob3V0IExlYWRpbmcgemVyb3MuXG4gICAqXG4gICAqICAgICAgICBTUyAtPiAyLWRpZ2l0IGZvcm0gb2Ygc2Vjb25kcyBudW1iZXIuIExlYWRpbmcgemVybyBmb3Igc2luZ2xlLWRpZ2l0IHNlY29uZHMuXG4gICAqXG4gICAqICAgICAgICBTIC0+IG5vbiB6ZXJvLXBhZGRpbmcgZm9ybSBvZiBzZWNvbmRzIG51bWJlciB3aXRob3V0IExlYWRpbmcgemVyb3MuXG4gICAqXG4gICAqICAgICAgICBsIC0+IG51bWJlciBvZiBtaWxsaXNlY29uZHMgd2l0aG91dCBMZWFkaW5nIHplcm9zLlxuICAgKlxuICAgKiAgICAgICAgVCAtPiBUaW1lIG1hcmtlciBpbiBmdWxsIGZvcm1hdCBsaWtlOiDZgtio2YQg2KfYsiDYuNmH2LFcbiAgICpcbiAgICogICAgICAgIHQgLT4gVGltZSBtYXJrZXIgaW4gc2hvcnQgZm9ybWF0IGxpa2U6INmCLti4XG4gICAqQHJldHVybiBmb3JtYXR0ZWQgZGF0ZVRpbWUgc3RyaW5nLlxuICAgKi9cbiAgZm9ybWF0KHBhdHRlcm46IHN0cmluZyk6IHN0cmluZyB7XG4gICAgcmV0dXJuIHRoaXMuX2Zvcm1hdF90aW1lKHRoaXMuX2Zvcm1hdF9kYXRlKHBhdHRlcm4pKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcmV0dXJuIGEgc3RyaW5nIGluIHNpbXBsaWZpZWQgZXh0ZW5kZWQgSVNPIGZvcm1hdCAoSVNPIDg2MDEpLCB3aGljaCBpcyBhbHdheXMgMjQgb3IgMjcgY2hhcmFjdGVycyBsb25nICh5eXl5LW1tLWRkVEhIOk1NOlNTLmxaKS5cbiAgICogICAgICAgIEJlIGNhcmVmdWwgYmVjYXVzZSB0aGF0IFQgaW4gdGhlIG1pZGRsZSBvZiB0aGUgcGF0dGVybiBpcyBub3QgYSBmb3JtYXQgTWFzayBhbmQgaXMgYSBzaW1wbGUgY2hhcmFjdGVyLlxuICAgKi9cbiAgdG9JU09TdHJpbmcoKTogc3RyaW5nIHtcbiAgICByZXR1cm4gdGhpcy5mb3JtYXQoJ3l5eXktbW0tZGQnKSArICdUJyArIHRoaXMuZm9ybWF0KCdISDpNTTpTUy5sJykgKyAnWic7XG4gIH1cblxuICAvKipcbiAgICogQHJldHVybiBhIHN0cmluZyByZXByZXNlbnRhdGlvbiBvZiB0aGUgRGF0ZSBvYmplY3QuXG4gICAqIFtzZWUgdG9TdHJpbmcgbWV0aG9kXXtAbGluayB0b1N0cmluZ31cbiAgICogQHBhcmFtIGtleVxuICAgKi9cbiAgdG9KU09OKGtleT86IGFueSk6IHN0cmluZyB7XG4gICAgcmV0dXJuIHRoaXMudG9TdHJpbmcoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiByZXR1cm5zIGZvcm1hdHRlZCBkYXRlIHdpdGggZm9sbG93aW5nIHBhdHRlcm46ICdkZGQgbW1tIGQgeXl5eSBISDpNTTpTUydcbiAgICovXG4gIHRvU3RyaW5nKCk6IHN0cmluZyB7XG4gICAgcmV0dXJuIHRoaXMuZm9ybWF0KCdkZGQgbW1tIGQgeXl5eSBISDpNTTpTUycpXG4gIH1cblxuICAvKipcbiAgICogW0ZvciBtb3JlIGluZm9ybWF0aW9uIHNlZSBqYXZhc2NyaXB0IERhdGUgb2JqZWN0IGRvY3VtZW50YXRpb24gYWJvdXQgdGhpcyBtZXRob2Rde0BsaW5rIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0phdmFTY3JpcHQvUmVmZXJlbmNlL0dsb2JhbF9PYmplY3RzL0RhdGUvdG9Mb2NhbGVEYXRlU3RyaW5nfVxuICAgKlxuICAgKiBUaGUgbmV3IGxvY2FsZXMgYW5kIG9wdGlvbnMgYXJndW1lbnRzIGxldCBhcHBsaWNhdGlvbnMgc3BlY2lmeSB0aGUgbGFuZ3VhZ2Ugd2hvc2UgZm9ybWF0dGluZyBjb252ZW50aW9uc1xuICAgKiBzaG91bGQgYmUgdXNlZCBhbmQgYWxsb3cgdG8gY3VzdG9taXplIHRoZSBiZWhhdmlvciBvZiB0aGUgZnVuY3Rpb24uIEluIG9sZGVyIGltcGxlbWVudGF0aW9ucyxcbiAgICogd2hpY2ggaWdub3JlIHRoZSBsb2NhbGVzIGFuZCBvcHRpb25zIGFyZ3VtZW50cywgdGhlIGxvY2FsZSB1c2VkIGFuZCB0aGUgZm9ybSBvZiB0aGUgc3RyaW5nIHJldHVybmVkIGFyZVxuICAgKiBlbnRpcmVseSBpbXBsZW1lbnRhdGlvbiBkZXBlbmRlbnQuXG4gICAqXG4gICAqIEByZXR1cm4gYSBzdHJpbmcgd2l0aCBhIGxhbmd1YWdlIHNlbnNpdGl2ZSByZXByZXNlbnRhdGlvbiBvZiB0aGUgZGF0ZSBwb3J0aW9uIG9mIHRoaXMgZGF0ZS5cbiAgICovXG4gIHRvTG9jYWxlRGF0ZVN0cmluZygpOiBzdHJpbmc7XG4gIHRvTG9jYWxlRGF0ZVN0cmluZyhsb2NhbGVzPzogc3RyaW5nIHwgc3RyaW5nW10sIG9wdGlvbnM/OiBJbnRsLkRhdGVUaW1lRm9ybWF0T3B0aW9ucyk6IHN0cmluZztcbiAgdG9Mb2NhbGVEYXRlU3RyaW5nKGxvY2FsZXM/OiBzdHJpbmcgfCBzdHJpbmdbXSwgb3B0aW9ucz86IEludGwuRGF0ZVRpbWVGb3JtYXRPcHRpb25zKTogc3RyaW5nIHtcbiAgICByZXR1cm4gdGhpcy5fZ0RhdGUudG9Mb2NhbGVEYXRlU3RyaW5nKGxvY2FsZXMsIG9wdGlvbnMpO1xuICB9XG5cbiAgLyoqXG4gICAqIEByZXR1cm4gdG9Mb2NhbGVUaW1lU3RyaW5nIG9mIEdlb3JnaWFuIERhdGUgLlxuICAgKiBbRm9yIG1vcmUgaW5mb3JtYXRpb24gc2VlIGphdmFzY3JpcHQgRGF0ZSBvYmplY3QgZG9jdW1lbnRhdGlvbiBhYm91dCB0aGlzIG1ldGhvZF17QGxpbmsgaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvSmF2YVNjcmlwdC9SZWZlcmVuY2UvR2xvYmFsX09iamVjdHMvRGF0ZS90b0xvY2FsZVRpbWVTdHJpbmd9XG4gICAqL1xuICB0b0xvY2FsZVRpbWVTdHJpbmcoKTogc3RyaW5nO1xuICB0b0xvY2FsZVRpbWVTdHJpbmcobG9jYWxlcz86IHN0cmluZyB8IHN0cmluZ1tdLCBvcHRpb25zPzogSW50bC5EYXRlVGltZUZvcm1hdE9wdGlvbnMpOiBzdHJpbmc7XG4gIHRvTG9jYWxlVGltZVN0cmluZyhsb2NhbGVzPzogc3RyaW5nIHwgc3RyaW5nW10sIG9wdGlvbnM/OiBJbnRsLkRhdGVUaW1lRm9ybWF0T3B0aW9ucyk6IHN0cmluZyB7XG4gICAgcmV0dXJuIHRoaXMuX2dEYXRlLnRvTG9jYWxlVGltZVN0cmluZyhsb2NhbGVzLCBvcHRpb25zKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcmV0dXJuIHRvVGltZVN0cmluZyBvZiBHZW9yZ2lhbiBkYXRlXG4gICAqXG4gICAqIFtGb3IgbW9yZSBpbmZvcm1hdGlvbiBzZWUgamF2YXNjcmlwdCBEYXRlIG9iamVjdCBkb2N1bWVudGF0aW9uIGFib3V0IHRoaXMgbWV0aG9kXXtAbGluayBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9KYXZhU2NyaXB0L1JlZmVyZW5jZS9HbG9iYWxfT2JqZWN0cy9EYXRlL3RvVGltZVN0cmluZ31cbiAgICovXG4gIHRvVGltZVN0cmluZygpOiBzdHJpbmcge1xuICAgIHJldHVybiB0aGlzLl9nRGF0ZS50b1RpbWVTdHJpbmcoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcmV0dXJuIHRvVVRDU3RyaW5nIG9mIEdlb3JnaWFuIGRhdGUuXG4gICAqXG4gICAqIFtGb3IgbW9yZSBpbmZvcm1hdGlvbiBzZWUgamF2YXNjcmlwdCBEYXRlIG9iamVjdCBkb2N1bWVudGF0aW9uIGFib3V0IHRoaXMgbWV0aG9kXXtAbGluayBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9KYXZhU2NyaXB0L1JlZmVyZW5jZS9HbG9iYWxfT2JqZWN0cy9EYXRlL3RvVVRDU3RyaW5nfVxuICAgKiBAdG9kbyBhZGQgaW1wbGVtZW50YXRpb25cbiAgICovXG4gIHRvVVRDU3RyaW5nKCk6IHN0cmluZyB7XG4gICAgcmV0dXJuIHRoaXMuX2dEYXRlLnRvVVRDU3RyaW5nKCk7XG4gIH1cblxuICAvKipcbiAgICogU2ltaWxhciB0byB0aGUgZ2V0VGltZSBtZXRob2QuXG4gICAqXG4gICAqIFtGb3IgbW9yZSBpbmZvcm1hdGlvbiBhbHNvIHNlZSBnZXRUaW1lIG1ldGhvZF17QGxpbmsgZ2V0VGltZX1cbiAgICovXG4gIHZhbHVlT2YoKTogbnVtYmVyIHtcbiAgICByZXR1cm4gdGhpcy5nZXRUaW1lKCk7XG4gIH1cblxuICBhZGRNb250aChpbmNWYWx1ZTogbnVtYmVyKTogdm9pZCB7XG4gICAgLy8gbGV0IG5ld01vbnRoOiBudW1iZXIgPSAodGhpcy5nZXRNb250aCgpICsgaW5jVmFsdWUpICUgMTE7XG4gICAgLy8gbGV0IHBhc3NlZFllYXJzOiBudW1iZXIgPSB0aGlzLmdldEZ1bGxZZWFyKCkgKyBuZXdNb250aCAvIDExO1xuICAgIC8vIGxldCBuZXdZZWFyOiBudW1iZXIgPSBuZXdNb250aCA9PT0gMCA/IDtcbiAgICAvLyB0aGlzLnNldEZ1bGxZZWFyKG5ld1llYXIpO1xuICAgIC8vIHRoaXMuc2V0TW9udGgobmV3TW9udGggJSAxMSk7XG4gIH1cbn1cblxuIl19